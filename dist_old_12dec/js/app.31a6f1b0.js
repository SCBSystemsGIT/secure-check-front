(function(){"use strict";var e={4452:function(e,t,a){var n=a(9908),l=a.p+"img/secure-check-logo.5a09639d.png",o=(a(9138),a(3433));const r=o.A.create({baseURL:"https://www.securecheck.info/api/public/index.php/api",headers:{"Content-Type":"application/json"}});r.interceptors.request.use((e=>{const t=localStorage.getItem("token");return console.log("Token:",t),t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e)));var c=r,s=a(3753);function u(){const e=(0,n.ref)([]),t=(0,n.ref)(),a=(0,n.ref)(!1),l=(0,n.ref)(null),o=(0,n.ref)(null),r=(0,s.rd)(),u=async()=>{a.value=!0,l.value=null;try{const t=await c.get("/companies");e.value=t.data.data}catch(t){l.value="Une erreur est survenue lors du chargement des entreprises.",console.error(t),401==t.status&&r.push({name:"RequestMeeting",params:{domain:"scb"}})}finally{a.value=!1}},i=async e=>{a.value=!0,l.value=null;try{const a=await c.get(`/company/${e}`);t.value=a.data.data}catch(n){l.value="Une erreur est survenue lors du chargement des entreprises.",console.error(n)}finally{a.value=!1}},d=async(e,n)=>{a.value=!0,l.value=null;try{const a=await c.put(`/company/${n}`,e);t.value=a.data.data,o.value=a.status}catch(r){l.value="Une erreur est survenue lors du chargement des entreprises.",console.error(r)}finally{a.value=!1}},m=async e=>{a.value=!0,l.value=null;try{const a=new FormData;a.append("name",e.name),a.append("description",e.description),a.append("logo",e.logo);const n=await c.post("/company",a,{headers:{"Content-Type":"multipart/form-data"}});t.value=n.data.data,o.value=n.status}catch(n){l.value="Une erreur est survenue lors de l'enregistrement de l'entreprise.",console.error(n)}finally{a.value=!1}};return{companies:e,loading:a,errorMessage:l,fetchCompanies:u,showCompany:i,postCompany:m,updateCompany:d,statusCode:o,company:t}}var i=a(200);const d=(0,i.nY)("global",{state:()=>({baseUrl:"https://www.securecheck.info/api/public/index.php/api",baseUrl_:"https://www.securecheck.info/api/public/index.php",publicDir:"https://www.securecheck.info/api/public",domain:"scb",logoPath:"",currentPath:""}),actions:{setDomain(e){this.domain=e},setLogoPath(e){this.logoPath=e},setCurrentPath(e){this.currentPath=e}},getters:{getLogoPath:e=>e.logoPath,getCurrentPath:e=>e.currentPath},persist:!0});var m=a(575);const v=(0,i.nY)("user",(()=>{const e=(0,n.ref)(localStorage.getItem("token")||null);localStorage.setItem("roles_list",JSON.stringify(["ROLE_USER","ROLE_EMPLOYEE","ROLE_SUPERVISOR","ROLE_ADMIN","ROLE_SUPER_ADMIN","ROLE_MANAGER","ROLE_SecureCheck"]));const t=(0,n.ref)(JSON.parse(localStorage.getItem("roles_list"))),a=(0,n.ref)(null),l=()=>!!e.value,r=e=>t.value.includes(e),u=t=>{e.value=t,localStorage.setItem("token",t),o.A.defaults.headers.common["Authorization"]=`Bearer ${t}`},i=async()=>{},d=async()=>{try{const e=await c.get("/user/info");a.value=e.data,localStorage.setItem("userInfo",JSON.stringify(a.value))}catch(e){console.error("Failed to fetch user info:",e)}},v=async e=>{try{const t=await c.post("/login_check",e);u(t.data.token),await i(),await d()}catch(t){console.error("Login failed:",t)}},p=e=>"ROLE_ADMIN"==e,f=e=>"ROLE_SUPER_ADMIN"==e,E=e=>"ROLE_SUPERVISOR"==e,g=e=>"ROLE_EMPLOYEE"==e,V=e=>"ROLE_USER"==e,h=e=>"ROLE_MANAGER"==e,N=e=>"ROLE_SecureCheck"==e,k=(0,s.rd)(),y=()=>{e.value=null,a.value=null,t.value=[],localStorage.removeItem("token"),localStorage.removeItem("roles"),localStorage.removeItem("userInfo"),localStorage.removeItem("roles_list"),m.oR.info("Déconnecté"),k.push("/sign-in"),window.location="/sign-in"};return{token:e,roles:t,isAuthenticated:l,hasRole:r,setToken:u,fetchRoles:i,login:v,logout:y,fetchUserInfo:d,isAdmin:p,isSuperAdmin:f,isSupervisor:E,isEmployee:g,isUser:V,isManager:h,isSecureCheck:N}}),{persist:!0}),p=(0,n.reactive)({}),f={class:"top-bar"},E={class:"container"},g={class:"row align-items-center"},V={class:"col col-6 col-md-6 top-bar-left"},h=["src","alt"],N={class:"col col-6 col-md-6 top-bar-right"},k={class:"account-login-button"};var y={__name:"NavbarComponent",setup(e){const t=v(),a=(0,s.lq)(),o=()=>{t.logout()},r=t.isAuthenticated(),{publicDir:c}=d(),{showCompany:i,company:m}=u(),y=(0,n.ref)(localStorage.getItem("currentCompany"));(0,n.onBeforeMount)((async()=>{console.log("Host:",window.location.host),console.log("Path:",window.location.pathname),"/sign-in"!=window.location.pathname&&(y.value?await i(y.value):y.value="")})),(0,n.watch)((()=>p["company_slug"]),(async e=>{await i(localStorage.getItem("currentCompany")??e)}));const b=(0,n.ref)(JSON.parse(localStorage.getItem("userInfo"))||{}),C=(0,n.ref)(b?.value?.roles?b.value.roles[0]:"");return(0,n.onMounted)((()=>{})),(e,s)=>{const u=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",f,[(0,n.createElementVNode)("div",E,[(0,n.createElementVNode)("div",g,[(0,n.createElementVNode)("div",V,[(0,n.createElementVNode)("div",null,["scb"==(0,n.unref)(a).params.domain?((0,n.openBlock)(),(0,n.createBlock)(u,{key:0,to:"/"},{default:(0,n.withCtx)((()=>s[0]||(s[0]=[(0,n.createElementVNode)("img",{src:l,class:"",alt:"secure-check-logo"},null,-1)]))),_:1})):(0,n.unref)(m)?((0,n.openBlock)(),(0,n.createBlock)(u,{key:1,to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{class:"logo",src:`${(0,n.unref)(c)}/logo/${(0,n.unref)(m)?.logo}`,alt:(0,n.unref)(m)?.logo},null,8,h)])),_:1})):((0,n.openBlock)(),(0,n.createBlock)(u,{key:2,to:"/"},{default:(0,n.withCtx)((()=>s[1]||(s[1]=[(0,n.createElementVNode)("img",{src:l,class:"",alt:"secure-check-logo"},null,-1)]))),_:1}))])]),(0,n.createElementVNode)("div",N,[(0,n.createElementVNode)("div",k,[(0,n.withDirectives)((0,n.createElementVNode)("p",null,(0,n.toDisplayString)(`${b.value}`)+" "+(0,n.toDisplayString)(`${(0,n.unref)(c)}/logo/${(0,n.unref)(m)?.logo}`),513),[[n.vShow,!1]]),(0,n.unref)(r)?((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:0,onClick:o,class:"login-button",role:"button"}," Se Déconnecter ")):"Login"!=(0,n.unref)(a).name?((0,n.openBlock)(),(0,n.createBlock)(u,{key:1,to:"/sign-in",class:"login-button"},{default:(0,n.withCtx)((()=>s[2]||(s[2]=[(0,n.createTextVNode)(" Se Connecter ")]))),_:1})):((0,n.openBlock)(),(0,n.createBlock)(u,{key:2,to:"/request-meeting",class:"login-button"},{default:(0,n.withCtx)((()=>s[3]||(s[3]=[(0,n.createTextVNode)(" Visite ")]))),_:1})),(0,n.unref)(t).isManager(C.value)?((0,n.openBlock)(),(0,n.createBlock)(u,{key:3,to:`/${y.value??"scb"}/edit-company/${y.value}`,class:"login-button"},{default:(0,n.withCtx)((()=>s[4]||(s[4]=[(0,n.createTextVNode)(" Modifier Entreprise ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0)])])])])])}}};const b=y;var C=b;function w(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("div")}var _=a(7639);const B={},R=(0,_.A)(B,[["render",w]]);var S=R,x={__name:"HomeView",setup(e){return(e,t)=>{const a=(0,n.resolveComponent)("router-view");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createVNode)(C),(0,n.createVNode)(a),(0,n.createVNode)(S)])}}};const M=x;var q=M,D=Object.assign({name:"App"},{__name:"App",setup(e){return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createVNode)((0,n.unref)(q))]))}});const I=D;var L=I;function U(){const e=(0,n.ref)(""),t=(0,n.ref)(""),a=(0,n.ref)(!1),l=(0,n.ref)(null),o=(0,n.ref)(null),r=v(),s=(0,n.ref)(null),u=(0,n.ref)(null),i=async()=>{a.value=!0,l.value=null,o.value=null;try{const a=await c.post("/login_check",{username:e.value,password:t.value});o.value=a.status,localStorage.setItem("token",a.data.token),r.setToken(a.data.token);let n=d();return console.log({fetchResult:n}),s.value=n,a.data}catch(n){l.value="Login failed: "+(n.response?.data?.message||"Unknown error"),o.value=n.response.status,console.error(n)}finally{a.value=!1}},d=async()=>{try{const e=await c.get("/user/info");u.value=e.data,localStorage.setItem("userInfo",JSON.stringify(u.value))}catch(e){console.error("Failed to fetch user info:",e)}};return{username:e,password:t,loading:a,errorMessage:l,statusCode:o,company_name:s,userInfo:u,login:i}}const A={class:"background-gradi login-meeting"},T={class:"container"},O={class:"row align-items-center"},$={class:"col col-12 col-md-12 col-sm-12"},P={action:""},j={class:"submit-button"};var Q={__name:"LoginView",setup(e){const{login:t,username:a,password:o,statusCode:r,company_name:c,userInfo:s}=U();(0,n.watch)(r,(e=>{switch(e){case 200:m.oR.success("Connexion réussie."),console.log({company_name:c}),setTimeout((()=>{window.location=s?.value?.company??"scb/menu"}),1500);break;case 201:m.oR.success("Utilisateur connecté avec succès.");break;case 400:m.oR.error("La requête est mal formée.");break;case 401:m.oR.error("Identifiants incorrects.");break;case 403:m.oR.error("  Accès refusé.");break;case 404:m.oR.error("La ressource demandée n'existe pas.");break;case 500:m.oR.error("Une erreur interne est survenue.");break;default:console.log(`Erreur inconnue - Code : ${e}`)}}));let u=localStorage.getItem("currentCompany");const i=(e,t)=>{console.info({params:e,valueAdded:t}),p[e]=t};return(0,n.onMounted)((async()=>{"/sign-in"==window.location.pathname&&(u?i("company_slug",u):u="")})),(e,r)=>((0,n.openBlock)(),(0,n.createElementBlock)("section",A,[(0,n.createElementVNode)("div",T,[(0,n.createElementVNode)("div",O,[(0,n.createElementVNode)("div",$,[r[6]||(r[6]=(0,n.createElementVNode)("div",{class:"popup-logo"},[(0,n.createElementVNode)("a",{href:"#"},[(0,n.createElementVNode)("img",{src:l,class:"",alt:"secure-check-logo"})])],-1)),(0,n.createElementVNode)("form",P,[(0,n.createElementVNode)("div",null,[r[3]||(r[3]=(0,n.createElementVNode)("label",{for:"client-email"},"Email",-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"email",id:"client-email",name:"client-email","onUpdate:modelValue":r[0]||(r[0]=e=>(0,n.isRef)(a)?a.value=e:null)},null,512),[[n.vModelText,(0,n.unref)(a)]]),r[4]||(r[4]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[r[5]||(r[5]=(0,n.createElementVNode)("label",{for:"pwd"},"Mot de passe",-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"password",id:"pwd",name:"pwd","onUpdate:modelValue":r[1]||(r[1]=e=>(0,n.isRef)(o)?o.value=e:null)},null,512),[[n.vModelText,(0,n.unref)(o)]])]),(0,n.createElementVNode)("div",j,[(0,n.createElementVNode)("input",{type:"submit",value:"Soumettre",onClick:r[2]||(r[2]=(0,n.withModifiers)(((...e)=>(0,n.unref)(t)&&(0,n.unref)(t)(...e)),["prevent"]))})])])])])])]))}};const F=Q;var z=F;function J(){const e=(0,n.ref)({name:"",firstname:"",email:"",password:"",title:"",contact:"",role:"ROLE_USER",status:!0,department_id:""}),t=(0,n.ref)(!1),a=(0,n.ref)(null),l=(0,n.ref)(null),o=(0,n.ref)(null),r=async()=>{t.value=!0,a.value=null,l.value=null;try{const t=await c.post("/user/create",e.value);return o.value=t.status,l.value="Utilisateur créé avec succès !",t.data}catch(n){a.value="Erreur lors de la création de l'utilisateur : "+(n.response?.data?.message||"Erreur inconnue"),o.value=n.response?.status||500,console.error(n)}finally{t.value=!1}};return{user:e,loading:t,errorMessage:a,successMessage:l,statusCode:o,createUser:r}}function H(){const e=(0,n.ref)([]),t=(0,n.ref)(!1),a=(0,n.ref)(null),l=(0,n.ref)(null),o=async()=>{t.value=!0,a.value=null;try{const t=await c.get("/departement/list",{params:{name:"IT Department",location:"Building A"}});e.value=t.data,l.value=t.status}catch(n){l.value=n.response?.status||500,a.value="Erreur lors de la récupération des départements : "+(n.response?.data?.message||"Erreur inconnue"),console.error(n)}finally{t.value=!1}};return{departements:e,loading:t,errorMessage:a,statusCode:l,fetchDepartements:o}}const W={class:"background-gradi"},Y={class:"request-meeting meeting-form"},G={class:"container"},K={class:"row align-items-center"},Z={class:"col col-12 col-md-12 col-sm-12"},X={key:0,value:"ROLE_USER"},ee={key:1,value:"ROLE_EMPLOYEE"},te={key:2,value:"ROLE_SUPERVISOR"},ae={key:3,value:"ROLE_SecureCheck"},ne={key:4,value:"ROLE_MANAGER"},le={key:5,value:"ROLE_ADMIN"},oe={key:6,value:"ROLE_SUPER_ADMIN"},re=["value"],ce=["value"],se=["value"],ue={key:0},ie={key:1},de={class:"submit-button"},me=["disabled"],ve={key:0,class:"error"};var pe={__name:"CreateUserView",setup(e){const{user:t,loading:a,errorMessage:l,successMessage:o,createUser:r,statusCode:c}=J(),{departements:i,fetchDepartements:d}=H(),p=(0,s.rd)(),{companies:f,fetchCompanies:E}=u(),g=()=>{r()},V=v(),h=(0,n.ref)(),N=(0,n.ref)();N.value=JSON.parse(localStorage.getItem("userInfo")),h.value=N.value?.roles[0],(0,n.onMounted)((async()=>{await d(),await E()})),(0,n.watch)(c,(e=>{switch(e){case 200:m.oR.success("OK - Utilisateur créé avec succès."),m.oR.info(o),p.push(localStorage.getItem("currentCompany")??"/scb/menu");break;case 201:m.oR.success("Created - L'utilisateur a été créé avec succès."),setTimeout((()=>{p.push({name:"Menu",params:{domain:y.value??localStorage.getItem("currentCompany")}})}),1400);break;case 400:m.oR.info("Bad Request - La requête est mal formée.");break;case 401:m.oR.info("Unauthorized - Vous devez être authentifié.");break;case 403:m.oR.info("Forbidden - Vous n'avez pas la permission.");break;case 404:m.oR.info("Not Found - La ressource demandée n'existe pas.");break;case 500:m.oR.info("Internal Server Error - Une erreur interne est survenue.");break;default:m.oR.info(`Erreur inconnue - Code : ${e}`)}}));const k=(0,s.lq)(),y=(0,n.ref)(k.params.domain||"scb"),b=()=>{p.push({name:"Menu",params:{domain:y.value}})},{showCompany:C,company:w}=u();return(0,n.onBeforeMount)((async()=>{if(console.log("Host:",window.location.host),console.log("Path:",window.location.pathname),"/sign-in"!=window.location.pathname){let e=localStorage.getItem("currentCompany");e?await C(e):e=""}})),(e,o)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",W,[(0,n.createElementVNode)("section",Y,[(0,n.createElementVNode)("div",G,[(0,n.createElementVNode)("div",K,[(0,n.createElementVNode)("div",Z,[(0,n.createElementVNode)("div",{class:"d-flex justify-content-center align-items-center"},[(0,n.createElementVNode)("div",{class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},[(0,n.createElementVNode)("button",{class:"back",onClick:b},"Retour"),o[10]||(o[10]=(0,n.createElementVNode)("h3",null,"Création Utilisateur",-1))])]),(0,n.createElementVNode)("form",{onSubmit:(0,n.withModifiers)(g,["prevent"])},[(0,n.createElementVNode)("div",null,[o[11]||(o[11]=(0,n.createElementVNode)("label",{for:"name"},"Nom",-1)),o[12]||(o[12]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"name","onUpdate:modelValue":o[0]||(o[0]=e=>(0,n.unref)(t).name=e)},null,512),[[n.vModelText,(0,n.unref)(t).name]]),o[13]||(o[13]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[o[14]||(o[14]=(0,n.createElementVNode)("label",{for:"firstname"},"Prénom",-1)),o[15]||(o[15]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"firstname","onUpdate:modelValue":o[1]||(o[1]=e=>(0,n.unref)(t).firstname=e)},null,512),[[n.vModelText,(0,n.unref)(t).firstname]]),o[16]||(o[16]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[o[17]||(o[17]=(0,n.createElementVNode)("label",{for:"email"},"Email",-1)),o[18]||(o[18]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"email",id:"email","onUpdate:modelValue":o[2]||(o[2]=e=>(0,n.unref)(t).email=e)},null,512),[[n.vModelText,(0,n.unref)(t).email]]),o[19]||(o[19]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[o[20]||(o[20]=(0,n.createElementVNode)("label",{for:"password"},"Mot de passe",-1)),o[21]||(o[21]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"password",id:"password","onUpdate:modelValue":o[3]||(o[3]=e=>(0,n.unref)(t).password=e)},null,512),[[n.vModelText,(0,n.unref)(t).password]]),o[22]||(o[22]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[o[23]||(o[23]=(0,n.createElementVNode)("label",{for:"title"},"Titre",-1)),o[24]||(o[24]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"title","onUpdate:modelValue":o[4]||(o[4]=e=>(0,n.unref)(t).title=e)},null,512),[[n.vModelText,(0,n.unref)(t).title]]),o[25]||(o[25]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[o[26]||(o[26]=(0,n.createElementVNode)("label",{for:"contact"},"Numéro de téléphone",-1)),o[27]||(o[27]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"contact","onUpdate:modelValue":o[5]||(o[5]=e=>(0,n.unref)(t).contact=e)},null,512),[[n.vModelText,(0,n.unref)(t).contact]]),o[28]||(o[28]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[o[29]||(o[29]=(0,n.createElementVNode)("label",{for:"role"},"Rôle",-1)),o[30]||(o[30]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("select",{id:"role","onUpdate:modelValue":o[6]||(o[6]=e=>(0,n.unref)(t).role=e),name:"country",class:"form-control"},[(0,n.unref)(V).isAdmin(h.value)||(0,n.unref)(V).isSupervisor(h.value)||(0,n.unref)(V).isManager(h.value)||(0,n.unref)(V).isManager(h.value)||(0,n.unref)(V).isSecureCheck(h.value)?((0,n.openBlock)(),(0,n.createElementBlock)("option",X," Utilisateur ")):(0,n.createCommentVNode)("",!0),(0,n.unref)(V).isAdmin(h.value)||(0,n.unref)(V).isSupervisor(h.value)||(0,n.unref)(V).isManager(h.value)||(0,n.unref)(V).isSecureCheck(h.value)?((0,n.openBlock)(),(0,n.createElementBlock)("option",ee," Employé ")):(0,n.createCommentVNode)("",!0),(0,n.unref)(V).isAdmin(h.value)||(0,n.unref)(V).isManager(h.value)||(0,n.unref)(V).isSecureCheck(h.value)?((0,n.openBlock)(),(0,n.createElementBlock)("option",te," Superviseur ")):(0,n.createCommentVNode)("",!0),(0,n.unref)(V).isAdmin(h.value)?((0,n.openBlock)(),(0,n.createElementBlock)("option",ae," Secure Check ")):(0,n.createCommentVNode)("",!0),(0,n.unref)(V).isAdmin(h.value)?((0,n.openBlock)(),(0,n.createElementBlock)("option",ne," Manager ")):(0,n.createCommentVNode)("",!0),(0,n.unref)(V).isAdmin(h.value)?((0,n.openBlock)(),(0,n.createElementBlock)("option",le," Admin ")):(0,n.createCommentVNode)("",!0),(0,n.unref)(V).isAdmin(h.value)||(0,n.unref)(V).isSupervisor(h.value)||(0,n.unref)(V).isManager(h.value)?((0,n.openBlock)(),(0,n.createElementBlock)("option",oe,"Super Admin")):(0,n.createCommentVNode)("",!0)],512),[[n.vModelSelect,(0,n.unref)(t).role]]),o[31]||(o[31]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[o[32]||(o[32]=(0,n.createElementVNode)("label",{for:"department"},"Department",-1)),o[33]||(o[33]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("select",{"onUpdate:modelValue":o[7]||(o[7]=e=>(0,n.unref)(t).department_id=e),id:"department",name:"department",class:"form-control"},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(i),(e=>((0,n.openBlock)(),(0,n.createElementBlock)("option",{key:e.id,value:e.id},(0,n.toDisplayString)(e.name),9,re)))),128))],512),[[n.vModelSelect,(0,n.unref)(t).department_id]]),o[34]||(o[34]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[o[35]||(o[35]=(0,n.createElementVNode)("label",{for:"company"},"Entreprise",-1)),o[36]||(o[36]=(0,n.createElementVNode)("br",null,null,-1)),"scb"==(0,n.unref)(w)?.slug?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("select",{key:0,"onUpdate:modelValue":o[8]||(o[8]=e=>(0,n.unref)(t).company_id=e),id:"company",name:"company",class:"form-control"},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(f),(e=>((0,n.openBlock)(),(0,n.createElementBlock)("option",{key:e?.id,value:e?.id},(0,n.toDisplayString)(e?.name),9,ce)))),128))],512)),[[n.vModelSelect,(0,n.unref)(t).company_id]]):(0,n.unref)(w)?.name?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("input",{key:1,type:"text",id:"name",value:(0,n.unref)(w)?.name},null,8,se))]),(0,n.withDirectives)((0,n.createElementVNode)("div",null,[o[37]||(o[37]=(0,n.createElementVNode)("label",{for:"status"},"Statut",-1)),o[38]||(o[38]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"checkbox",id:"status","onUpdate:modelValue":o[9]||(o[9]=e=>(0,n.unref)(t).status=e)},null,512),[[n.vModelCheckbox,(0,n.unref)(t).status]]),(0,n.unref)(t).status?((0,n.openBlock)(),(0,n.createElementBlock)("span",ue,"Actif")):((0,n.openBlock)(),(0,n.createElementBlock)("span",ie,"Inactif")),o[39]||(o[39]=(0,n.createElementVNode)("br",null,null,-1))],512),[[n.vShow,!1]]),(0,n.createElementVNode)("div",de,[(0,n.createElementVNode)("input",{type:"submit",value:"Soumettre",disabled:(0,n.unref)(a)},null,8,me)]),(0,n.unref)(l)?((0,n.openBlock)(),(0,n.createElementBlock)("p",ve,(0,n.toDisplayString)((0,n.unref)(l)),1)):(0,n.createCommentVNode)("",!0)],32)])])])])]))}};const fe=pe;var Ee=fe;function ge(){const e=(0,n.ref)(null),t=(0,n.ref)(null),a=(0,n.ref)(null),l=async n=>{try{const t=await c.post("/visitor/create",n);return e.value=t.status,a.value=t.data.data.visitor_id,console.log({data___:t.data,visitorId___:a.value}),t.data}catch(l){throw e.value=l.response?.status,t.value=l.response?.data?.message||"An unexpected error occurred",new Error(t.value)}};return{createVisitor:l,statusCode:e,errorMessage:t,visitorId:a}}const Ve=()=>{const e=(0,n.ref)(null),t=(0,n.ref)(null),a=async()=>{try{const t=await c.get("/user/info");e.value=t.data}catch(a){t.value=a.response?.data?.error||"Failed to fetch user info"}};return{userInfo:e,error:t,fetchUserInfo:a}};function he(){const e=(0,n.ref)(!1),t=(0,n.ref)(null),a=(0,n.ref)(null),l=(0,n.ref)(null),o=async n=>{e.value=!0,t.value=null;try{const e=await c.post("/requests/create",n);return a.value=e.data.data.id,l.value=e.status,e.data}catch(o){throw t.value=o.response?o.response.data:o.message,t.value}finally{e.value=!1}};return{loading:e,error:t,createVisitRequest:o,requestId:a,statusCodeReq:l}}function Ne(){const e=(0,n.ref)(!1),t=(0,n.ref)(),a=(0,n.ref)(null),l=(0,n.ref)(null),o=(0,n.ref)(null),r=async t=>{e.value=!0,a.value=null,l.value=null,o.value=null;try{const e=await c.post("/evenement/create",t,{headers:{"Content-Type":"application/json"}});o.value=e.status,l.value="Événement créé avec succès !"}catch(n){n.response?(o.value=n.response.status,a.value=`Erreur: ${n.response.status} - ${n.response.data.message||"Erreur lors de la création de l’événement."}`):a.value="Erreur réseau ou serveur non joignable.",console.error(n)}finally{e.value=!1}},s=async n=>{e.value=!0,a.value=null,l.value=null,o.value=null;try{const e=await c.get("/evenement/"+n);t.value=e.data.data,o.value=e.status,l.value="Événement Rétrouvé"}catch(r){r.response?(o.value=r.response.status,a.value=`Erreur: ${r.response.status} - ${r.response.data.message||"Erreur lors de la recherche de l’événement."}`):a.value="Erreur réseau ou serveur non joignable.",console.error(r)}finally{e.value=!1}};return{loading:e,errorMessage:a,successMessage:l,statusCode:o,createEvent:r,showEvent:s,event:t}}const ke={class:"request-meeting"},ye={class:"background-gradi"},be={class:"request-meeting meeting-form"},Ce={class:"row align-items-center"},we={class:"col col-12 col-md-12 col-sm-12"},_e={class:"d-flex justify-content-start align-items-center gap-5 mb-3"},Be={key:0,class:"text-center"},Re={key:0,class:"text-center pb-3"},Se={key:0,value:"1"},xe={class:"submit-button"},Me=["disabled"],qe={key:0,class:"error"};var De={__name:"CreateVisitorView",setup(e){const t=(0,n.ref)(),a=(0,n.ref)();a.value=JSON.parse(localStorage.getItem("userInfo")),t.value=a.value?.roles[0];const{userInfo:l,fetchUserInfo:o}=Ve(),{createVisitor:r,statusCode:c,visitorId:i}=ge(),{createVisitRequest:d,requestId:p,statusCodeReq:f}=he(),{showCompany:E,company:g}=u(),{showEvent:V,event:h}=Ne(),N=v(),k=N.isAuthenticated(),y=(0,s.rd)(),b=(0,s.lq)(),C=(0,n.ref)({user_id:l?.value?.id,evenements_id:h?.value?.id??null,company_id:g?.value?.id??null,firstname:"",lastname:"",email:"",contact:"",address:"",id_number:"",organisation_name:"",visitor_type:""}),w=(0,n.ref)({user_id:l?.value?.id,visitor_id:"",host:""}),_=(0,n.ref)(""),B=(0,n.ref)(!1),R=async()=>{C.value.user_id=l?.value?.id;try{C.value.evenements_id=h?.value?.id,C.value.company_id=g?.value?.id,await r(C.value),w.value.visitor_id=i.value,w.value.user_id=l?.value?.id,w.value.user_id=l?.value?.id,await d(w.value)}catch(e){_.value=`Erreur: ${e.message}`}finally{B.value=!1}},S=(0,n.ref)(b.params.domain||"scb"),x=(0,n.ref)("");return(0,n.onBeforeMount)((async()=>{b.params.slug&&(await V(b.params.slug),x.value=h.value.name),S.value&&(await E(S.value),y.push({name:"CreateVisitor",params:{domain:S.value}})),await o()})),(0,n.watch)(c,(e=>{switch(e){case 201:k?(m.oR.success("Visiteur créé avec succès."),N.isEmployee(t.value)):(m.oR.success("Demande créé avec succès."),setTimeout((()=>{y.push({name:"RequestMeeting",params:{domain:S.value,id:p.value}})}),2e3));break;case 200:k?(m.oR.success("Visiteur créé avec succès."),N.isEmployee(t.value)?setTimeout((()=>{y.push({name:"WaitingValidation",params:{domain:S,id:p.value}})}),1500):(m.oR.success("Visiteur créé avec succès."),y.push({name:"Menu",params:{domain:S}}))):(m.oR.success("Demande créé avec succès."),alert(200),setTimeout((()=>{y.push({name:"RequestMeeting",params:{domain:S.value,id:p.value}})}),1500));break;case 400:m.oR.info("La requête est mal formée.");break;case 401:m.oR.info("Vous devez être authentifié."),setTimeout((()=>{y.push({name:"RequestMeeting",params:{domain:S,id:p.value}})}),1500);break;case 403:m.oR.info("Vous n'avez pas la permission.");break;case 404:m.oR.info("La ressource demandée n'existe pas.");break;case 500:m.oR.info("Une erreur interne est survenue.");break;default:m.oR.info(`Code : ${e}`)}})),(0,n.watch)(f,(e=>{switch(e){case 201:p?.value?setTimeout((()=>{y.push({name:"WaitingValidation",params:{domain:S.value,id:p.value}})}),1500):console.error("requestId est null ou undefined.");break;default:break}})),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("section",ke,[(0,n.createElementVNode)("div",ye,[(0,n.createElementVNode)("section",be,[(0,n.createElementVNode)("div",Ce,[(0,n.createElementVNode)("div",we,[(0,n.createElementVNode)("div",_e,[(0,n.createElementVNode)("button",{class:"back",onClick:t[0]||(t[0]=e=>(0,n.unref)(y).push(`/${S.value}/request-meeting`))}," Retour "),(0,n.unref)(g)?((0,n.openBlock)(),(0,n.createElementBlock)("h3",Be,(0,n.toDisplayString)((0,n.unref)(g).name),1)):(0,n.createCommentVNode)("",!0)]),x.value?((0,n.openBlock)(),(0,n.createElementBlock)("h3",Re,(0,n.toDisplayString)(x.value),1)):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("form",{onSubmit:(0,n.withModifiers)(R,["prevent"])},[(0,n.createElementVNode)("div",null,[t[12]||(t[12]=(0,n.createElementVNode)("label",{for:"visitor_type"},"Type de visiteur",-1)),t[13]||(t[13]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("select",{name:"visitor_type",id:"visitor_type",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>C.value.visitor_type=e)},[t[11]||(t[11]=(0,n.createElementVNode)("option",{value:"2"},"Temporaire",-1)),(0,n.unref)(N).isAuthenticated()?((0,n.openBlock)(),(0,n.createElementBlock)("option",Se," Permanent ")):(0,n.createCommentVNode)("",!0)],512),[[n.vModelSelect,C.value.visitor_type]])]),(0,n.createElementVNode)("div",null,[t[14]||(t[14]=(0,n.createElementVNode)("label",{for:"firstname"},"Prénom",-1)),t[15]||(t[15]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"firstname","onUpdate:modelValue":t[2]||(t[2]=e=>C.value.firstname=e),required:""},null,512),[[n.vModelText,C.value.firstname]]),t[16]||(t[16]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[17]||(t[17]=(0,n.createElementVNode)("label",{for:"lastname"},"Nom",-1)),t[18]||(t[18]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"lastname","onUpdate:modelValue":t[3]||(t[3]=e=>C.value.lastname=e),required:""},null,512),[[n.vModelText,C.value.lastname]]),t[19]||(t[19]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[20]||(t[20]=(0,n.createElementVNode)("label",{for:"email"},"Email",-1)),t[21]||(t[21]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"email",id:"email","onUpdate:modelValue":t[4]||(t[4]=e=>C.value.email=e),required:""},null,512),[[n.vModelText,C.value.email]]),t[22]||(t[22]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[23]||(t[23]=(0,n.createElementVNode)("label",{for:"id_number"},"Numéro de pièce d’identité",-1)),t[24]||(t[24]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"id_number","onUpdate:modelValue":t[5]||(t[5]=e=>C.value.id_number=e),required:""},null,512),[[n.vModelText,C.value.id_number]]),t[25]||(t[25]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[26]||(t[26]=(0,n.createElementVNode)("label",{for:"file"}," Pièce d’identité",-1)),t[27]||(t[27]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.createElementVNode)("input",{type:"file",id:"file",onChange:t[6]||(t[6]=(...t)=>e.uploadFile&&e.uploadFile(...t))},null,32),t[28]||(t[28]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[29]||(t[29]=(0,n.createElementVNode)("label",{for:"organisation_name"},"Employeur",-1)),t[30]||(t[30]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"organisation_name","onUpdate:modelValue":t[7]||(t[7]=e=>C.value.organisation_name=e),required:""},null,512),[[n.vModelText,C.value.organisation_name]]),t[31]||(t[31]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[32]||(t[32]=(0,n.createElementVNode)("label",{for:"contact"},"Contact",-1)),t[33]||(t[33]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"contact","onUpdate:modelValue":t[8]||(t[8]=e=>C.value.contact=e),required:""},null,512),[[n.vModelText,C.value.contact]]),t[34]||(t[34]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[35]||(t[35]=(0,n.createElementVNode)("label",{for:"address"},"Adresse",-1)),t[36]||(t[36]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"address","onUpdate:modelValue":t[9]||(t[9]=e=>C.value.address=e),required:""},null,512),[[n.vModelText,C.value.address]]),t[37]||(t[37]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[38]||(t[38]=(0,n.createElementVNode)("label",{for:"h-name"},"Nom d’hôte",-1)),t[39]||(t[39]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"h-name",name:"h-name","onUpdate:modelValue":t[10]||(t[10]=e=>w.value.host=e)},null,512),[[n.vModelText,w.value.host]]),t[40]||(t[40]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",xe,[(0,n.createElementVNode)("input",{type:"submit",value:"Soumettre",disabled:B.value},null,8,Me)]),_.value?((0,n.openBlock)(),(0,n.createElementBlock)("p",qe,(0,n.toDisplayString)(_.value),1)):(0,n.createCommentVNode)("",!0)],32)])])])])]))}};const Ie=De;var Le=Ie;const Ue={class:"background-gradi selectcheckintype"},Ae={class:"container"},Te={class:"row align-items-center"},Oe={class:"col col-12 col-md-12 col-sm-12"},$e={class:"popup-logo"},Pe={key:0,class:"selectcheck-all"},je={class:"selectcheckintype-btns"};var Qe={__name:"MenuView",setup(e){const t=(0,s.lq)(),a=(0,n.ref)(t.params.domain||"scb"),o=v(),r=o.isAuthenticated(),c=(0,s.rd)(),u=(0,n.ref)(),i=(0,n.ref)();return i.value=JSON.parse(localStorage.getItem("userInfo")),u.value=i.value?.roles[0],(0,n.onMounted)((()=>{console.log("Rôle actuel :",u.value),console.log("isAuthenticated :",r),r||(console.log("RequestMeeting"),c.push({name:"RequestMeeting",params:{domain:a.value}}))})),(e,t)=>{const c=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",Ue,[(0,n.createElementVNode)("div",Ae,[(0,n.createElementVNode)("div",Te,[(0,n.createElementVNode)("div",Oe,[(0,n.createElementVNode)("div",$e,[(0,n.createVNode)(c,{to:{name:"RequestMeeting",params:{domain:a.value}}},{default:(0,n.withCtx)((()=>t[0]||(t[0]=[(0,n.createElementVNode)("img",{src:l,class:"",alt:"secure-check-logo"},null,-1)]))),_:1},8,["to"])]),(0,n.unref)(r)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Pe,[t[12]||(t[12]=(0,n.createElementVNode)("h5",null,[(0,n.createElementVNode)("span",null,"Veuillez sélectionner")],-1)),(0,n.createElementVNode)("div",je,[(0,n.unref)(o).isEmployee(u.value)||(0,n.unref)(o).isAdmin(u.value)||(0,n.unref)(o).isSuperAdmin(u.value)||(0,n.unref)(o).isUser(u.value)||(0,n.unref)(o).isManager(u.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:0,to:{name:"CreateVisitor",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[1]||(t[1]=[(0,n.createTextVNode)("Meetings")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isEmployee(u.value)||(0,n.unref)(o).isAdmin(u.value)||(0,n.unref)(o).isSupervisor(u.value)||(0,n.unref)(o).isSecureCheck(u.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:1,to:{name:"ListQrcode",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[2]||(t[2]=[(0,n.createTextVNode)("Demandes")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(u.value)||(0,n.unref)(o).isEmployee(u.value)||(0,n.unref)(o).isSupervisor(u.value)||(0,n.unref)(o).isSecureCheck(u.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:2,to:{name:"ManalCheck",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[3]||(t[3]=[(0,n.createTextVNode)("Manual Code")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(u.value)||(0,n.unref)(o).isSupervisor(u.value)||(0,n.unref)(o).isSecureCheck(u.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:3,to:{name:"CreateEvent",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[4]||(t[4]=[(0,n.createTextVNode)(" Créer Event ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(u.value)||(0,n.unref)(o).isSupervisor(u.value)||(0,n.unref)(o).isManager(u.value)||(0,n.unref)(o).isSecureCheck(u.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:4,to:{name:"EventList",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[5]||(t[5]=[(0,n.createTextVNode)(" Liste Event ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(u.value)||(0,n.unref)(o).isSupervisor(u.value)||(0,n.unref)(o).isSecureCheck(u.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:5,to:{name:"ListUser",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[6]||(t[6]=[(0,n.createTextVNode)(" Utilisateurs ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(u.value)||(0,n.unref)(o).isManager(u.value)||(0,n.unref)(o).isSecureCheck(u.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:6,to:{name:"CreateUser",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[7]||(t[7]=[(0,n.createTextVNode)(" + Utilisateurs ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(u.value)||(0,n.unref)(o).isSupervisor(u.value)||(0,n.unref)(o).isManager(u.value)||(0,n.unref)(o).isSecureCheck(u.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:7,to:{name:"CreateCompany",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[8]||(t[8]=[(0,n.createTextVNode)(" + Entreprise ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(u.value)||(0,n.unref)(o).isSupervisor(u.value)||(0,n.unref)(o).isManager(u.value)||(0,n.unref)(o).isSecureCheck(u.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:8,to:{name:"CreateQRCode",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[9]||(t[9]=[(0,n.createTextVNode)(" + Création QRCode ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(u.value)||(0,n.unref)(o).isManager(u.value)||(0,n.unref)(o).isEmployee(u.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:9,to:{name:"Camera",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[10]||(t[10]=[(0,n.createTextVNode)(" QR Code ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(u.value)||(0,n.unref)(o).isSupervisor(u.value)||(0,n.unref)(o).isManager(u.value)||(0,n.unref)(o).isEmployee(u.value)||(0,n.unref)(o).isSecureCheck(u.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:10,to:{name:"DisplayVisitorCode",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[11]||(t[11]=[(0,n.createTextVNode)(" Check Visitors logs ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0)])])):(0,n.createCommentVNode)("",!0)])])])])}}};const Fe=(0,_.A)(Qe,[["__scopeId","data-v-b94861c2"]]);var ze=Fe;const Je={class:"background-gradi request-meeting"},He={class:"container"},We={class:"row align-items-center"},Ye={class:"col col-12 col-md-12 col-sm-12"},Ge={class:"popup-logo"},Ke=["src","alt"],Ze={key:0,class:"request-btn"},Xe={key:1,class:"request-btn"};var et={__name:"RequestMeetingView",setup(e){const t=(0,n.ref)(JSON.parse(localStorage.getItem("userInfo"))||{}),a=v(),o=(0,n.ref)(t?.value?.roles?t.value.roles[0]:""),{showCompany:r,company:c}=u(),i=(0,s.lq)(),m=(0,s.rd)(),{publicDir:f}=d(),E=(e,t)=>{console.info({params:e,valueAdded:t}),p[e]=t},g=(0,n.ref)();return(0,n.onBeforeMount)((async()=>{g.value=i.params.domain||"scb",E("company_slug",g.value),localStorage.setItem("currentCompany",g.value);let e=localStorage.getItem("currentCompany");e?await r(e??g.value):e="",g.value&&m.push({name:"RequestMeeting",params:{domain:g.value}}),localStorage.setItem("roles_list",JSON.stringify(["ROLE_USER","ROLE_EMPLOYEE","ROLE_SUPERVISOR","ROLE_ADMIN","ROLE_SUPER_ADMIN","ROLE_SecureCheck"]))})),(e,t)=>{const r=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",Je,[(0,n.createElementVNode)("div",He,[(0,n.createElementVNode)("div",We,[(0,n.createElementVNode)("div",Ye,[(0,n.createElementVNode)("div",Ge,[e.company_slug||(0,n.unref)(c)?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)(r,{key:0,to:"/"},{default:(0,n.withCtx)((()=>t[0]||(t[0]=[(0,n.createElementVNode)("img",{src:l,alt:"secure-check-logo"},null,-1)]))),_:1})),g.value&&(0,n.unref)(c)?((0,n.openBlock)(),(0,n.createBlock)(r,{key:1,to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{src:`${(0,n.unref)(f)}/logo/${(0,n.unref)(c)?.logo}`,alt:(0,n.unref)(c).slug},null,8,Ke)])),_:1})):(0,n.createCommentVNode)("",!0)]),(0,n.unref)(a).isEmployee(o.value)||(0,n.unref)(a).isAdmin(o.value)||(0,n.unref)(a).isManager(o.value)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ze,[(0,n.createVNode)(r,{to:{name:"CreateVisitor",params:{domain:g.value}}},{default:(0,n.withCtx)((()=>t[1]||(t[1]=[(0,n.createTextVNode)(" Request-meeting ")]))),_:1},8,["to"])])):(0,n.createCommentVNode)("",!0),(0,n.unref)(a).isEmployee(o.value)||(0,n.unref)(a).isAdmin(o.value)||(0,n.unref)(a).isManager(o.value)||(0,n.unref)(a).isSupervisor(o.value)||(0,n.unref)(a).isSecureCheck(o.value)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Xe,[(0,n.createVNode)(r,{to:{name:"Menu",params:{domain:g.value}}},{default:(0,n.withCtx)((()=>t[2]||(t[2]=[(0,n.createTextVNode)("Menu")]))),_:1},8,["to"])])):(0,n.createCommentVNode)("",!0)])])])])}}};const tt=et;var at=tt;function nt(){const e=(0,n.ref)(!1),t=(0,n.ref)(null),a=(0,n.ref)(null),l=async(n,l)=>{e.value=!0,t.value=null;try{const t=await c.put(`/requests/update/${n}`,l);return e.value=!1,a.value=t.data.data.uidn,t.data}catch(o){throw e.value=!1,t.value=o.response?.data?.message||"An error occurred",o}};return{isLoading:e,error:t,updateRequest:l,uidn:a}}const lt={class:"background-gradi request-meeting"},ot={class:"container"},rt={class:"row align-items-center"},ct={class:"col col-12 col-md-12 col-sm-12"},st={key:0,class:"popup-logo"},ut={key:1,class:"popup-logo"},it=["src"],dt={class:"text-center py-2"},mt={key:1},vt={key:2},pt={key:1,class:"text-center"};var ft={__name:"waitingValidationView",setup(e){const t=v(),a=(0,s.lq)(),o=(0,n.ref)(!1),r=(0,n.ref)({status:"",confirmed:""}),{publicDir:c}=d(),{isLoading:u,error:i,uidn:p,updateRequest:f}=nt(),E=(0,s.rd)(),g=()=>{E.push({name:"Menu",params:{domain:N.value,id:a.params.id}})},V=t.isAuthenticated(),h=async e=>{r.value.status=e,r.value.confirmed=e;try{await f(a.params.id,r.value),m.oR.success("Mise à jour éffectué"),o.value=!0}catch(t){console.log(i),console.error("Failed to update request:",t)}},N=(0,n.ref)(a.params.domain||"scb");return(0,n.onMounted)((()=>{N.value&&E.push({name:"WaitingValidation",params:{domain:N.value}})})),(e,t)=>{const a=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",lt,[(0,n.createElementVNode)("div",ot,[(0,n.createElementVNode)("div",rt,[(0,n.createElementVNode)("div",ct,[o.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",st,[(0,n.createVNode)(a,{to:"/"},{default:(0,n.withCtx)((()=>t[3]||(t[3]=[(0,n.createElementVNode)("img",{src:l,class:"",alt:"secure-check-logo"},null,-1)]))),_:1})])),o.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",ut,[(0,n.createVNode)(a,{to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{src:`${(0,n.unref)(c)}/qrcode/qrcode-${(0,n.unref)(p)}.png`,class:"",alt:"secure-check-logo"},null,8,it)])),_:1}),(0,n.createElementVNode)("div",dt,[(0,n.createElementVNode)("h3",null,(0,n.toDisplayString)((0,n.unref)(p)),1)]),(0,n.unref)(V)?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"request-btn",onClick:t[0]||(t[0]=e=>g()),role:"button"},t[4]||(t[4]=[(0,n.createElementVNode)("a",null,"Menu ",-1)]))):((0,n.openBlock)(),(0,n.createElementBlock)("div",mt,t[5]||(t[5]=[(0,n.createElementVNode)("h3",null,"Votre QRCode a été envoyé par e-mail, Merci",-1)])))])):(0,n.createCommentVNode)("",!0),o.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",vt,[t[9]||(t[9]=(0,n.createElementVNode)("h3",{class:"text-center py-3"}," En attente de la confirmation de l'hôte ... ",-1)),(0,n.unref)(u)?((0,n.openBlock)(),(0,n.createElementBlock)("div",pt,t[7]||(t[7]=[(0,n.createElementVNode)("h3",null,"Chargement .....",-1)]))):((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"request-btn",onClick:t[1]||(t[1]=(0,n.withModifiers)((e=>h(1)),["prevent"]))},t[6]||(t[6]=[(0,n.createElementVNode)("a",null,"Valider ",-1)]))),(0,n.createElementVNode)("div",{class:"request-btn-cannel",onClick:t[2]||(t[2]=(0,n.withModifiers)((e=>h(0)),["prevent"]))},t[8]||(t[8]=[(0,n.createElementVNode)("a",null,"Annuler ",-1)]))]))])])])])}}};const Et=(0,_.A)(ft,[["__scopeId","data-v-1ef477a5"]]);var gt=Et;function Vt(){const e=(0,n.ref)([]),t=(0,n.ref)(null),a=(0,n.ref)(!1),l=async()=>{a.value=!0;try{const t=await c.get("/requests/list");e.value=t.data}catch(n){t.value=n.response?n.response.data:"Error fetching data"}finally{a.value=!1}},o=async n=>{a.value=!0;try{const t=await c.get("/requests/list/"+n);console.log({response:t.data}),e.value=t.data}catch(l){t.value=l.response?l.response.data:"Error fetching data"}finally{a.value=!1}};return{requests:e,error:t,loading:a,fetchRequestsByComp:o,fetchRequests:l}}const ht={class:"container"},Nt={class:"d-flex justify-content-center align-items-center"},kt={class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},yt={key:0,class:"mt-3"},bt={key:1,class:"mt-3"},Ct={class:"text-center"},wt={key:0},_t={class:"d-flex justify-content-center py-3"},Bt={key:0};var Rt={__name:"ListQrCodeView",setup(e){const{requests:t,error:a,fetchRequestsByComp:l,fetchRequests:o}=Vt(),r=e=>{const t=new Date(e);return t.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},c=()=>{u.push({name:"Menu",params:{domain:y.value}})},u=(0,s.rd)(),i=(0,s.lq)(),d=(0,n.ref)(1),m=(0,n.ref)(10),p=e=>{u.push({name:"WaitingValidation",params:{domain:y.value,id:e}})},f=(0,n.computed)((()=>{const e=(d.value-1)*m.value,a=e+m.value;return i.params.slug?V.value.slice(e,a):t.value.slice(e,a)})),{showEvent:E,event:g}=Ne(),V=(0,n.computed)((()=>t.value.filter((e=>e.visitor.evenements?.id===g?.value?.id)))),h=(0,n.ref)(JSON.parse(localStorage.getItem("userInfo"))||{}),N=v(),k=(0,n.ref)(h?.value?.roles?h.value.roles[0]:""),y=(0,n.ref)(i.params.domain||"scb");return(0,n.onMounted)((async()=>{i?.params?.slug&&(await E(i?.params?.slug),console.log({requests:t}),console.log({event:g.value})),N.isAdmin(k.value)?await o():await l(y.value),t.value=V.value})),(e,l)=>{const o=(0,n.resolveComponent)("ui-icon"),s=(0,n.resolveComponent)("ui-pagination"),u=(0,n.resolveComponent)("ui-table");return(0,n.openBlock)(),(0,n.createElementBlock)("div",ht,[(0,n.createElementVNode)("div",Nt,[(0,n.createElementVNode)("div",kt,[(0,n.createElementVNode)("button",{class:"back",onClick:l[0]||(l[0]=e=>c())},"Retour"),(0,n.unref)(i)?.params?.slug?((0,n.openBlock)(),(0,n.createElementBlock)("h3",yt,"Liste Participants")):((0,n.openBlock)(),(0,n.createElementBlock)("h3",bt,"Liste des demandes"))])]),(0,n.createElementVNode)("div",Ct,[(0,n.unref)(i)?.params?.slug?((0,n.openBlock)(),(0,n.createElementBlock)("h4",wt,"Evenements : "+(0,n.toDisplayString)((0,n.unref)(g)?.name),1)):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",_t,[(0,n.createVNode)(u,{data:f.value,thead:["Visiteur","Host","Statut","Date Création","Action"],tbody:[{slot:"visitor"},"host",{slot:"confirmed"},{slot:"request_date"},{slot:"actions"}]},{visitor:(0,n.withCtx)((({data:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.visitor.firstname)+" "+(0,n.toDisplayString)(e.visitor.lastname),1)])),request_date:(0,n.withCtx)((({data:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(r(e.request_date)),1)])),confirmed:(0,n.withCtx)((({data:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.confirmed?"Confirmé":"En attente"),1)])),actions:(0,n.withCtx)((({data:e})=>[(0,n.createVNode)(o,{role:"button",onClick:t=>p(e.id)},{default:(0,n.withCtx)((()=>l[2]||(l[2]=[(0,n.createTextVNode)(" edit ")]))),_:2},1032,["onClick"])])),default:(0,n.withCtx)((()=>[(0,n.unref)(i)?.params?.slug?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)(s,{key:0,modelValue:d.value,"onUpdate:modelValue":[l[1]||(l[1]=e=>d.value=e),e.onPage],total:(0,n.unref)(t).length,"show-total":""},null,8,["modelValue","total","onUpdate:modelValue"]))])),_:1},8,["data"])]),(0,n.unref)(a)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Bt,(0,n.toDisplayString)((0,n.unref)(a)),1)):(0,n.createCommentVNode)("",!0)])}}};const St=(0,_.A)(Rt,[["__scopeId","data-v-60912cbc"]]);var xt=St;const Mt={class:"background-gradi request-meeting"},qt={class:"container"},Dt={class:"row align-items-center"},It={class:"col col-12 col-md-12 col-sm-12"},Lt={key:0,class:"popup-logo"},Ut={key:1,class:"popup-logo"},At=["src"],Tt={class:"text-center py-2"},Ot={key:1};var $t={__name:"QrCodeView",setup(e){const t=(0,s.lq)(),a=(0,s.rd)(),o=(0,n.ref)(!1),r=(0,n.ref)(t.params.domain||"scb"),c=()=>{a.push({name:"Menu",params:{domain:r.value}})};return(0,n.onMounted)((()=>{r.value&&a.push({name:"ManalCheck",params:{domain:r.value}})})),(e,t)=>{const a=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",Mt,[(0,n.createElementVNode)("div",qt,[(0,n.createElementVNode)("div",Dt,[(0,n.createElementVNode)("div",It,[o.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",Lt,[(0,n.createVNode)(a,{to:"/"},{default:(0,n.withCtx)((()=>t[1]||(t[1]=[(0,n.createElementVNode)("img",{src:l,class:"",alt:"secure-check-logo"},null,-1)]))),_:1})])),o.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ut,[(0,n.createVNode)(a,{to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{src:`${e.publicDir}/qrcode/qrcode-${e.uidn}.png`,class:"",alt:"secure-check-logo"},null,8,At)])),_:1}),(0,n.createElementVNode)("div",Tt,[(0,n.createElementVNode)("h3",null,(0,n.toDisplayString)(e.uidn),1)]),e.isAuthenticated?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"request-btn",onClick:t[0]||(t[0]=e=>c()),role:"button"},t[2]||(t[2]=[(0,n.createElementVNode)("a",null,"Menu ",-1)]))):((0,n.openBlock)(),(0,n.createElementBlock)("div",Ot,t[3]||(t[3]=[(0,n.createElementVNode)("h3",null,"Votre QRCode a été envoyé par e-mail, Merci",-1)])))])):(0,n.createCommentVNode)("",!0)])])])])}}};const Pt=(0,_.A)($t,[["__scopeId","data-v-91b7bf1c"]]);var jt=Pt;function Qt(){const e=(0,n.ref)(null),t=(0,n.ref)(null),a=(0,n.ref)(null),l=async(n,l)=>{try{const t=await o.A.post("https://www.securecheck.info/api/public/index.php/api/create-qr",{email:n,type:l},{headers:{"Content-Type":"application/json"}});e.value=t.data,a.value=t.status}catch(r){t.value=r.response?r.response.data:r.message,a.value=r.response?r.response.status:null}};return{qrResponse:e,error:t,statusCode:a,createQR:l}}const Ft={class:"background-gradi request-meeting"},zt={class:"container"},Jt={class:"row align-items-center mt-3"},Ht={class:"col col-12 col-md-12 col-sm-12"},Wt={key:0,class:"popup-logo"},Yt={class:"popup-logo"},Gt=["src"],Kt={style:{"margin-top":"40px"}},Zt={class:"submit-button"},Xt=["disabled"],ea={key:2,style:{"margin-top":"40px"}};var ta={__name:"CreateQRCodeView",setup(e){const t=(0,s.lq)(),a=(0,s.rd)(),o=(0,n.ref)(!1),{publicDir:r}=d(),c=(0,n.ref)(),u=(0,n.ref)(),i=(0,n.ref)(),{createQR:v,statusCode:p,qrResponse:f}=Qt(),E=(0,n.ref)(t.params.domain||"scb"),g=()=>{a.push({name:"Menu",params:{domain:E.value}})};(0,n.onMounted)((()=>{E.value&&a.push({name:"CreateQRCode",params:{domain:E.value}})}));const V=async()=>{await v(c.value,u.value)};return(0,n.watch)(p,(e=>{switch(e){case 200:m.oR.success(" QRCode a créé avec succès."),p.value=200,o.value=!0,console.log({qrResponse:f}),i.value=f.value.data.uidn;break;case 201:m.oR.success("QRCode a créé avec succès."),p.value=201,console.log({qrResponse:f}),i.value=f.value.data.uidn;break;case 400:m.oR.info("Bad Request - La requête est mal formée.");break;case 401:m.oR.info("Unauthorized - Vous devez être authentifié.");break;case 403:m.oR.info("Forbidden - Vous n'avez pas la permission.");break;case 404:m.oR.info("L'utilisateur n'existe pas"),p.value=null;break;case 500:m.oR.info("Internal Server Error - Une erreur interne est survenue.");break;default:}})),(e,t)=>{const a=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",Ft,[(0,n.createElementVNode)("div",zt,[(0,n.createElementVNode)("div",Jt,[(0,n.createElementVNode)("div",Ht,[o.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",Wt,[(0,n.createVNode)(a,{to:"/"},{default:(0,n.withCtx)((()=>t[3]||(t[3]=[(0,n.createElementVNode)("img",{src:l,class:"",alt:"secure-check-logo"},null,-1)]))),_:1})])),(0,n.createElementVNode)("div",Yt,[o.value?((0,n.openBlock)(),(0,n.createBlock)(a,{key:0,to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{src:`${(0,n.unref)(r)}/qrcode-user/qrcode-${i.value}.png`,class:"",alt:"qr"},null,8,Gt)])),_:1})):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("form",{onSubmit:(0,n.withModifiers)(V,["prevent"]),class:"mt-5"},[(0,n.createElementVNode)("div",null,[t[4]||(t[4]=(0,n.createElementVNode)("label",{for:"contact"},"Email",-1)),t[5]||(t[5]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"contact","onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),class:"input_style"},null,512),[[n.vModelText,c.value]]),t[6]||(t[6]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[8]||(t[8]=(0,n.createElementVNode)("label",{for:"type_qr"},"Type de QR",-1)),t[9]||(t[9]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e),id:"type_qr",name:"type_qr",class:"input_style"},t[7]||(t[7]=[(0,n.createElementVNode)("option",{value:"permanent"},"Permanent",-1),(0,n.createElementVNode)("option",{value:"temporaire"},"Temporaire",-1)]),512),[[n.vModelSelect,u.value]]),t[10]||(t[10]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",Kt,[(0,n.createElementVNode)("div",Zt,[(0,n.createElementVNode)("input",{type:"submit",value:"Soumettre",disabled:e.loading},null,8,Xt)])])],32),e.isAuthenticated?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:1,class:"request-btn",onClick:t[2]||(t[2]=e=>g()),role:"button"},t[11]||(t[11]=[(0,n.createElementVNode)("a",null,"Menu ",-1)]))):(0,n.createCommentVNode)("",!0),o.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",ea,t[12]||(t[12]=[(0,n.createElementVNode)("h3",null,"Le QRCode a été envoyé par e-mail, Merci",-1)]))):(0,n.createCommentVNode)("",!0)])])])])])}}};const aa=(0,_.A)(ta,[["__scopeId","data-v-26f27f4b"]]);var na=aa;const la=()=>{const e=(0,s.rd)(),t=(t,a)=>{e.push(`/${a}/${t}`)};return{goToRoute:t}};function oa(){const e=(0,n.ref)(null),t=(0,n.ref)(""),a=(0,n.ref)(!1),l=(0,n.ref)(null),{baseUrl_:r}=d(),c=(0,s.rd)(),u=async(n,s)=>{if(""==n||null==n||"undefined"==typeof n)return m.oR.info("Veuillez renseigner le UIDN champ svp"),!1;a.value=!0;try{let a=r;const l=await o.A.get(`${a}/get-qr-data/${n}`,{params:{type:s}});e.value=l.data.status,t.value=l.data.message,"success"===e.value?(console.log("Succès:",t.value),m.oR.success(t.value),console.log(c)):(e.value,m.oR.error(t.value))}catch(u){l.value="Erreur lors de la vérification du QR code",console.error("API Error:",u),m.oR.error(u.response.data.message)}finally{a.value=!1}};return{status:e,message:t,loading:a,error:l,getQrData:u}}const ra={class:"background-gradi request-meeting"},ca={class:"container"},sa={class:"row align-items-center"},ua={class:"col col-12 col-md-12 col-sm-12"},ia={key:0,class:"popup-logo"},da={key:1,class:"popup-logo"},ma={key:2};var va={__name:"ManalCheckView",setup(e){const t=(0,s.lq)(),a=(0,s.rd)(),o=(0,n.ref)(!1),{goToRoute:r}=la(),{getQrData:c,status:u}=oa(),i=(0,n.ref)(),d=async()=>{try{await c(i.value,1),o.value=200==u.value,console.log(t)}catch(e){console.error("Failed to update request:",e)}},m=(0,n.ref)(t.params.domain||"scb"),v=()=>{a.push({name:"Menu",params:{domain:m.value}})};return(0,n.onMounted)((()=>{m.value&&a.push({name:"ManalCheck",params:{domain:m.value}})})),(e,t)=>{const a=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",ra,[(0,n.createElementVNode)("div",ca,[(0,n.createElementVNode)("div",sa,[(0,n.createElementVNode)("div",ua,[o.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",ia,[(0,n.createVNode)(a,{to:"/"},{default:(0,n.withCtx)((()=>t[4]||(t[4]=[(0,n.createElementVNode)("img",{src:l,class:"",alt:"secure-check-logo"},null,-1)]))),_:1})])),o.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",da,[t[6]||(t[6]=(0,n.createElementVNode)("div",{class:"text-center py-2"},[(0,n.createElementVNode)("h3",null,"Bien éffectué")],-1)),(0,n.createElementVNode)("div",{class:"request-btn",onClick:t[0]||(t[0]=e=>(0,n.unref)(r)("/"))},t[5]||(t[5]=[(0,n.createElementVNode)("a",null,"Accueil ",-1)]))])):(0,n.createCommentVNode)("",!0),o.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",ma,[(0,n.createElementVNode)("div",{class:"d-flex justify-content-center align-items-center"},[(0,n.createElementVNode)("div",{class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},[(0,n.createElementVNode)("button",{class:"back",onClick:v}," Retour "),t[7]||(t[7]=(0,n.createElementVNode)("h3",{class:"text-center py-3"},"Validation Manuelle UIDN",-1))])]),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",name:"uidn",id:"uidn",class:"uidn","onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),placeholder:"ENTREZ UUID",required:""},null,512),[[n.vModelText,i.value]]),e.isLoading?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"request-btn",onClick:t[2]||(t[2]=(0,n.withModifiers)((e=>d()),["prevent"]))},t[8]||(t[8]=[(0,n.createElementVNode)("a",{role:"button"},"Valider ",-1)]))),(0,n.createElementVNode)("div",{class:"request-btn",onClick:t[3]||(t[3]=e=>v())},t[9]||(t[9]=[(0,n.createElementVNode)("a",{role:"button"},"Menu ",-1)]))]))])])])])}}};const pa=(0,_.A)(va,[["__scopeId","data-v-3ecb0c0c"]]);var fa=pa;function Ea(){const e=(0,n.ref)([]),t=(0,n.ref)(!1),a=(0,n.ref)(null),l=async()=>{t.value=!0,a.value=null;try{const t=await c.get("/user/list");e.value=t.data,console.log()}catch(n){a.value="Erreur lors de la récupération des utilisateurs."}finally{t.value=!1}},o=async n=>{t.value=!0,a.value=null;try{const t=await c.get("/user/list/"+n);e.value=t.data,console.log()}catch(l){a.value="Erreur lors de la récupération des utilisateurs."}finally{t.value=!1}};return{users:e,loading:t,error:a,fetchUsers:l,fetchUsersComp:o}}const ga={class:"container"},Va={class:"d-flex justify-content-center py-3"},ha={key:0},Na={key:1};var ka={__name:"ListUserView",setup(e){const{fetchUsers:t,fetchUsersComp:a,users:l,loading:o,error:r}=Ea(),c=(0,s.rd)(),u=e=>{const t=new Date(e);return t.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})},i=(0,n.ref)(["ID","Nom","Email"]),d=(0,n.ref)(["id","name","email"]),m=(0,s.lq)(),p=(0,n.ref)(m.params.domain||"scb"),f=()=>{c.push({name:"Menu",params:{domain:p.value}})},E=(0,n.ref)(JSON.parse(localStorage.getItem("userInfo"))||{}),g=v(),V=(0,n.ref)(E?.value?.roles?E.value.roles[0]:"");return(0,n.onMounted)((async()=>{g.isAdmin(V.value)?await t():await a(p.value)})),(e,t)=>{const a=(0,n.resolveComponent)("ui-table");return(0,n.openBlock)(),(0,n.createElementBlock)("div",ga,[(0,n.createElementVNode)("div",{class:"d-flex justify-content-center align-items-center"},[(0,n.createElementVNode)("div",{class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},[(0,n.createElementVNode)("button",{class:"back",onClick:f},"Retour"),t[0]||(t[0]=(0,n.createElementVNode)("h3",{class:"text-center"},"Liste des Utilisateurs",-1))])]),(0,n.createElementVNode)("div",Va,[(0,n.createVNode)(a,{data:(0,n.unref)(l),thead:i.value,tbody:d.value},{create_at:(0,n.withCtx)((({row:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(u(e?.create_at)),1)])),_:1},8,["data","thead","tbody"])]),(0,n.unref)(o)?((0,n.openBlock)(),(0,n.createElementBlock)("div",ha,"Chargement des utilisateurs...")):(0,n.createCommentVNode)("",!0),(0,n.unref)(r)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Na,(0,n.toDisplayString)((0,n.unref)(r)),1)):(0,n.createCommentVNode)("",!0)])}}};const ya=(0,_.A)(ka,[["__scopeId","data-v-50082166"]]);var ba=ya;const Ca={class:"request-meeting"},wa={class:"background-gradi"},_a={class:"request-meeting meeting-form"},Ba={class:"row align-items-center"},Ra={class:"col col-12 col-md-12 col-sm-12"},Sa={key:0,class:"d-flex justify-content-center"},xa=["src"],Ma=["value"],qa={class:"submit-button"},Da=["disabled"],Ia={key:0,class:"error"};var La={__name:"EventView",setup(e){const{company:t}=d(),{showCompany:a,companies:l,fetchCompanies:o}=u(),r=(0,n.ref)(""),c=(0,n.ref)(),i=JSON.parse(localStorage.getItem("userInfo")),p=(0,n.ref)();p.value=i,c.value=p.value?.roles[0];const f=i.company??"",{createEvent:E,statusCode:g}=Ne(),{publicDir:V}=d(),h=v(),N=h.isAuthenticated(),k=(0,s.rd)(),y=(0,s.lq)(),b=(0,n.ref)(!1),C=(0,n.ref)(y.params.domain||"scb"),w=()=>{k.push({name:"Menu",params:{domain:C.value}})};(0,n.onMounted)((async()=>{await o()}));const _=(0,n.ref)({company_id:"",name:"",location:"",date_event:"",time_event:"14:30",departement_id:1}),B=async()=>{b.value=!0;try{await E(_.value)}catch(e){r.value=`Erreur: ${e.message}`}finally{b.value=!1}};return(0,n.onBeforeMount)((async()=>{try{let e=localStorage.getItem("currentCompany")??C?.value;console.log("Retrieved company_slug:",e),e?(console.log("Calling showCompany with:",e),await a(e)):(console.log("No company_slug found, setting company_slug to empty string."),e=""),N||(m.oR.info("L'utilisateur doit être connecté"),setTimeout((()=>{k.push({name:"RequestMeeting",params:{domain:C?.value}})}),1500))}catch(e){console.error("Error occurred during onBeforeMount:",e),m.oR.error("Erreur lors du chargement des données.")}})),(0,n.watch)(g,(e=>{switch(e){case 201:case 200:m.oR.success("Evénements ajouté"),setTimeout((()=>k.push({name:"Menu",params:{domain:C.value}})),1500);break;case 400:m.oR.info("La requête est mal formée.");break;case 401:m.oR.info("Vous devez être authentifié.");break;case 403:m.oR.info("Vous n'avez pas la permission.");break;case 404:m.oR.info("La ressource demandée n'existe pas.");break;case 500:m.oR.info("Une erreur interne est survenue.");break;default:m.oR.info(`Code : ${e}`)}})),(e,a)=>((0,n.openBlock)(),(0,n.createElementBlock)("section",Ca,[(0,n.createElementVNode)("div",wa,[(0,n.createElementVNode)("section",_a,[(0,n.createElementVNode)("div",Ba,[(0,n.createElementVNode)("div",Ra,[(0,n.createElementVNode)("div",{class:"d-flex justify-content-center align-items-center"},[(0,n.createElementVNode)("div",{class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},[(0,n.createElementVNode)("button",{class:"back",onClick:w},"Retour"),a[7]||(a[7]=(0,n.createElementVNode)("h3",{class:"mt-3"},"Création Évènement",-1))])]),(0,n.unref)(t)?.logo?((0,n.openBlock)(),(0,n.createElementBlock)("div",Sa,[(0,n.createElementVNode)("img",{src:`${(0,n.unref)(V)}/logo/${(0,n.unref)(t)?.logo}`,height:"100",width:"100"},null,8,xa)])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("form",{onSubmit:(0,n.withModifiers)(B,["prevent"])},[(0,n.createElementVNode)("div",null,[a[8]||(a[8]=(0,n.createElementVNode)("label",{for:"company_id"},"Entreprise",-1)),a[9]||(a[9]=(0,n.createElementVNode)("br",null,null,-1)),"ROLE_SUPERVISOR"===c.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("input",{key:0,disabled:"",type:"text",id:"name","onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.isRef)(f)?f.value=e:null),required:""},null,512)),[[n.vModelText,(0,n.unref)(f)]]):(0,n.createCommentVNode)("",!0),a[10]||(a[10]=(0,n.createElementVNode)("br",null,null,-1)),"ROLE_SUPERVISOR"!==c.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("select",{key:1,id:"company_id","onUpdate:modelValue":a[1]||(a[1]=e=>_.value.company_id=e),class:"form-control"},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(l),(e=>((0,n.openBlock)(),(0,n.createElementBlock)("option",{key:e.id,value:e.id},(0,n.toDisplayString)(e.name),9,Ma)))),128))],512)),[[n.vModelSelect,_.value.company_id]]):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",null,[a[11]||(a[11]=(0,n.createElementVNode)("label",{for:"name"},"Nom de l'événement",-1)),a[12]||(a[12]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"name","onUpdate:modelValue":a[2]||(a[2]=e=>_.value.name=e),placeholder:"Diner Gala SIKIHHK",required:""},null,512),[[n.vModelText,_.value.name]]),a[13]||(a[13]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[a[14]||(a[14]=(0,n.createElementVNode)("label",{for:"location"},"Lieu de l'événement",-1)),a[15]||(a[15]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"location","onUpdate:modelValue":a[3]||(a[3]=e=>_.value.location=e),placeholder:"SOCOCE",required:""},null,512),[[n.vModelText,_.value.location]]),a[16]||(a[16]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[a[17]||(a[17]=(0,n.createElementVNode)("label",{for:"address_name"},"Adresse",-1)),a[18]||(a[18]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"address_name","onUpdate:modelValue":a[4]||(a[4]=e=>_.value.address_name=e),placeholder:"Marcory",required:""},null,512),[[n.vModelText,_.value.address_name]]),a[19]||(a[19]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[a[20]||(a[20]=(0,n.createElementVNode)("label",{for:"date_event"},"Date de l'événement",-1)),a[21]||(a[21]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"date",id:"date_event","onUpdate:modelValue":a[5]||(a[5]=e=>_.value.date_event=e),placeholder:"2024-10-08",required:""},null,512),[[n.vModelText,_.value.date_event]]),a[22]||(a[22]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[a[23]||(a[23]=(0,n.createElementVNode)("label",{for:"time_event"},"Heure de l'événement",-1)),a[24]||(a[24]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"time",id:"time_event","onUpdate:modelValue":a[6]||(a[6]=e=>_.value.time_event=e),required:""},null,512),[[n.vModelText,_.value.time_event]]),a[25]||(a[25]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",qa,[(0,n.createElementVNode)("input",{type:"submit",value:"Soumettre",disabled:b.value},null,8,Da)]),r.value?((0,n.openBlock)(),(0,n.createElementBlock)("p",Ia,(0,n.toDisplayString)(r.value),1)):(0,n.createCommentVNode)("",!0)],32)])])])])]))}};const Ua=La;var Aa=Ua;const Ta=()=>{const e=e=>{const t=new Date(e);return t.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},t=e=>{const t=new Date(e);return t.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})},a=e=>{const t=new Date(e),a=t.getHours().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");return`${a}:${n}`};return{formatDate:t,formatDateHour:e,formatTime:a}};function Oa(){const e=(0,n.ref)([]),t=(0,n.ref)(!1),a=(0,n.ref)(null),l=async()=>{t.value=!0,a.value=null;try{const t=await c.get("/evenement/list");e.value=t.data,console.log()}catch(n){a.value="Erreur lors de la récupération des events."}finally{t.value=!1}},o=async n=>{t.value=!0,a.value=null;try{const t=await c.get("/evenement/list/"+n);e.value=t.data,console.log()}catch(l){a.value="Erreur lors de la récupération des utilisateurs."}finally{t.value=!1}};return{events:e,loading:t,error:a,fetchEvents:l,fetchEventsByComp:o}}const $a={class:"container"},Pa={class:"d-flex justify-content-center align-items-center"},ja={class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},Qa={key:0},Fa={class:"d-flex justify-content-center"},za={class:"d-flex justify-content-center"},Ja={key:1,class:"d-flex justify-content-center py-3"},Ha=["onClick","src","alt"],Wa={key:1},Ya={key:2,class:"d-flex justify-content-center"},Ga={key:3,class:"d-flex justify-content-center"};var Ka={__name:"EventListView",setup(e){const{events:t,loading:a,error:l,fetchEventsByComp:o,fetchEvents:r}=Oa(),{formatDate:c,formatTime:u}=Ta(),{publicDir:i}=d(),p=(0,n.ref)(["ID","Entreprise","Nom","Lieu","Date","Heure","Département","Date de Création","Lien","Participants","QRCode"]),f=(0,n.ref)(["id",{slot:"company"},"name","location",{slot:"date_event"},{slot:"time_event"},{slot:"departement"},{slot:"created_at"},{slot:"link"},{slot:"participants"},{slot:"QRCode"}]),E=(0,n.ref)([]),g=(0,n.ref)(!1),V=(0,s.rd)(),h=(0,s.lq)(),N=(0,n.ref)(h.params.domain||"scb"),k=e=>{V.push({name:"ListQrcodeEvents",params:{domain:N.value,slug:e}})},y=e=>{console.log({domain:N.value,slug:e}),V.push({name:"ShowEventQRcode",params:{domain:N.value,slug:e}})},b=e=>{const t=(0,n.ref)(!1);let a={NODE_ENV:"production",VUE_APP_API_URL:"https://www.securecheck.info/api/public/index.php/api",BASE_URL:"/"}.FRONT_URL??window.location.host,l=`${a}/company/${e.company.slug}/event/${e.slug}`;navigator.clipboard.writeText(l).then((()=>{t.value=!0,m.oR.info("Texte Copié"),setTimeout((()=>{t.value=!1}),2e3)})).catch((e=>{console.error("Échec de la copie : ",e)}))},C=()=>{V.push({name:"Menu",params:{domain:N.value}})},w=(0,n.ref)(JSON.parse(localStorage.getItem("userInfo"))||{}),_=v(),B=(0,n.ref)(w?.value?.roles?w.value.roles[0]:"");return(0,n.onMounted)((()=>{_.isAdmin(B.value)||_.isSecureCheck(B.value)?r():o(N.value),N.value&&V.push({name:"EventList",params:{domain:N.value}})})),(e,o)=>{const r=(0,n.resolveComponent)("ui-item-text-content"),s=(0,n.resolveComponent)("ui-item"),d=(0,n.resolveComponent)("ui-list"),m=(0,n.resolveComponent)("ui-icon"),v=(0,n.resolveComponent)("ui-table");return(0,n.openBlock)(),(0,n.createElementBlock)("div",$a,[(0,n.createElementVNode)("div",Pa,[(0,n.createElementVNode)("div",ja,[(0,n.createElementVNode)("button",{class:"back",onClick:o[0]||(o[0]=e=>C())},"Retour"),o[2]||(o[2]=(0,n.createElementVNode)("h3",{class:"text-center"},"Liste des Evenements",-1))])]),g.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",Qa,[(0,n.createElementVNode)("div",Fa,[(0,n.createVNode)(d,null,{default:(0,n.withCtx)((()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(E.value,(e=>((0,n.openBlock)(),(0,n.createBlock)(s,{key:e},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(r,null,{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.email),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})]),(0,n.createElementVNode)("div",za,[(0,n.createElementVNode)("a",{class:"request-btn",onClick:o[1]||(o[1]=(...t)=>e.retour&&e.retour(...t)),role:"button"}," Retour ")])])):(0,n.createCommentVNode)("",!0),g.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",Ja,[(0,n.createVNode)(v,{data:(0,n.unref)(t),thead:p.value,tbody:f.value},{departement:(0,n.withCtx)((({data:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.departement.name),1)])),date_event:(0,n.withCtx)((({data:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(c)(e.date_event)),1)])),time_event:(0,n.withCtx)((({data:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(u)(e.time_event)),1)])),company:(0,n.withCtx)((({data:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.company.name),1)])),created_at:(0,n.withCtx)((({data:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(c)(e.created_at)),1)])),link:(0,n.withCtx)((({data:e})=>[(0,n.createVNode)(m,{role:"button",onClick:t=>b(e)},{default:(0,n.withCtx)((()=>o[3]||(o[3]=[(0,n.createTextVNode)(" content_copy ")]))),_:2},1032,["onClick"])])),participants:(0,n.withCtx)((({data:e})=>[(0,n.createVNode)(m,{role:"button",onClick:t=>k(e.slug)},{default:(0,n.withCtx)((()=>o[4]||(o[4]=[(0,n.createTextVNode)(" groups ")]))),_:2},1032,["onClick"])])),QRCode:(0,n.withCtx)((({data:e})=>[e?.slug?((0,n.openBlock)(),(0,n.createElementBlock)("img",{key:0,role:"button",onClick:t=>y(e?.slug),src:`${(0,n.unref)(i)}/qrcode-link/qrcode-${e?.slug}.png`,class:"",height:"50",width:"50",style:{"margin-top":"20px","margin-bottom":"20px"},alt:e.slug},null,8,Ha)):((0,n.openBlock)(),(0,n.createElementBlock)("p",Wa,"Pas de QRcode"))])),_:1},8,["data","thead","tbody"])])),(0,n.unref)(a)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ya," Chargement des évènements... ")):(0,n.createCommentVNode)("",!0),(0,n.unref)(l)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ga,(0,n.toDisplayString)((0,n.unref)(l)),1)):(0,n.createCommentVNode)("",!0)])}}};const Za=(0,_.A)(Ka,[["__scopeId","data-v-200b8593"]]);var Xa=Za,en=a.p+"img/success-svgrepo-com.e963a910.svg";const tn={class:"background-gradi request-meeting"},an={class:"container"},nn={class:"row align-items-center"},ln={class:"col col-12 col-md-12 col-sm-12"},on={class:"popup-logo"},rn=["alt"];var cn={__name:"SuccessCheckoutView",setup(e){const{publicDir:t}=d(),a=(0,s.lq)(),l=(0,s.rd)();return(0,n.onMounted)((()=>{a.params.uidn?m.oR.info("Bien joué"):l.push("/")})),(e,a)=>{const l=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",tn,[(0,n.createElementVNode)("div",an,[(0,n.createElementVNode)("div",nn,[(0,n.createElementVNode)("div",ln,[(0,n.createElementVNode)("div",on,[(0,n.createVNode)(l,{to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{src:en,class:"",alt:`${(0,n.unref)(t)}/qrcode/qrcode-${e.uidn}.png`},null,8,rn)])),_:1}),a[0]||(a[0]=(0,n.createElementVNode)("div",{class:"text-center py-2"},[(0,n.createElementVNode)("h3",null,"CheckOut éffectué")],-1))])])])])])}}};const sn=(0,_.A)(cn,[["__scopeId","data-v-036fb276"]]);var un=sn;const dn={class:"background-gradi request-meeting"},mn={class:"container"},vn={class:"row align-items-center"},pn={class:"col col-12 col-md-12 col-sm-12"},fn={class:"popup-logo"},En=["alt"];var gn={__name:"SuccessCheckinView",setup(e){const{publicDir:t}=d(),a=(0,s.lq)(),l=(0,s.rd)();return(0,n.onMounted)((()=>{a.params.uidn?m.oR.info("Bien joué"):l.push("/")})),(e,a)=>{const l=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",dn,[(0,n.createElementVNode)("div",mn,[(0,n.createElementVNode)("div",vn,[(0,n.createElementVNode)("div",pn,[(0,n.createElementVNode)("div",fn,[(0,n.createVNode)(l,{to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{src:en,class:"",alt:`${(0,n.unref)(t)}/qrcode/qrcode-${e.uidn}.png`},null,8,En)])),_:1}),a[0]||(a[0]=(0,n.createElementVNode)("div",{class:"text-center py-2"},[(0,n.createElementVNode)("h3",null,"CheckIn éffectué")],-1))])])])])])}}};const Vn=(0,_.A)(gn,[["__scopeId","data-v-24684a47"]]);var hn=Vn;const Nn={class:"request-meeting"},kn={class:"background-gradi"},yn={class:"request-meeting meeting-form"},bn={class:"row align-items-center"},Cn={class:"col col-12 col-md-12 col-sm-12"},wn={key:0,class:"submit-button"},_n=["disabled"],Bn={key:1,class:"error"};var Rn={__name:"CreateCompanyView",setup(e){const t=(0,n.ref)(),a=(0,n.ref)();a.value=JSON.parse(localStorage.getItem("userInfo")),t.value=a.value?.roles[0];const{userInfo:l,fetchUserInfo:o}=Ve(),{postCompany:r,showCompany:c,company:i,statusCode:d}=u(),p=v(),f=p.isAuthenticated(),E=(0,s.rd)(),g=(0,n.ref)(),V=(0,n.ref)(""),h=(0,n.ref)({name:"",description:""}),N=e=>{const t=e.target.files[0];t?(h.value.logo=t,g.value=t.name):V.value="Veuillez selectionnez un fichier valide"},k=(0,n.ref)(!1),y=async()=>{try{await r(h.value),console.log(i)}catch(e){V.value=`Erreur: ${e.message}`}finally{k.value=!1}};(0,n.watch)(d,(e=>{switch(e){case 201:m.oR.success("Entreprise créé avec succès."),setTimeout((()=>{E.push("/menu")}),1500);break;case 200:m.oR.success("Entreprise créé avec succès."),setTimeout((()=>{E.push("/menu")}),1500);break;case 400:m.oR.info("La requête est mal formée.");break;case 401:m.oR.info("Vous devez être authentifié."),setTimeout((()=>{E.push("/")}),1500);break;case 403:m.oR.info("Vous n'avez pas la permission.");break;case 404:m.oR.info("La ressource demandée n'existe pas.");break;case 500:m.oR.info("Une erreur interne est survenue.");break;default:m.oR.info(`Code : ${e}`)}}));const b=(0,s.lq)(),C=(0,n.ref)(b.params.domain||"scb"),w=()=>{E.push({name:"Menu",params:{domain:C.value}})};return(0,n.onBeforeMount)((async()=>{b?.params?.company_edit&&c(b.params.slug),await o(),console.log({userInfo:l})})),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("section",Nn,[(0,n.createElementVNode)("div",kn,[(0,n.createElementVNode)("section",yn,[(0,n.createElementVNode)("div",bn,[(0,n.createElementVNode)("div",Cn,[(0,n.createElementVNode)("div",{class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},[(0,n.createElementVNode)("button",{class:"back",onClick:w},"Retour"),t[2]||(t[2]=(0,n.createElementVNode)("h3",null,"Création Entreprise",-1))]),(0,n.createElementVNode)("form",{onSubmit:(0,n.withModifiers)(y,["prevent"]),enctype:"multipart/form-data"},[(0,n.createElementVNode)("div",null,[t[3]||(t[3]=(0,n.createElementVNode)("label",{for:"logo"},"Logo",-1)),t[4]||(t[4]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.createElementVNode)("input",{type:"file",id:"logo",onChange:N,required:"",class:(0,n.normalizeClass)({error:V.value})},null,34),t[5]||(t[5]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[6]||(t[6]=(0,n.createElementVNode)("label",{for:"name"},"Nom",-1)),t[7]||(t[7]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>h.value.name=e),required:""},null,512),[[n.vModelText,h.value.name]]),t[8]||(t[8]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[9]||(t[9]=(0,n.createElementVNode)("label",{for:"description"},"Description ",-1)),t[10]||(t[10]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"description",id:"description","onUpdate:modelValue":t[1]||(t[1]=e=>h.value.description=e),required:""},null,512),[[n.vModelText,h.value.description]]),t[11]||(t[11]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.unref)(f)?((0,n.openBlock)(),(0,n.createElementBlock)("div",wn,[(0,n.createElementVNode)("input",{type:"submit",value:"Soumettre",disabled:k.value},null,8,_n)])):(0,n.createCommentVNode)("",!0),V.value?((0,n.openBlock)(),(0,n.createElementBlock)("p",Bn,(0,n.toDisplayString)(V.value),1)):(0,n.createCommentVNode)("",!0)],32)])])])])]))}};const Sn=(0,_.A)(Rn,[["__scopeId","data-v-5bf10c9a"]]);var xn=Sn;const Mn={class:"request-meeting"},qn={class:"background-gradi"},Dn={class:"request-meeting meeting-form"},In={class:"row align-items-center"},Ln={class:"col col-12 col-md-12 col-sm-12"},Un={key:0,class:"submit-button"},An=["disabled"],Tn={key:1,class:"error"};var On={__name:"EditCompanyView",setup(e){const t=(0,n.ref)(),a=(0,n.ref)();a.value=JSON.parse(localStorage.getItem("userInfo")),t.value=a.value?.roles[0];const{userInfo:l,fetchUserInfo:o}=Ve(),{showCompany:r,updateCompany:c,company:i,statusCode:d}=u(),p=v(),f=p.isAuthenticated(),E=(0,s.rd)(),g=(0,n.ref)(),V=(0,n.ref)(""),h=(0,n.ref)({id:"",name:"",description:""}),N=e=>{const t=e.target.files[0];t?(h.value.logo=t,g.value=t.name):V.value="Veuillez selectionnez un fichier valide"},k=(0,n.ref)(!1),y=async()=>{try{await c(h.value,h.value.id)}catch(e){V.value=`Erreur: ${e.message}`}finally{k.value=!1}};(0,n.watch)(d,(e=>{switch(e){case 201:m.oR.success("Mise à jour éffectué."),setTimeout((()=>{E.push("/menu")}),1500);break;case 200:m.oR.success("Mise à jour éffectué."),setTimeout((()=>{E.push("/menu")}),1500);break;case 400:m.oR.info("La requête est mal formée.");break;case 401:m.oR.info("Vous devez être authentifié."),setTimeout((()=>{E.push("/")}),1500);break;case 403:m.oR.info("Vous n'avez pas la permission.");break;case 404:m.oR.info("La ressource demandée n'existe pas.");break;case 500:m.oR.info("Une erreur interne est survenue.");break;default:m.oR.info(`Code : ${e}`)}}));const b=(0,s.lq)(),C=(0,n.ref)(b.params.domain||"scb"),w=()=>{E.push({name:"Menu",params:{domain:C.value}})};return(0,n.onBeforeMount)((async()=>{b?.params?.company_edit&&(await r(C.value),h.value=i.value),await o(),console.log({userInfo:l})})),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("section",Mn,[(0,n.createElementVNode)("div",qn,[(0,n.createElementVNode)("section",Dn,[(0,n.createElementVNode)("div",In,[(0,n.createElementVNode)("div",Ln,[(0,n.createElementVNode)("div",{class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},[(0,n.createElementVNode)("button",{class:"back",onClick:w},"Retour"),t[2]||(t[2]=(0,n.createElementVNode)("h3",null,"Editer Entreprise",-1))]),(0,n.createElementVNode)("form",{onSubmit:(0,n.withModifiers)(y,["prevent"]),enctype:"multipart/form-data"},[(0,n.createElementVNode)("div",null,[t[3]||(t[3]=(0,n.createElementVNode)("label",{for:"logo"},"Logo",-1)),t[4]||(t[4]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.createElementVNode)("input",{type:"file",id:"logo",onChange:N,class:(0,n.normalizeClass)({error:V.value})},null,34),t[5]||(t[5]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[6]||(t[6]=(0,n.createElementVNode)("label",{for:"name"},"Nom",-1)),t[7]||(t[7]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>h.value.name=e),required:""},null,512),[[n.vModelText,h.value.name]]),t[8]||(t[8]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[9]||(t[9]=(0,n.createElementVNode)("label",{for:"description"},"Description ",-1)),t[10]||(t[10]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"description",id:"description","onUpdate:modelValue":t[1]||(t[1]=e=>h.value.description=e),required:""},null,512),[[n.vModelText,h.value.description]]),t[11]||(t[11]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.unref)(f)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Un,[(0,n.createElementVNode)("input",{type:"submit",value:"Soumettre",disabled:k.value},null,8,An)])):(0,n.createCommentVNode)("",!0),V.value?((0,n.openBlock)(),(0,n.createElementBlock)("p",Tn,(0,n.toDisplayString)(V.value),1)):(0,n.createCommentVNode)("",!0)],32)])])])])]))}};const $n=(0,_.A)(On,[["__scopeId","data-v-dc5a3754"]]);var Pn=$n,jn=a(7687),Qn=a.n(jn);const Fn={class:"background-gradi request-meeting"},zn={class:"container"},Jn={class:"row align-items-center"},Hn={class:"popup-logo"},Wn=["src","alt"],Yn=["src","alt"],Gn={class:"text-center py-2"},Kn={class:"event-details"},Zn={class:"event-title"},Xn={class:"event-title"},el={class:"event-title"},tl={class:"event-title"},al=["src"];var nl={__name:"ShowEventQRcodeView",setup(e){const t=v(),a=(0,s.lq)(),{showEvent:l,event:o}=Ne(),{company:r,showCompany:c}=u(),{publicDir:i}=d(),m=(0,s.rd)(),p=()=>{m.push({name:"Menu",params:{domain:k.value,id:a.params.id}})},f=(0,n.ref)(null),E=(0,n.ref)(null),g=()=>{if(f.value){const e=f.value.querySelectorAll("img"),t=Array.from(e).map((e=>new Promise((t=>{e.complete?t():(e.onload=t,e.onerror=t)}))));Promise.all(t).then((()=>{Qn()(f.value,{useCORS:!0}).then((e=>{const t=e.toDataURL("image/png");E.value=t;const a=document.createElement("a");a.href=t,a.download=`event-${k.value}.png`,document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}))}},{formatDate:V,formatTime:h}=Ta(),N=t.isAuthenticated(),k=(0,n.ref)(a.params.domain||"scb");return(0,n.onMounted)((()=>{l(a.params.slug),c(k.value),k.value&&m.push({name:"ShowEventQRcode",params:{domain:k.value,slug:a.params.slug}})})),(e,t)=>{const l=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",Fn,[(0,n.createElementVNode)("div",zn,[(0,n.createElementVNode)("div",Jn,[(0,n.createElementVNode)("div",{class:"col col-12 col-md-12 col-sm-12 event-details",ref_key:"capture",ref:f},[(0,n.createElementVNode)("div",Hn,[(0,n.createElementVNode)("div",null,[(0,n.unref)(r)&&"scb"!=k.value?((0,n.openBlock)(),(0,n.createBlock)(l,{key:0,to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{class:"logo_qr",src:`${(0,n.unref)(i)}/logo/${(0,n.unref)(r)?.logo}`,alt:`${(0,n.unref)(i)}/logo/${(0,n.unref)(r)?.logo}`},null,8,Wn)])),_:1})):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",null,[(0,n.createVNode)(l,{to:`/${(0,n.unref)(a).params.slug}`},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{src:`${(0,n.unref)(i)}/qrcode-link/qrcode-${(0,n.unref)(a).params.slug}.png`,class:(0,n.normalizeClass)((0,n.unref)(a).params.slug),alt:(0,n.unref)(a).params.slug},null,10,Yn)])),_:1},8,["to"])]),(0,n.createElementVNode)("div",Gn,[(0,n.createElementVNode)("h3",null,"Entreprise : "+(0,n.toDisplayString)((0,n.unref)(r)?.name),1)]),(0,n.createElementVNode)("div",Kn,[(0,n.createElementVNode)("h3",Zn,"Nom : "+(0,n.toDisplayString)((0,n.unref)(o)?.name),1),(0,n.createElementVNode)("h3",Xn,"Lieu : "+(0,n.toDisplayString)((0,n.unref)(o)?.location),1),(0,n.createElementVNode)("h3",el,"Date : "+(0,n.toDisplayString)((0,n.unref)(V)((0,n.unref)(o)?.date_event)),1),(0,n.createElementVNode)("h3",tl,"Heure : "+(0,n.toDisplayString)((0,n.unref)(h)((0,n.unref)(o)?.time_event)),1)]),E.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("img",{key:0,src:E.value,alt:"Captured Image"},null,8,al)),[[n.vShow,!1]]):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",{class:"request-btn",onClick:g,role:"button"},t[1]||(t[1]=[(0,n.createElementVNode)("a",null,"Capture ",-1)])),(0,n.unref)(N)?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:1,class:"request-btn",onClick:t[0]||(t[0]=e=>p()),role:"button"},t[2]||(t[2]=[(0,n.createElementVNode)("a",null,"Menu ",-1)]))):(0,n.createCommentVNode)("",!0)])],512)])])])}}};const ll=(0,_.A)(nl,[["__scopeId","data-v-7f72df2b"]]);var ol=ll;const rl={ref:"video",width:"640",height:"480",autoplay:""},cl={ref:"canvas",width:"640",height:"480",style:{display:"none"}};function sl(e,t,a,l,o,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[t[0]||(t[0]=(0,n.createElementVNode)("h1",null,"Login with QR Code",-1)),(0,n.createElementVNode)("video",rl,null,512),(0,n.createElementVNode)("canvas",cl,null,512),(0,n.createElementVNode)("p",null,(0,n.toDisplayString)(o.qrResult),1),(0,n.createElementVNode)("p",null,(0,n.toDisplayString)(o.status),1)])}var ul=a(4025),il=a.n(ul),dl={data(){return{qrResult:"Waiting for QR code...",status:"Status: Logged Out",stream:null,loggedIn:!1,currentUser:"",scanInProgress:!1}},mounted(){this.startCamera()},methods:{startCamera(){const e=this.$refs.video;navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then((t=>{this.stream=t,e.srcObject=t,e.play(),this.scanQRCode()})).catch((e=>{console.error("Error accessing camera: ",e)}))},scanQRCode(){const e=this.$refs.video,t=this.$refs.canvas,a=t.getContext("2d"),n=()=>{if(!this.scanInProgress){this.scanInProgress=!0,a.drawImage(e,0,0,t.width,t.height);const n=a.getImageData(0,0,t.width,t.height),l=il()(n.data,t.width,t.height);if(console.log(l),l){const e=l.data;console.log(e),this.isValidEmail(e)?this.handleLoginLogout(e):this.qrResult=`QR Code detected but is not a valid email: ${e}`}else this.qrResult="No QR code detected.";setTimeout((()=>{this.scanInProgress=!1}),1e3)}setTimeout((()=>requestAnimationFrame(n)),500)};requestAnimationFrame(n)},handleLoginLogout(e){this.loggedIn?this.loggedIn&&this.currentUser===e?(this.loggedIn=!1,this.currentUser="",this.status="Status: Logged Out",this.qrResult="Logout successful!"):this.qrResult=`Already logged in as ${this.currentUser}. Please log out first.`:(this.loggedIn=!0,this.currentUser=e,this.status=`Status: Logged In as ${e}`,this.qrResult=`Login successful for ${e}`),this.scanInProgress=!0,setTimeout((()=>{this.scanInProgress=!1}),2e3)},isValidEmail(e){const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)}},beforeUnmount(){if(this.stream){const e=this.stream.getTracks();e.forEach((e=>e.stop()))}}};const ml=(0,_.A)(dl,[["render",sl],["__scopeId","data-v-16e46c4a"]]);var vl=ml;const pl={class:"container"},fl={class:"d-flex justify-content-center align-items-center"},El={class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},gl={key:0,class:"mt-3"},Vl={key:1,class:"mt-3"},hl={class:"text-center"},Nl={key:0},kl={class:"d-flex justify-content-center py-3"},yl={key:0,class:"table table-striped"};function bl(e,t,a,l,o,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",pl,[(0,n.createElementVNode)("div",fl,[(0,n.createElementVNode)("div",El,[(0,n.createElementVNode)("button",{class:"back",onClick:t[0]||(t[0]=e=>l.goToMenu())},"Retour"),e.route?.params?.slug?((0,n.openBlock)(),(0,n.createElementBlock)("h3",gl,"Liste Participants")):((0,n.openBlock)(),(0,n.createElementBlock)("h3",Vl,"Lista de Check in"))])]),(0,n.createElementVNode)("div",hl,[e.route?.params?.slug?((0,n.openBlock)(),(0,n.createElementBlock)("h4",Nl,"Evenements : "+(0,n.toDisplayString)(e.event?.name),1)):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",kl,[l.visitorLogs.length?((0,n.openBlock)(),(0,n.createElementBlock)("table",yl,[t[1]||(t[1]=(0,n.createElementVNode)("thead",null,[(0,n.createElementVNode)("tr",null,[(0,n.createElementVNode)("th",null,"Visitor Id"),(0,n.createElementVNode)("th",null,"Visitor Email"),(0,n.createElementVNode)("th",null,"Created At"),(0,n.createElementVNode)("th",null,"Check In"),(0,n.createElementVNode)("th",null,"Check Out")])],-1)),(0,n.createElementVNode)("tbody",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(l.visitorLogs,(e=>((0,n.openBlock)(),(0,n.createElementBlock)("tr",{key:e.id},[(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.visitor_id),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.visitor_email),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.created_at),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.check_in_time),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.check_out_time),1)])))),128))])])):(0,n.createCommentVNode)("",!0)])])}var Cl={async fetchData(){try{const e=await c.get("/visitorlog");return console.log("i am here",e.data),e.data}catch(e){throw console.error("Error fetching visitor code data:",e),new Error("Failed to fetch visitor code data.")}},anotherServiceMethod(e){return`Processed ${e}`}},wl={name:"DisplayCodeView",setup(){const e=(0,s.rd)(),t=(0,s.lq)(),a=(0,n.ref)(t?.params?.domain||"scb"),l=(0,n.ref)([]),o=(0,n.ref)(""),r=(0,n.ref)(null),c=async()=>{try{const e=await Cl.fetchData();console.log("Fetched Response:",e),l.value=e,o.value="Data fetched successfully!"}catch(e){r.value="Failed to fetch data.",console.error(e)}},u=()=>{e.push({name:"Menu",params:{domain:a.value}})};return(0,n.onMounted)((()=>{c()})),{domain:a,visitorLogs:l,message:o,error:r,goToMenu:u}}};const _l=(0,_.A)(wl,[["render",bl],["__scopeId","data-v-6df14b8a"]]);var Bl=_l;const Rl=[{path:"/sign-in",name:"Login",component:z},{path:"/:domain/meeting",name:"CreateVisitor",component:Le},{path:"/:domain/create-user",name:"CreateUser",component:Ee},{path:"/:domain/list-users",name:"ListUser",component:ba},{path:"/:domain/request-meeting",name:"RequestMeeting",component:at,alias:["/","/:domain"]},{path:"/:domain/waiting-validation/:id",name:"WaitingValidation",component:gt},{path:"/:domain/show-event-qrcode/:slug",name:"ShowEventQRcode",component:ol},{path:"/:domain/qr-code/:id",name:"QrCode",component:jt},{path:"/:domain/list-qrcode",name:"ListQrcode",component:xt},{path:"/:domain/list-qrcode-events/:slug",name:"ListQrcodeEvents",component:xt},{path:"/:domain/manual-check",name:"ManalCheck",component:fa},{path:"/:domain/menu",name:"Menu",component:ze},{path:"/:domain/create-event",name:"CreateEvent",component:Aa},{path:"/company/:company_slug/event/:slug",name:"JoinEvent",component:Le},{path:"/:domain/list-events",name:"EventList",component:Xa},{path:"/:domain/success-checkout/:uidn",name:"SuccessCheckout",component:un},{path:"/:domain/success-checkin/:uidn",name:"SuccessCheckin",component:hn},{path:"/:domain/create-company",name:"CreateCompany",component:xn},{path:"/:domain/edit-company/:company_edit",name:"EditCreateCompany",component:Pn},{path:"/:domain/create-qr",name:"CreateQRCode",component:na},{path:"/:domain/camera",name:"Camera",component:vl},{path:"/:domain/display-logs",name:"DisplayVisitorCode",component:Bl}],Sl=(0,s.aE)({history:(0,s.LA)(),routes:Rl});var xl=Sl,Ml=a(6958),ql=a(1911),Dl=a(5073),Il=a(9449),Ll=a.n(Il),Ul=a(828);ql.A.use(Dl.A);const Al=(0,n.createApp)(L);Al.use(xl),Al.use(Ul.Ay),Al.use(Ll(),{});const Tl=(0,i.Ey)();Tl.use(Ml.A),Al.use(Tl),Al.mount("#app")}},t={};function a(n){var l=t[n];if(void 0!==l)return l.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,n,l,o){if(!n){var r=1/0;for(i=0;i<e.length;i++){n=e[i][0],l=e[i][1],o=e[i][2];for(var c=!0,s=0;s<n.length;s++)(!1&o||r>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(c=!1,o<r&&(r=o));if(c){e.splice(i--,1);var u=l();void 0!==u&&(t=u)}}return t}o=o||0;for(var i=e.length;i>0&&e[i-1][2]>o;i--)e[i]=e[i-1];e[i]=[n,l,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,o,r=n[0],c=n[1],s=n[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(l in c)a.o(c,l)&&(a.m[l]=c[l]);if(s)var i=s(a)}for(t&&t(n);u<r.length;u++)o=r[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(i)},n=self["webpackChunksecure_check"]=self["webpackChunksecure_check"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(4452)}));n=a.O(n)})();
//# sourceMappingURL=app.31a6f1b0.js.map