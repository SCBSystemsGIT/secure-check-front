(function(){"use strict";var e={8177:function(e,t,a){var n=a(9908),o=a.p+"img/secure-check-logo.5a09639d.png",l=(a(9138),a(3433));const r=l.A.create({baseURL:"https://www.securecheck.info/api/public/index.php/api",headers:{"Content-Type":"application/json"}});r.interceptors.request.use((e=>{const t=localStorage.getItem("token");return console.log("Token:",t),t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e)));var c=r,s=a(3753);function i(){const e=(0,n.ref)([]),t=(0,n.ref)(),a=(0,n.ref)(!1),o=(0,n.ref)(null),l=(0,n.ref)(null),r=(0,s.rd)(),i=async()=>{a.value=!0,o.value=null;try{const t=await c.get("/companies");e.value=t.data.data}catch(t){o.value="Une erreur est survenue lors du chargement des entreprises.",console.error(t),401==t.status&&r.push({name:"RequestMeeting",params:{domain:"scb"}})}finally{a.value=!1}},u=async e=>{a.value=!0,o.value=null;try{const a=await c.get(`/company/${e}`);t.value=a.data.data}catch(n){o.value="Une erreur est survenue lors du chargement des entreprises.",console.error(n)}finally{a.value=!1}},d=async(e,n)=>{a.value=!0,o.value=null;try{const a=await c.put(`/company/${n}`,e);t.value=a.data.data,l.value=a.status}catch(r){o.value="Une erreur est survenue lors du chargement des entreprises.",console.error(r)}finally{a.value=!1}},m=async e=>{a.value=!0,o.value=null;try{const a=new FormData;a.append("name",e.name),a.append("description",e.description),a.append("logo",e.logo);const n=await c.post("/company",a,{headers:{"Content-Type":"multipart/form-data"}});t.value=n.data.data,l.value=n.status}catch(n){o.value="Une erreur est survenue lors de l'enregistrement de l'entreprise.",console.error(n)}finally{a.value=!1}};return{companies:e,loading:a,errorMessage:o,fetchCompanies:i,showCompany:u,postCompany:m,updateCompany:d,statusCode:l,company:t}}var u=a(200);const d=(0,u.nY)("global",{state:()=>({baseUrl:"https://www.securecheck.info/api/public/index.php/api",baseUrl_:"https://www.securecheck.info/api/public/index.php",publicDir:"https://www.securecheck.info/api/public",domain:"scb",logoPath:"",currentPath:""}),actions:{setDomain(e){this.domain=e},setLogoPath(e){this.logoPath=e},setCurrentPath(e){this.currentPath=e}},getters:{getLogoPath:e=>e.logoPath,getCurrentPath:e=>e.currentPath},persist:!0});var m=a(575);const p=(0,u.nY)("user",(()=>{const e=(0,n.ref)(localStorage.getItem("token")||null);localStorage.setItem("roles_list",JSON.stringify(["ROLE_USER","ROLE_EMPLOYEE","ROLE_SUPERVISOR","ROLE_ADMIN","ROLE_SUPER_ADMIN","ROLE_MANAGER","ROLE_SecureCheck"]));const t=(0,n.ref)(JSON.parse(localStorage.getItem("roles_list"))),a=(0,n.ref)(null),o=()=>!!e.value,r=e=>t.value.includes(e),i=t=>{e.value=t,localStorage.setItem("token",t),l.A.defaults.headers.common["Authorization"]=`Bearer ${t}`},u=async()=>{},d=async()=>{try{const e=await c.get("/user/info");a.value=e.data,localStorage.setItem("userInfo",JSON.stringify(a.value))}catch(e){console.error("Failed to fetch user info:",e)}},p=async e=>{try{const t=await c.post("/login_check",e);i(t.data.token),await u(),await d()}catch(t){console.error("Login failed:",t)}},v=e=>"ROLE_ADMIN"==e,f=e=>"ROLE_SUPER_ADMIN"==e,E=e=>"ROLE_SUPERVISOR"==e,g=e=>"ROLE_EMPLOYEE"==e,h=e=>"ROLE_USER"==e,V=e=>"ROLE_MANAGER"==e,N=e=>"ROLE_SecureCheck"==e,y=(0,s.rd)(),k=()=>{e.value=null,a.value=null,t.value=[],localStorage.removeItem("token"),localStorage.removeItem("roles"),localStorage.removeItem("userInfo"),localStorage.removeItem("roles_list"),m.oR.info("Déconnecté"),y.push("/sign-in"),window.location="/sign-in"};return{token:e,roles:t,isAuthenticated:o,hasRole:r,setToken:i,fetchRoles:u,login:p,logout:k,fetchUserInfo:d,isAdmin:v,isSuperAdmin:f,isSupervisor:E,isEmployee:g,isUser:h,isManager:V,isSecureCheck:N}}),{persist:!0}),v=(0,n.reactive)({}),f={class:"top-bar"},E={class:"container"},g={class:"row align-items-center"},h={class:"col col-6 col-md-6 top-bar-left"},V={class:"col col-6 col-md-6 top-bar-right"},N={class:"account-login-button"};var y={__name:"NavbarComponent",setup(e){const t=p(),a=(0,s.lq)(),l=()=>{t.logout()},r=t.isAuthenticated(),{publicDir:c}=d(),{showCompany:u,company:m}=i(),y=(0,n.ref)(localStorage.getItem("currentCompany"));(0,n.onBeforeMount)((async()=>{console.log("Host:",window.location.host),console.log("Path:",window.location.pathname),"/sign-in"!=window.location.pathname&&(y.value?await u(y.value):y.value="")})),(0,n.watch)((()=>v["company_slug"]),(async e=>{await u(localStorage.getItem("currentCompany")??e)}));const k=(0,n.ref)(JSON.parse(localStorage.getItem("userInfo"))||{}),b=(0,n.ref)(k?.value?.roles?k.value.roles[0]:"");return(0,n.onMounted)((()=>{})),(e,s)=>{const i=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",f,[(0,n.createElementVNode)("div",E,[(0,n.createElementVNode)("div",g,[(0,n.createElementVNode)("div",h,[(0,n.createElementVNode)("div",null,["scb"==(0,n.unref)(a).params.domain?((0,n.openBlock)(),(0,n.createBlock)(i,{key:0,to:"/"},{default:(0,n.withCtx)((()=>s[0]||(s[0]=[(0,n.createElementVNode)("img",{id:"logoif",src:o,class:"",alt:"secure-check-logo"},null,-1)]))),_:1})):((0,n.openBlock)(),(0,n.createBlock)(i,{key:1,to:`/${y.value??""}`},{default:(0,n.withCtx)((()=>s[1]||(s[1]=[(0,n.createElementVNode)("img",{src:o,class:"logo12333",id:"testelse",alt:"secure-check-logo"},null,-1)]))),_:1},8,["to"]))])]),(0,n.createElementVNode)("div",V,[(0,n.createElementVNode)("div",N,[(0,n.withDirectives)((0,n.createElementVNode)("p",null,(0,n.toDisplayString)(`${k.value}`)+" "+(0,n.toDisplayString)(`${(0,n.unref)(c)}/logo/${(0,n.unref)(m)?.logo}`),513),[[n.vShow,!1]]),(0,n.unref)(r)?((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:0,onClick:l,class:"login-button",role:"button"}," Se Déconnecter ")):"Login"!=(0,n.unref)(a).name?((0,n.openBlock)(),(0,n.createBlock)(i,{key:1,to:"/sign-in",class:"login-button"},{default:(0,n.withCtx)((()=>s[2]||(s[2]=[(0,n.createTextVNode)(" Se Connecter ")]))),_:1})):((0,n.openBlock)(),(0,n.createBlock)(i,{key:2,to:"/request-meeting",class:"login-button"},{default:(0,n.withCtx)((()=>s[3]||(s[3]=[(0,n.createTextVNode)(" Visite ")]))),_:1})),(0,n.unref)(t).isManager(b.value)?((0,n.openBlock)(),(0,n.createBlock)(i,{key:3,to:`/${y.value??"scb"}/edit-company/${y.value}`,class:"login-button"},{default:(0,n.withCtx)((()=>s[4]||(s[4]=[(0,n.createTextVNode)(" Modifier Entreprise ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0)])])])])])}}};const k=y;var b=k;function w(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("div")}var C=a(7639);const _={},B=(0,C.A)(_,[["render",w]]);var R=B,S={__name:"HomeView",setup(e){return(e,t)=>{const a=(0,n.resolveComponent)("router-view");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createVNode)(b),(0,n.createVNode)(a),(0,n.createVNode)(R)])}}};const x=S;var M=x,D=Object.assign({name:"App"},{__name:"App",setup(e){return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createVNode)((0,n.unref)(M))]))}});const q=D;var L=q;function I(){const e=(0,n.ref)(""),t=(0,n.ref)(""),a=(0,n.ref)(!1),o=(0,n.ref)(null),l=(0,n.ref)(null),r=p(),s=(0,n.ref)(null),i=(0,n.ref)(null),u=async()=>{a.value=!0,o.value=null,l.value=null;try{const a=await c.post("/login_check",{username:e.value,password:t.value});l.value=a.status,localStorage.setItem("token",a.data.token),r.setToken(a.data.token);let n=d();return console.log({fetchResult:n}),s.value=n,a.data}catch(n){o.value="Login failed: "+(n.response?.data?.message||"Unknown error"),l.value=n.response.status,console.error(n)}finally{a.value=!1}},d=async()=>{try{const e=await c.get("/user/info");i.value=e.data,localStorage.setItem("userInfo",JSON.stringify(i.value))}catch(e){console.error("Failed to fetch user info:",e)}};return{username:e,password:t,loading:a,errorMessage:o,statusCode:l,company_name:s,userInfo:i,login:u}}const T={class:"background-gradi login-meeting"},A={class:"container"},U={class:"row align-items-center"},$={class:"col col-12 col-md-12 col-sm-12"},O={action:""},P={class:"submit-button"};var j={__name:"LoginView",setup(e){const{login:t,username:a,password:l,statusCode:r,company_name:c,userInfo:s}=I();(0,n.watch)(r,(e=>{switch(e){case 200:m.oR.success("Connexion réussie."),console.log({company_name:c}),setTimeout((()=>{window.location=s?.value?.company??"scb/menu"}),1500);break;case 201:m.oR.success("Utilisateur connecté avec succès.");break;case 400:m.oR.error("La requête est mal formée.");break;case 401:m.oR.error("Identifiants incorrects.");break;case 403:m.oR.error("  Accès refusé.");break;case 404:m.oR.error("La ressource demandée n'existe pas.");break;case 500:m.oR.error("Une erreur interne est survenue.");break;default:console.log(`Erreur inconnue - Code : ${e}`)}}));let i=localStorage.getItem("currentCompany");const u=(e,t)=>{console.info({params:e,valueAdded:t}),v[e]=t};return(0,n.onMounted)((async()=>{"/sign-in"==window.location.pathname&&(i?u("company_slug",i):i="")})),(e,r)=>((0,n.openBlock)(),(0,n.createElementBlock)("section",T,[(0,n.createElementVNode)("div",A,[(0,n.createElementVNode)("div",U,[(0,n.createElementVNode)("div",$,[r[6]||(r[6]=(0,n.createElementVNode)("div",{class:"popup-logo"},[(0,n.createElementVNode)("a",{href:"#"},[(0,n.createElementVNode)("img",{src:o,class:"",alt:"secure-check-logo"})])],-1)),(0,n.createElementVNode)("form",O,[(0,n.createElementVNode)("div",null,[r[3]||(r[3]=(0,n.createElementVNode)("label",{for:"client-email"},"Email",-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"email",id:"client-email",name:"client-email","onUpdate:modelValue":r[0]||(r[0]=e=>(0,n.isRef)(a)?a.value=e:null)},null,512),[[n.vModelText,(0,n.unref)(a)]]),r[4]||(r[4]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[r[5]||(r[5]=(0,n.createElementVNode)("label",{for:"pwd"},"Mot de passe",-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"password",id:"pwd",name:"pwd","onUpdate:modelValue":r[1]||(r[1]=e=>(0,n.isRef)(l)?l.value=e:null)},null,512),[[n.vModelText,(0,n.unref)(l)]])]),(0,n.createElementVNode)("div",P,[(0,n.createElementVNode)("input",{type:"submit",value:"Soumettre",onClick:r[2]||(r[2]=(0,n.withModifiers)(((...e)=>(0,n.unref)(t)&&(0,n.unref)(t)(...e)),["prevent"]))})])])])])])]))}};const Q=j;var F=Q;function z(){const e=(0,n.ref)({name:"",firstname:"",email:"",password:"",title:"",contact:"",role:"ROLE_USER",status:!0,department_id:""}),t=(0,n.ref)(!1),a=(0,n.ref)(null),o=(0,n.ref)(null),l=(0,n.ref)(null),r=async()=>{t.value=!0,a.value=null,o.value=null;try{const t=await c.post("/user/create",e.value);return l.value=t.status,o.value="Utilisateur créé avec succès !",t.data}catch(n){a.value="Erreur lors de la création de l'utilisateur : "+(n.response?.data?.message||"Erreur inconnue"),l.value=n.response?.status||500,console.error(n)}finally{t.value=!1}};return{user:e,loading:t,errorMessage:a,successMessage:o,statusCode:l,createUser:r}}function J(){const e=(0,n.ref)([]),t=(0,n.ref)(!1),a=(0,n.ref)(null),o=(0,n.ref)(null),l=async()=>{t.value=!0,a.value=null;try{const t=await c.get("/departement/list",{params:{name:"IT Department",location:"Building A"}});e.value=t.data,o.value=t.status}catch(n){o.value=n.response?.status||500,a.value="Erreur lors de la récupération des départements : "+(n.response?.data?.message||"Erreur inconnue"),console.error(n)}finally{t.value=!1}};return{departements:e,loading:t,errorMessage:a,statusCode:o,fetchDepartements:l}}const H={class:"background-gradi"},W={class:"request-meeting meeting-form"},Y={class:"container"},G={class:"row align-items-center"},K={class:"col col-12 col-md-12 col-sm-12"},Z={key:0,value:"ROLE_USER"},X={key:1,value:"ROLE_EMPLOYEE"},ee={key:2,value:"ROLE_SUPERVISOR"},te={key:3,value:"ROLE_SecureCheck"},ae={key:4,value:"ROLE_MANAGER"},ne={key:5,value:"ROLE_ADMIN"},oe={key:6,value:"ROLE_SUPER_ADMIN"},le=["value"],re=["value"],ce=["value"],se={key:0},ie={key:1},ue={class:"submit-button"},de=["disabled"],me={key:0,class:"error"};var pe={__name:"CreateUserView",setup(e){const{user:t,loading:a,errorMessage:o,successMessage:l,createUser:r,statusCode:c}=z(),{departements:u,fetchDepartements:d}=J(),v=(0,s.rd)(),{companies:f,fetchCompanies:E}=i(),g=()=>{r()},h=p(),V=(0,n.ref)(),N=(0,n.ref)();N.value=JSON.parse(localStorage.getItem("userInfo")),V.value=N.value?.roles[0],(0,n.onMounted)((async()=>{await d(),await E()})),(0,n.watch)(c,(e=>{switch(e){case 200:m.oR.success("OK - Utilisateur créé avec succès."),m.oR.info(l),v.push(localStorage.getItem("currentCompany")??"/scb/menu");break;case 201:m.oR.success("Created - L'utilisateur a été créé avec succès."),setTimeout((()=>{v.push({name:"Menu",params:{domain:k.value??localStorage.getItem("currentCompany")}})}),1400);break;case 400:m.oR.info("Bad Request - La requête est mal formée.");break;case 401:m.oR.info("Unauthorized - Vous devez être authentifié.");break;case 403:m.oR.info("Forbidden - Vous n'avez pas la permission.");break;case 404:m.oR.info("Not Found - La ressource demandée n'existe pas.");break;case 500:m.oR.info("Internal Server Error - Une erreur interne est survenue.");break;default:m.oR.info(`Erreur inconnue - Code : ${e}`)}}));const y=(0,s.lq)(),k=(0,n.ref)(y.params.domain||"scb"),b=()=>{v.push({name:"Menu",params:{domain:k.value}})},{showCompany:w,company:C}=i();return(0,n.onBeforeMount)((async()=>{if(console.log("Host:",window.location.host),console.log("Path:",window.location.pathname),"/sign-in"!=window.location.pathname){let e=localStorage.getItem("currentCompany");e?await w(e):e=""}})),(e,l)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",H,[(0,n.createElementVNode)("section",W,[(0,n.createElementVNode)("div",Y,[(0,n.createElementVNode)("div",G,[(0,n.createElementVNode)("div",K,[(0,n.createElementVNode)("div",{class:"d-flex justify-content-center align-items-center"},[(0,n.createElementVNode)("div",{class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},[(0,n.createElementVNode)("button",{class:"back",onClick:b},"Retour"),l[10]||(l[10]=(0,n.createElementVNode)("h3",null,"Création Utilisateur",-1))])]),(0,n.createElementVNode)("form",{onSubmit:(0,n.withModifiers)(g,["prevent"])},[(0,n.createElementVNode)("div",null,[l[11]||(l[11]=(0,n.createElementVNode)("label",{for:"name"},"Nom",-1)),l[12]||(l[12]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"name","onUpdate:modelValue":l[0]||(l[0]=e=>(0,n.unref)(t).name=e)},null,512),[[n.vModelText,(0,n.unref)(t).name]]),l[13]||(l[13]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[l[14]||(l[14]=(0,n.createElementVNode)("label",{for:"firstname"},"Prénom",-1)),l[15]||(l[15]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"firstname","onUpdate:modelValue":l[1]||(l[1]=e=>(0,n.unref)(t).firstname=e)},null,512),[[n.vModelText,(0,n.unref)(t).firstname]]),l[16]||(l[16]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[l[17]||(l[17]=(0,n.createElementVNode)("label",{for:"email"},"Email",-1)),l[18]||(l[18]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"email",id:"email","onUpdate:modelValue":l[2]||(l[2]=e=>(0,n.unref)(t).email=e)},null,512),[[n.vModelText,(0,n.unref)(t).email]]),l[19]||(l[19]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[l[20]||(l[20]=(0,n.createElementVNode)("label",{for:"password"},"Mot de passe",-1)),l[21]||(l[21]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"password",id:"password","onUpdate:modelValue":l[3]||(l[3]=e=>(0,n.unref)(t).password=e)},null,512),[[n.vModelText,(0,n.unref)(t).password]]),l[22]||(l[22]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[l[23]||(l[23]=(0,n.createElementVNode)("label",{for:"title"},"Titre",-1)),l[24]||(l[24]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"title","onUpdate:modelValue":l[4]||(l[4]=e=>(0,n.unref)(t).title=e)},null,512),[[n.vModelText,(0,n.unref)(t).title]]),l[25]||(l[25]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[l[26]||(l[26]=(0,n.createElementVNode)("label",{for:"contact"},"Numéro de téléphone",-1)),l[27]||(l[27]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"contact","onUpdate:modelValue":l[5]||(l[5]=e=>(0,n.unref)(t).contact=e)},null,512),[[n.vModelText,(0,n.unref)(t).contact]]),l[28]||(l[28]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[l[29]||(l[29]=(0,n.createElementVNode)("label",{for:"role"},"Rôle",-1)),l[30]||(l[30]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("select",{id:"role","onUpdate:modelValue":l[6]||(l[6]=e=>(0,n.unref)(t).role=e),name:"country",class:"form-control"},[(0,n.unref)(h).isAdmin(V.value)||(0,n.unref)(h).isSupervisor(V.value)||(0,n.unref)(h).isManager(V.value)||(0,n.unref)(h).isManager(V.value)||(0,n.unref)(h).isSecureCheck(V.value)?((0,n.openBlock)(),(0,n.createElementBlock)("option",Z," Utilisateur ")):(0,n.createCommentVNode)("",!0),(0,n.unref)(h).isAdmin(V.value)||(0,n.unref)(h).isSupervisor(V.value)||(0,n.unref)(h).isManager(V.value)||(0,n.unref)(h).isSecureCheck(V.value)?((0,n.openBlock)(),(0,n.createElementBlock)("option",X," Employé ")):(0,n.createCommentVNode)("",!0),(0,n.unref)(h).isAdmin(V.value)||(0,n.unref)(h).isManager(V.value)||(0,n.unref)(h).isSecureCheck(V.value)?((0,n.openBlock)(),(0,n.createElementBlock)("option",ee," Superviseur ")):(0,n.createCommentVNode)("",!0),(0,n.unref)(h).isAdmin(V.value)?((0,n.openBlock)(),(0,n.createElementBlock)("option",te," Secure Check ")):(0,n.createCommentVNode)("",!0),(0,n.unref)(h).isAdmin(V.value)?((0,n.openBlock)(),(0,n.createElementBlock)("option",ae," Manager ")):(0,n.createCommentVNode)("",!0),(0,n.unref)(h).isAdmin(V.value)?((0,n.openBlock)(),(0,n.createElementBlock)("option",ne," Admin ")):(0,n.createCommentVNode)("",!0),(0,n.unref)(h).isAdmin(V.value)||(0,n.unref)(h).isSupervisor(V.value)||(0,n.unref)(h).isManager(V.value)?((0,n.openBlock)(),(0,n.createElementBlock)("option",oe,"Super Admin")):(0,n.createCommentVNode)("",!0)],512),[[n.vModelSelect,(0,n.unref)(t).role]]),l[31]||(l[31]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[l[32]||(l[32]=(0,n.createElementVNode)("label",{for:"department"},"Department",-1)),l[33]||(l[33]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("select",{"onUpdate:modelValue":l[7]||(l[7]=e=>(0,n.unref)(t).department_id=e),id:"department",name:"department",class:"form-control"},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(u),(e=>((0,n.openBlock)(),(0,n.createElementBlock)("option",{key:e.id,value:e.id},(0,n.toDisplayString)(e.name),9,le)))),128))],512),[[n.vModelSelect,(0,n.unref)(t).department_id]]),l[34]||(l[34]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[l[35]||(l[35]=(0,n.createElementVNode)("label",{for:"company"},"Entreprise",-1)),l[36]||(l[36]=(0,n.createElementVNode)("br",null,null,-1)),"scb"==(0,n.unref)(C)?.slug?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("select",{key:0,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,n.unref)(t).company_id=e),id:"company",name:"company",class:"form-control"},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(f),(e=>((0,n.openBlock)(),(0,n.createElementBlock)("option",{key:e?.id,value:e?.id},(0,n.toDisplayString)(e?.name),9,re)))),128))],512)),[[n.vModelSelect,(0,n.unref)(t).company_id]]):(0,n.unref)(C)?.name?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("input",{key:1,type:"text",id:"name",value:(0,n.unref)(C)?.name},null,8,ce))]),(0,n.withDirectives)((0,n.createElementVNode)("div",null,[l[37]||(l[37]=(0,n.createElementVNode)("label",{for:"status"},"Statut",-1)),l[38]||(l[38]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"checkbox",id:"status","onUpdate:modelValue":l[9]||(l[9]=e=>(0,n.unref)(t).status=e)},null,512),[[n.vModelCheckbox,(0,n.unref)(t).status]]),(0,n.unref)(t).status?((0,n.openBlock)(),(0,n.createElementBlock)("span",se,"Actif")):((0,n.openBlock)(),(0,n.createElementBlock)("span",ie,"Inactif")),l[39]||(l[39]=(0,n.createElementVNode)("br",null,null,-1))],512),[[n.vShow,!1]]),(0,n.createElementVNode)("div",ue,[(0,n.createElementVNode)("input",{type:"submit",value:"Soumettre",disabled:(0,n.unref)(a)},null,8,de)]),(0,n.unref)(o)?((0,n.openBlock)(),(0,n.createElementBlock)("p",me,(0,n.toDisplayString)((0,n.unref)(o)),1)):(0,n.createCommentVNode)("",!0)],32)])])])])]))}};const ve=pe;var fe=ve;function Ee(){const e=(0,n.ref)(null),t=(0,n.ref)(null),a=(0,n.ref)(null),o=async n=>{try{const t=await c.post("/visitor/create",n);return e.value=t.status,a.value=t.data.data.visitor_id,console.log({data___:t.data,visitorId___:a.value}),t.data}catch(o){throw e.value=o.response?.status,t.value=o.response?.data?.message||"An unexpected error occurred",new Error(t.value)}};return{createVisitor:o,statusCode:e,errorMessage:t,visitorId:a}}const ge=()=>{const e=(0,n.ref)(null),t=(0,n.ref)(null),a=async()=>{try{const t=await c.get("/user/info");e.value=t.data}catch(a){t.value=a.response?.data?.error||"Failed to fetch user info"}};return{userInfo:e,error:t,fetchUserInfo:a}};function he(){const e=(0,n.ref)(!1),t=(0,n.ref)(null),a=(0,n.ref)(null),o=(0,n.ref)(null),l=async n=>{e.value=!0,t.value=null;try{const e=await c.post("/requests/create",n);return a.value=e.data.data.id,o.value=e.status,e.data}catch(l){throw t.value=l.response?l.response.data:l.message,t.value}finally{e.value=!1}};return{loading:e,error:t,createVisitRequest:l,requestId:a,statusCodeReq:o}}function Ve(){const e=(0,n.ref)(!1),t=(0,n.ref)(),a=(0,n.ref)(null),o=(0,n.ref)(null),l=(0,n.ref)(null),r=async t=>{e.value=!0,a.value=null,o.value=null,l.value=null;try{const e=await c.post("/evenement/create",t,{headers:{"Content-Type":"application/json"}});l.value=e.status,o.value="Événement créé avec succès !"}catch(n){n.response?(l.value=n.response.status,a.value=`Erreur: ${n.response.status} - ${n.response.data.message||"Erreur lors de la création de l’événement."}`):a.value="Erreur réseau ou serveur non joignable.",console.error(n)}finally{e.value=!1}},s=async n=>{e.value=!0,a.value=null,o.value=null,l.value=null;try{const e=await c.get("/evenement/"+n);t.value=e.data.data,l.value=e.status,o.value="Événement Rétrouvé"}catch(r){r.response?(l.value=r.response.status,a.value=`Erreur: ${r.response.status} - ${r.response.data.message||"Erreur lors de la recherche de l’événement."}`):a.value="Erreur réseau ou serveur non joignable.",console.error(r)}finally{e.value=!1}};return{loading:e,errorMessage:a,successMessage:o,statusCode:l,createEvent:r,showEvent:s,event:t}}const Ne={class:"request-meeting"},ye={class:"background-gradi"},ke={class:"request-meeting meeting-form"},be={class:"row align-items-center"},we={class:"col col-12 col-md-12 col-sm-12"},Ce={class:"d-flex justify-content-start align-items-center gap-5 mb-3"},_e={key:0,class:"text-center"},Be={key:0,class:"text-center pb-3"},Re={key:0,value:"1"},Se={class:"submit-button"},xe=["disabled"],Me={key:0,class:"error"};var De={__name:"CreateVisitorView",setup(e){const t=(0,n.ref)(),a=(0,n.ref)();a.value=JSON.parse(localStorage.getItem("userInfo")),t.value=a.value?.roles[0];const{userInfo:o,fetchUserInfo:l}=ge(),{createVisitor:r,statusCode:c,visitorId:u}=Ee(),{createVisitRequest:d,requestId:v,statusCodeReq:f}=he(),{showCompany:E,company:g}=i(),{showEvent:h,event:V}=Ve(),N=p(),y=N.isAuthenticated(),k=(0,s.rd)(),b=(0,s.lq)(),w=(0,n.ref)({user_id:o?.value?.id,evenements_id:V?.value?.id??null,company_id:g?.value?.id??null,firstname:"",lastname:"",email:"",contact:"",address:"",id_number:"",organisation_name:"",visitor_type:""}),C=(0,n.ref)({user_id:o?.value?.id,visitor_id:"",host:""}),_=(0,n.ref)(""),B=(0,n.ref)(!1),R=async()=>{w.value.user_id=o?.value?.id;try{w.value.evenements_id=V?.value?.id,w.value.company_id=g?.value?.id,await r(w.value),C.value.visitor_id=u.value,C.value.user_id=o?.value?.id,C.value.user_id=o?.value?.id,await d(C.value)}catch(e){_.value=`Erreur: ${e.message}`}finally{B.value=!1}},S=(0,n.ref)(b.params.domain||"scb"),x=(0,n.ref)("");return(0,n.onBeforeMount)((async()=>{b.params.slug&&(await h(b.params.slug),x.value=V.value.name),S.value&&(await E(S.value),k.push({name:"CreateVisitor",params:{domain:S.value}})),await l()})),(0,n.watch)(c,(e=>{switch(e){case 201:y?(m.oR.success("Visiteur créé avec succès."),N.isEmployee(t.value)):(m.oR.success("Demande créé avec succès."),setTimeout((()=>{k.push({name:"RequestMeeting",params:{domain:S.value,id:v.value}})}),2e3));break;case 200:y?(m.oR.success("Visiteur créé avec succès."),N.isEmployee(t.value)?setTimeout((()=>{k.push({name:"WaitingValidation",params:{domain:S,id:v.value}})}),1500):(m.oR.success("Visiteur créé avec succès."),k.push({name:"Menu",params:{domain:S}}))):(m.oR.success("Demande créé avec succès."),alert(200),setTimeout((()=>{k.push({name:"RequestMeeting",params:{domain:S.value,id:v.value}})}),1500));break;case 400:m.oR.info("La requête est mal formée.");break;case 401:m.oR.info("Vous devez être authentifié."),setTimeout((()=>{k.push({name:"RequestMeeting",params:{domain:S,id:v.value}})}),1500);break;case 403:m.oR.info("Vous n'avez pas la permission.");break;case 404:m.oR.info("La ressource demandée n'existe pas.");break;case 500:m.oR.info("Une erreur interne est survenue.");break;default:m.oR.info(`Code : ${e}`)}})),(0,n.watch)(f,(e=>{switch(e){case 201:v?.value?setTimeout((()=>{k.push({name:"WaitingValidation",params:{domain:S.value,id:v.value}})}),1500):console.error("requestId est null ou undefined.");break;default:break}})),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("section",Ne,[(0,n.createElementVNode)("div",ye,[(0,n.createElementVNode)("section",ke,[(0,n.createElementVNode)("div",be,[(0,n.createElementVNode)("div",we,[(0,n.createElementVNode)("div",Ce,[(0,n.createElementVNode)("button",{class:"back",onClick:t[0]||(t[0]=e=>(0,n.unref)(k).push(`/${S.value}/request-meeting`))}," Retour "),(0,n.unref)(g)?((0,n.openBlock)(),(0,n.createElementBlock)("h3",_e,(0,n.toDisplayString)((0,n.unref)(g).name),1)):(0,n.createCommentVNode)("",!0)]),x.value?((0,n.openBlock)(),(0,n.createElementBlock)("h3",Be,(0,n.toDisplayString)(x.value),1)):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("form",{onSubmit:(0,n.withModifiers)(R,["prevent"])},[(0,n.createElementVNode)("div",null,[t[12]||(t[12]=(0,n.createElementVNode)("label",{for:"visitor_type"},"Type de visiteur",-1)),t[13]||(t[13]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("select",{name:"visitor_type",id:"visitor_type",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>w.value.visitor_type=e)},[t[11]||(t[11]=(0,n.createElementVNode)("option",{value:"2"},"Temporaire",-1)),(0,n.unref)(N).isAuthenticated()?((0,n.openBlock)(),(0,n.createElementBlock)("option",Re," Permanent ")):(0,n.createCommentVNode)("",!0)],512),[[n.vModelSelect,w.value.visitor_type]])]),(0,n.createElementVNode)("div",null,[t[14]||(t[14]=(0,n.createElementVNode)("label",{for:"firstname"},"Prénom",-1)),t[15]||(t[15]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"firstname","onUpdate:modelValue":t[2]||(t[2]=e=>w.value.firstname=e),required:""},null,512),[[n.vModelText,w.value.firstname]]),t[16]||(t[16]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[17]||(t[17]=(0,n.createElementVNode)("label",{for:"lastname"},"Nom",-1)),t[18]||(t[18]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"lastname","onUpdate:modelValue":t[3]||(t[3]=e=>w.value.lastname=e),required:""},null,512),[[n.vModelText,w.value.lastname]]),t[19]||(t[19]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[20]||(t[20]=(0,n.createElementVNode)("label",{for:"email"},"Email",-1)),t[21]||(t[21]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"email",id:"email","onUpdate:modelValue":t[4]||(t[4]=e=>w.value.email=e),required:""},null,512),[[n.vModelText,w.value.email]]),t[22]||(t[22]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[23]||(t[23]=(0,n.createElementVNode)("label",{for:"id_number"},"Numéro de pièce d’identité",-1)),t[24]||(t[24]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"id_number","onUpdate:modelValue":t[5]||(t[5]=e=>w.value.id_number=e),required:""},null,512),[[n.vModelText,w.value.id_number]]),t[25]||(t[25]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[26]||(t[26]=(0,n.createElementVNode)("label",{for:"file"}," Pièce d’identité",-1)),t[27]||(t[27]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.createElementVNode)("input",{type:"file",id:"file",onChange:t[6]||(t[6]=(...t)=>e.uploadFile&&e.uploadFile(...t))},null,32),t[28]||(t[28]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[29]||(t[29]=(0,n.createElementVNode)("label",{for:"organisation_name"},"Employeur",-1)),t[30]||(t[30]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"organisation_name","onUpdate:modelValue":t[7]||(t[7]=e=>w.value.organisation_name=e),required:""},null,512),[[n.vModelText,w.value.organisation_name]]),t[31]||(t[31]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[32]||(t[32]=(0,n.createElementVNode)("label",{for:"contact"},"Contact",-1)),t[33]||(t[33]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"contact","onUpdate:modelValue":t[8]||(t[8]=e=>w.value.contact=e),required:""},null,512),[[n.vModelText,w.value.contact]]),t[34]||(t[34]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[35]||(t[35]=(0,n.createElementVNode)("label",{for:"address"},"Adresse",-1)),t[36]||(t[36]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"address","onUpdate:modelValue":t[9]||(t[9]=e=>w.value.address=e),required:""},null,512),[[n.vModelText,w.value.address]]),t[37]||(t[37]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[38]||(t[38]=(0,n.createElementVNode)("label",{for:"h-name"},"Nom d’hôte",-1)),t[39]||(t[39]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"h-name",name:"h-name","onUpdate:modelValue":t[10]||(t[10]=e=>C.value.host=e)},null,512),[[n.vModelText,C.value.host]]),t[40]||(t[40]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",Se,[(0,n.createElementVNode)("input",{type:"submit",value:"Soumettre",disabled:B.value},null,8,xe)]),_.value?((0,n.openBlock)(),(0,n.createElementBlock)("p",Me,(0,n.toDisplayString)(_.value),1)):(0,n.createCommentVNode)("",!0)],32)])])])])]))}};const qe=De;var Le=qe;const Ie={class:"background-gradi selectcheckintype"},Te={class:"container"},Ae={class:"row align-items-center"},Ue={class:"col col-12 col-md-12 col-sm-12"},$e={class:"popup-logo"},Oe=["src","alt"],Pe={key:0,class:"selectcheck-all"},je={class:"selectcheckintype-btns"};var Qe={__name:"MenuView",setup(e){const t=(0,s.lq)(),a=(0,n.ref)(t.params.domain||"scb"),o=p(),l=o.isAuthenticated(),{publicDir:r}=d(),{showCompany:c,company:u}=i(),m=(0,n.ref)(localStorage.getItem("currentCompany")),f=(0,s.rd)(),E=(0,n.ref)(),g=(0,n.ref)();return g.value=JSON.parse(localStorage.getItem("userInfo")),E.value=g.value?.roles[0],(0,n.onMounted)((()=>{console.log("Rôle actuel :",E.value),console.log("isAuthenticated :",l),l||(console.log("RequestMeeting"),f.push({name:"RequestMeeting",params:{domain:a.value}}))})),(0,n.onBeforeMount)((async()=>{console.log("Host:",window.location.host),console.log("Path:",window.location.pathname),"/sign-in"!=window.location.pathname&&(m.value?await c(m.value):m.value="")})),(0,n.watch)((()=>v["company_slug"]),(async e=>{await c(localStorage.getItem("currentCompany")??e)})),(e,t)=>{const c=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",Ie,[(0,n.createElementVNode)("div",Te,[(0,n.createElementVNode)("div",Ae,[(0,n.createElementVNode)("div",Ue,[(0,n.createElementVNode)("div",$e,[(0,n.createVNode)(c,{to:{name:"RequestMeeting",params:{domain:a.value}}},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{class:"logo logo12333",src:`${(0,n.unref)(r)}/logo/${(0,n.unref)(u)?.logo}`,alt:(0,n.unref)(u)?.logo},null,8,Oe)])),_:1},8,["to"])]),(0,n.unref)(l)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Pe,[t[13]||(t[13]=(0,n.createElementVNode)("h5",null,[(0,n.createElementVNode)("span",null,"Veuillez sélectionner")],-1)),(0,n.createElementVNode)("div",je,[(0,n.unref)(o).isEmployee(E.value)||(0,n.unref)(o).isAdmin(E.value)||(0,n.unref)(o).isSuperAdmin(E.value)||(0,n.unref)(o).isUser(E.value)||(0,n.unref)(o).isManager(E.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:0,to:{name:"CreateVisitor",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[0]||(t[0]=[(0,n.createTextVNode)("Meetings")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isEmployee(E.value)||(0,n.unref)(o).isAdmin(E.value)||(0,n.unref)(o).isSupervisor(E.value)||(0,n.unref)(o).isSecureCheck(E.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:1,to:{name:"ListQrcode",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[1]||(t[1]=[(0,n.createTextVNode)("Demandes")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(E.value)||(0,n.unref)(o).isEmployee(E.value)||(0,n.unref)(o).isSecureCheck(E.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:2,to:{name:"ManalCheck",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[2]||(t[2]=[(0,n.createTextVNode)("Manual Code")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(E.value)||(0,n.unref)(o).isSupervisor(E.value)||(0,n.unref)(o).isSecureCheck(E.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:3,to:{name:"CreateEvent",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[3]||(t[3]=[(0,n.createTextVNode)(" Créer Event ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(E.value)||(0,n.unref)(o).isSupervisor(E.value)||(0,n.unref)(o).isManager(E.value)||(0,n.unref)(o).isSecureCheck(E.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:4,to:{name:"EventList",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[4]||(t[4]=[(0,n.createTextVNode)(" Liste Event ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(E.value)||(0,n.unref)(o).isSupervisor(E.value)||(0,n.unref)(o).isSecureCheck(E.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:5,to:{name:"ListUser",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[5]||(t[5]=[(0,n.createTextVNode)(" Utilisateurs ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(E.value)||(0,n.unref)(o).isManager(E.value)||(0,n.unref)(o).isSecureCheck(E.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:6,to:{name:"CreateUser",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[6]||(t[6]=[(0,n.createTextVNode)(" + Utilisateurs ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(E.value)||(0,n.unref)(o).isManager(E.value)||(0,n.unref)(o).isSecureCheck(E.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:7,to:{name:"CreateCompany",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[7]||(t[7]=[(0,n.createTextVNode)(" + Entreprise ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(E.value)||(0,n.unref)(o).isManager(E.value)||(0,n.unref)(o).isSecureCheck(E.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:8,to:{name:"CompanyList",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[8]||(t[8]=[(0,n.createTextVNode)(" Liste Entreprise ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(E.value)||(0,n.unref)(o).isSupervisor(E.value)||(0,n.unref)(o).isManager(E.value)||(0,n.unref)(o).isSecureCheck(E.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:9,to:{name:"CreateQRCode",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[9]||(t[9]=[(0,n.createTextVNode)(" + Création QRCode ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(E.value)||(0,n.unref)(o).isManager(E.value)||(0,n.unref)(o).isEmployee(E.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:10,to:{name:"Camera",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[10]||(t[10]=[(0,n.createTextVNode)(" QR Code ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(E.value)||(0,n.unref)(o).isSupervisor(E.value)||(0,n.unref)(o).isManager(E.value)||(0,n.unref)(o).isSecureCheck(E.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:11,to:{name:"DisplayVisitorCode",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[11]||(t[11]=[(0,n.createTextVNode)(" Lista de visitantes ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(o).isAdmin(E.value)||(0,n.unref)(o).isSupervisor(E.value)||(0,n.unref)(o).isManager(E.value)||(0,n.unref)(o).isSecureCheck(E.value)?((0,n.openBlock)(),(0,n.createBlock)(c,{key:12,to:{name:"DisplayEventAttendence",params:{domain:a.value}},class:"mt-2"},{default:(0,n.withCtx)((()=>t[12]||(t[12]=[(0,n.createTextVNode)(" asistencia al evento de la empresa ")]))),_:1},8,["to"])):(0,n.createCommentVNode)("",!0)])])):(0,n.createCommentVNode)("",!0)])])])])}}};const Fe=(0,C.A)(Qe,[["__scopeId","data-v-37f97b11"]]);var ze=Fe;const Je={class:"background-gradi request-meeting"},He={class:"container"},We={class:"row align-items-center"},Ye={class:"col col-12 col-md-12 col-sm-12"},Ge={class:"popup-logo"},Ke=["src","alt"],Ze={key:0,class:"request-btn"},Xe={key:1,class:"request-btn"},et={key:2,class:"request-btn"},tt={key:3,class:"request-btn"},at={key:0,class:"request-btn"};var nt={__name:"RequestMeetingView",setup(e){const t=(0,n.ref)(JSON.parse(localStorage.getItem("userInfo"))||{}),a=p(),l=(0,n.ref)(t?.value?.roles?t.value.roles[0]:""),{showCompany:r,company:c}=i(),u=(0,s.lq)(),m=(0,s.rd)(),{publicDir:f}=d(),E=(e,t)=>{console.info({params:e,valueAdded:t}),v[e]=t},g=(0,n.ref)();return(0,n.onBeforeMount)((async()=>{g.value=u.params.domain||"scb",E("company_slug",g.value),localStorage.setItem("currentCompany",g.value);let e=localStorage.getItem("currentCompany"),t=localStorage.getItem("token");console.log(t),e?await r(e??g.value):e="",g.value&&m.push({name:"RequestMeeting",params:{domain:g.value}}),localStorage.setItem("roles_list",JSON.stringify(["ROLE_USER","ROLE_EMPLOYEE","ROLE_SUPERVISOR","ROLE_ADMIN","ROLE_SUPER_ADMIN","ROLE_SecureCheck"]))})),(e,t)=>{const r=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",Je,[(0,n.createElementVNode)("div",He,[(0,n.createElementVNode)("div",We,[(0,n.createElementVNode)("div",Ye,[(0,n.createElementVNode)("div",Ge,[e.company_slug||(0,n.unref)(c)?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)(r,{key:0,to:"/"},{default:(0,n.withCtx)((()=>t[0]||(t[0]=[(0,n.createElementVNode)("img",{src:o,alt:"secure-check-logo"},null,-1)]))),_:1})),g.value&&(0,n.unref)(c)?((0,n.openBlock)(),(0,n.createBlock)(r,{key:1,to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{src:`${(0,n.unref)(f)}/logo/${(0,n.unref)(c)?.logo}`,alt:(0,n.unref)(c).slug},null,8,Ke)])),_:1})):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",null,[(0,n.unref)(a).isEmployee(l.value)||(0,n.unref)(a).isAdmin(l.value)||(0,n.unref)(a).isManager(l.value)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ze,[(0,n.createVNode)(r,{to:{name:"CreateVisitor",params:{domain:g.value}}},{default:(0,n.withCtx)((()=>t[1]||(t[1]=[(0,n.createTextVNode)(" Request-meeting ")]))),_:1},8,["to"])])):(0,n.unref)(a).isSupervisor(l.value)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Xe)):(0,n.unref)(a).isSecureCheck(l.value)?((0,n.openBlock)(),(0,n.createElementBlock)("div",et)):((0,n.openBlock)(),(0,n.createElementBlock)("div",tt,[(0,n.createVNode)(r,{to:{name:"CreateVisitor",params:{domain:g.value}}},{default:(0,n.withCtx)((()=>t[2]||(t[2]=[(0,n.createTextVNode)(" Request-meeting ")]))),_:1},8,["to"])]))]),(0,n.unref)(a).isEmployee(l.value)||(0,n.unref)(a).isAdmin(l.value)||(0,n.unref)(a).isManager(l.value)||(0,n.unref)(a).isSupervisor(l.value)||(0,n.unref)(a).isSecureCheck(l.value)?((0,n.openBlock)(),(0,n.createElementBlock)("div",at,[(0,n.createVNode)(r,{to:{name:"Menu",params:{domain:g.value}}},{default:(0,n.withCtx)((()=>t[3]||(t[3]=[(0,n.createTextVNode)("Menu")]))),_:1},8,["to"])])):(0,n.createCommentVNode)("",!0)])])])])}}};const ot=nt;var lt=ot;function rt(){const e=(0,n.ref)(!1),t=(0,n.ref)(null),a=(0,n.ref)(null),o=async(n,o)=>{e.value=!0,t.value=null;try{const t=await c.put(`/requests/update/${n}`,o);return e.value=!1,a.value=t.data.data.uidn,t.data}catch(l){throw e.value=!1,t.value=l.response?.data?.message||"An error occurred",l}};return{isLoading:e,error:t,updateRequest:o,uidn:a}}const ct={class:"background-gradi request-meeting"},st={class:"container"},it={class:"row align-items-center"},ut={class:"col col-12 col-md-12 col-sm-12"},dt={key:0,class:"popup-logo"},mt=["src","alt"],pt={key:1,class:"popup-logo"},vt=["src"],ft={class:"text-center py-2"},Et={key:1},gt={key:2},ht={key:1,class:"text-center"};var Vt={__name:"waitingValidationView",setup(e){const t=p(),a=(0,s.lq)(),o=(0,n.ref)(!1),l=(0,n.ref)({status:"",confirmed:""}),{publicDir:r}=d(),{showCompany:c,company:u}=i(),f=(0,n.ref)(localStorage.getItem("currentCompany")),{isLoading:E,error:g,uidn:h,updateRequest:V}=rt(),N=(0,s.rd)(),y=()=>{N.push({name:"Menu",params:{domain:w.value,id:a.params.id}})},k=t.isAuthenticated(),b=async e=>{l.value.status=e,l.value.confirmed=e;try{await V(a.params.id,l.value),m.oR.success("Mise à jour éffectué"),o.value=!0}catch(t){console.log(g),console.error("Failed to update request:",t)}},w=(0,n.ref)(a.params.domain||"scb");return(0,n.onMounted)((()=>{w.value&&N.push({name:"WaitingValidation",params:{domain:w.value}})})),(0,n.onBeforeMount)((async()=>{console.log("Host:",window.location.host),console.log("Path:",window.location.pathname),"/sign-in"!=window.location.pathname&&(f.value?await c(f.value):f.value="")})),(0,n.watch)((()=>v["company_slug"]),(async e=>{await c(localStorage.getItem("currentCompany")??e)})),(e,t)=>{const a=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",ct,[(0,n.createElementVNode)("div",st,[(0,n.createElementVNode)("div",it,[(0,n.createElementVNode)("div",ut,[o.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",dt,[(0,n.createVNode)(a,{to:{name:"RequestMeeting",params:{domain:w.value}}},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{class:"logo logo12333",src:`${(0,n.unref)(r)}/logo/${(0,n.unref)(u)?.logo}`,alt:(0,n.unref)(u)?.logo},null,8,mt)])),_:1},8,["to"])])),o.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",pt,[(0,n.createVNode)(a,{to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{src:`${(0,n.unref)(r)}/qrcode/qrcode-${(0,n.unref)(h)}.png`,class:"",alt:"secure-check-logo"},null,8,vt)])),_:1}),(0,n.createElementVNode)("div",ft,[(0,n.createElementVNode)("h3",null,(0,n.toDisplayString)((0,n.unref)(h)),1)]),(0,n.unref)(k)?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"request-btn",onClick:t[0]||(t[0]=e=>y()),role:"button"},t[3]||(t[3]=[(0,n.createElementVNode)("a",null,"Menu ",-1)]))):((0,n.openBlock)(),(0,n.createElementBlock)("div",Et,t[4]||(t[4]=[(0,n.createElementVNode)("h3",null,"Votre QRCode a été envoyé par e-mail, Merci",-1)])))])):(0,n.createCommentVNode)("",!0),o.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",gt,[(0,n.createElementVNode)("div",{class:"d-flex justify-content-center align-items-center"},[(0,n.createElementVNode)("div",{class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},[(0,n.createElementVNode)("button",{class:"back",onClick:y}," Retour "),t[5]||(t[5]=(0,n.createElementVNode)("h3",{style:{display:"block ruby"},class:"text-center py-3"}," En attente de la confirmation de l'hôte ... ",-1))])]),(0,n.unref)(E)?((0,n.openBlock)(),(0,n.createElementBlock)("div",ht,t[7]||(t[7]=[(0,n.createElementVNode)("h3",null,"Chargement .....",-1)]))):((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"request-btn",onClick:t[1]||(t[1]=(0,n.withModifiers)((e=>b(1)),["prevent"]))},t[6]||(t[6]=[(0,n.createElementVNode)("a",null,"Valider ",-1)]))),(0,n.createElementVNode)("div",{class:"request-btn-cannel",onClick:t[2]||(t[2]=(0,n.withModifiers)((e=>b(0)),["prevent"]))},t[8]||(t[8]=[(0,n.createElementVNode)("a",null,"Annuler ",-1)]))]))])])])])}}};const Nt=(0,C.A)(Vt,[["__scopeId","data-v-49472e17"]]);var yt=Nt;function kt(){const e=(0,n.ref)([]),t=(0,n.ref)(null),a=(0,n.ref)(!1),o=async()=>{a.value=!0;try{const t=await c.get("/requests/list");e.value=t.data}catch(n){t.value=n.response?n.response.data:"Error fetching data"}finally{a.value=!1}},l=async n=>{a.value=!0;try{const t=await c.get("/requests/list/"+n);console.log({response:t.data}),e.value=t.data}catch(o){t.value=o.response?o.response.data:"Error fetching data"}finally{a.value=!1}};return{requests:e,error:t,loading:a,fetchRequestsByComp:l,fetchRequests:o}}const bt={class:"container"},wt={class:"d-flex justify-content-center align-items-center"},Ct={class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},_t={key:0,class:"mt-3"},Bt={key:1,class:"mt-3"},Rt={class:"text-center"},St={key:0},xt={class:"d-flex justify-content-center py-3"},Mt={key:0};var Dt={__name:"ListQrCodeView",setup(e){const{requests:t,error:a,fetchRequestsByComp:o,fetchRequests:l}=kt(),r=e=>{const t=new Date(e);return t.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},c=()=>{i.push({name:"Menu",params:{domain:k.value}})},i=(0,s.rd)(),u=(0,s.lq)(),d=(0,n.ref)(1),m=(0,n.ref)(10),v=e=>{i.push({name:"WaitingValidation",params:{domain:k.value,id:e}})},f=(0,n.computed)((()=>{const e=(d.value-1)*m.value,a=e+m.value;return u.params.slug?h.value.slice(e,a):t.value.slice(e,a)})),{showEvent:E,event:g}=Ve(),h=(0,n.computed)((()=>t.value.filter((e=>e.visitor.evenements?.id===g?.value?.id)))),V=(0,n.ref)(JSON.parse(localStorage.getItem("userInfo"))||{}),N=p(),y=(0,n.ref)(V?.value?.roles?V.value.roles[0]:""),k=(0,n.ref)(u.params.domain||"scb");return(0,n.onMounted)((async()=>{u?.params?.slug&&(await E(u?.params?.slug),console.log({requests:t}),console.log({event:g.value})),N.isAdmin(y.value)?await l():await o(k.value),t.value=h.value})),(e,o)=>{const l=(0,n.resolveComponent)("ui-icon"),s=(0,n.resolveComponent)("ui-pagination"),i=(0,n.resolveComponent)("ui-table");return(0,n.openBlock)(),(0,n.createElementBlock)("div",bt,[(0,n.createElementVNode)("div",wt,[(0,n.createElementVNode)("div",Ct,[(0,n.createElementVNode)("button",{class:"back",onClick:o[0]||(o[0]=e=>c())},"Retour"),(0,n.unref)(u)?.params?.slug?((0,n.openBlock)(),(0,n.createElementBlock)("h3",_t,"Liste Participants")):((0,n.openBlock)(),(0,n.createElementBlock)("h3",Bt,"Liste des demandes"))])]),(0,n.createElementVNode)("div",Rt,[(0,n.unref)(u)?.params?.slug?((0,n.openBlock)(),(0,n.createElementBlock)("h4",St,"Evenements : "+(0,n.toDisplayString)((0,n.unref)(g)?.name),1)):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",xt,[(0,n.createVNode)(i,{data:f.value,thead:["Visiteur","Host","Statut","Date Création","Action"],tbody:[{slot:"visitor"},"host",{slot:"confirmed"},{slot:"request_date"},{slot:"actions"}]},{visitor:(0,n.withCtx)((({data:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.visitor.firstname)+" "+(0,n.toDisplayString)(e.visitor.lastname),1)])),request_date:(0,n.withCtx)((({data:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(r(e.request_date)),1)])),confirmed:(0,n.withCtx)((({data:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.confirmed?"Confirmé":"En attente"),1)])),actions:(0,n.withCtx)((({data:e})=>[(0,n.createVNode)(l,{role:"button",onClick:t=>v(e.id)},{default:(0,n.withCtx)((()=>o[2]||(o[2]=[(0,n.createTextVNode)(" edit ")]))),_:2},1032,["onClick"])])),default:(0,n.withCtx)((()=>[(0,n.unref)(u)?.params?.slug?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)(s,{key:0,modelValue:d.value,"onUpdate:modelValue":[o[1]||(o[1]=e=>d.value=e),e.onPage],total:(0,n.unref)(t).length,"show-total":""},null,8,["modelValue","total","onUpdate:modelValue"]))])),_:1},8,["data"])]),(0,n.unref)(a)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Mt,(0,n.toDisplayString)((0,n.unref)(a)),1)):(0,n.createCommentVNode)("",!0)])}}};const qt=(0,C.A)(Dt,[["__scopeId","data-v-60912cbc"]]);var Lt=qt;const It={class:"background-gradi request-meeting"},Tt={class:"container"},At={class:"row align-items-center"},Ut={class:"col col-12 col-md-12 col-sm-12"},$t={key:0,class:"popup-logo"},Ot=["src","alt"],Pt={key:1,class:"popup-logo"},jt=["src"],Qt={class:"text-center py-2"},Ft={key:1};var zt={__name:"QrCodeView",setup(e){const t=(0,s.lq)(),a=(0,s.rd)(),o=(0,n.ref)(!1),{showCompany:l,company:r}=i(),c=(0,n.ref)(localStorage.getItem("currentCompany")),u=(0,n.ref)(t.params.domain||"scb"),d=()=>{a.push({name:"Menu",params:{domain:u.value}})};return(0,n.onMounted)((()=>{u.value&&a.push({name:"ManalCheck",params:{domain:u.value}})})),(0,n.onBeforeMount)((async()=>{console.log("Host:",window.location.host),console.log("Path:",window.location.pathname),"/sign-in"!=window.location.pathname&&(c.value?await l(c.value):c.value="")})),(0,n.watch)((()=>v["company_slug"]),(async e=>{await l(localStorage.getItem("currentCompany")??e)})),(e,t)=>{const a=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",It,[(0,n.createElementVNode)("div",Tt,[(0,n.createElementVNode)("div",At,[(0,n.createElementVNode)("div",Ut,[o.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",$t,[(0,n.createVNode)(a,{to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{class:"logo logo12333",src:`${e.publicDir}/logo/${(0,n.unref)(r)?.logo}`,alt:(0,n.unref)(r)?.logo},null,8,Ot)])),_:1})])),o.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",Pt,[(0,n.createVNode)(a,{to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{src:`${e.publicDir}/qrcode/qrcode-${e.uidn}.png`,class:"",alt:"secure-check-logo"},null,8,jt)])),_:1}),(0,n.createElementVNode)("div",Qt,[(0,n.createElementVNode)("h3",null,(0,n.toDisplayString)(e.uidn),1)]),e.isAuthenticated?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"request-btn",onClick:t[0]||(t[0]=e=>d()),role:"button"},t[1]||(t[1]=[(0,n.createElementVNode)("a",null,"Menu ",-1)]))):((0,n.openBlock)(),(0,n.createElementBlock)("div",Ft,t[2]||(t[2]=[(0,n.createElementVNode)("h3",null,"Votre QRCode a été envoyé par e-mail, Merci",-1)])))])):(0,n.createCommentVNode)("",!0)])])])])}}};const Jt=(0,C.A)(zt,[["__scopeId","data-v-6ede9443"]]);var Ht=Jt;function Wt(){const e=(0,n.ref)(null),t=(0,n.ref)(null),a=(0,n.ref)(null),o=async(n,o)=>{try{const t=await l.A.post("https://www.securecheck.info/api/create-qr",{email:n,type:o},{headers:{"Content-Type":"application/json"}});e.value=t.data,a.value=t.status}catch(r){t.value=r.response?r.response.data:r.message,a.value=r.response?r.response.status:null}};return{qrResponse:e,error:t,statusCode:a,createQR:o}}const Yt={class:"background-gradi request-meeting"},Gt={class:"container"},Kt={class:"row align-items-center mt-3"},Zt={class:"col col-12 col-md-12 col-sm-12"},Xt={key:0,class:"popup-logo"},ea=["src","alt"],ta={class:"popup-logo"},aa=["src"],na={style:{"margin-top":"40px"}},oa={class:"submit-button"},la=["disabled"],ra={key:2,style:{"margin-top":"40px"}};var ca={__name:"CreateQRCodeView",setup(e){const{showCompany:t,company:a}=i(),o=(0,n.ref)(localStorage.getItem("currentCompany")),l=(0,s.lq)(),r=(0,s.rd)(),c=(0,n.ref)(!1),{publicDir:u}=d(),p=(0,n.ref)(),f=(0,n.ref)(),E=(0,n.ref)(),{createQR:g,statusCode:h,qrResponse:V}=Wt(),N=(0,n.ref)(l.params.domain||"scb"),y=()=>{r.push({name:"Menu",params:{domain:N.value}})};(0,n.onMounted)((()=>{N.value&&r.push({name:"CreateQRCode",params:{domain:N.value}})}));const k=async()=>{await g(p.value,f.value)};return(0,n.watch)(h,(e=>{switch(e){case 200:m.oR.success(" QRCode a créé avec succès."),h.value=200,c.value=!0,console.log({qrResponse:V}),E.value=V.value.data.uidn;break;case 201:m.oR.success("QRCode a créé avec succès."),h.value=201,console.log({qrResponse:V}),E.value=V.value.data.uidn;break;case 400:m.oR.info("Bad Request - La requête est mal formée.");break;case 401:m.oR.info("Unauthorized - Vous devez être authentifié.");break;case 403:m.oR.info("Forbidden - Vous n'avez pas la permission.");break;case 404:m.oR.info("L'utilisateur n'existe pas"),h.value=null;break;case 500:m.oR.info("Internal Server Error - Une erreur interne est survenue.");break;default:}})),(0,n.onBeforeMount)((async()=>{console.log("Host:",window.location.host),console.log("Path:",window.location.pathname),"/sign-in"!=window.location.pathname&&(o.value?await t(o.value):o.value="")})),(0,n.watch)((()=>v["company_slug"]),(async e=>{await t(localStorage.getItem("currentCompany")??e)})),(e,t)=>{const o=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",Yt,[(0,n.createElementVNode)("div",Gt,[(0,n.createElementVNode)("div",Kt,[(0,n.createElementVNode)("div",Zt,[c.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",Xt,[(0,n.createVNode)(o,{to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{class:"logo logo123",src:`${(0,n.unref)(u)}/logo/${(0,n.unref)(a)?.logo}`,alt:(0,n.unref)(a)?.logo},null,8,ea)])),_:1})])),(0,n.createElementVNode)("div",{"data-v-74f17804":"",style:{"margin-top":"30px"},class:"d-flex justify-content-center align-items-center"},[(0,n.createElementVNode)("div",{"data-v-74f17804":"",class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},[(0,n.createElementVNode)("button",{class:"back",onClick:y}," Retour "),t[3]||(t[3]=(0,n.createElementVNode)("h3",{"data-v-74f17804":"",class:"text-center"}," Création QRCode ",-1))])]),(0,n.createElementVNode)("div",ta,[c.value?((0,n.openBlock)(),(0,n.createBlock)(o,{key:0,to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{src:`${(0,n.unref)(u)}/qrcode-user/qrcode-${E.value}.png`,class:"",alt:"qr"},null,8,aa)])),_:1})):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("form",{onSubmit:(0,n.withModifiers)(k,["prevent"]),class:"mt-5"},[(0,n.createElementVNode)("div",null,[t[4]||(t[4]=(0,n.createElementVNode)("label",{for:"contact"},"Email",-1)),t[5]||(t[5]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"contact","onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),class:"input_style"},null,512),[[n.vModelText,p.value]]),t[6]||(t[6]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[8]||(t[8]=(0,n.createElementVNode)("label",{for:"type_qr"},"Type de QR",-1)),t[9]||(t[9]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>f.value=e),id:"type_qr",name:"type_qr",class:"input_style"},t[7]||(t[7]=[(0,n.createElementVNode)("option",{value:"permanent"},"Permanent",-1),(0,n.createElementVNode)("option",{value:"temporaire"},"Temporaire",-1)]),512),[[n.vModelSelect,f.value]]),t[10]||(t[10]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",na,[(0,n.createElementVNode)("div",oa,[(0,n.createElementVNode)("input",{type:"submit",value:"Soumettre",disabled:e.loading},null,8,la)])])],32),e.isAuthenticated?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:1,class:"request-btn",onClick:t[2]||(t[2]=e=>y()),role:"button"},t[11]||(t[11]=[(0,n.createElementVNode)("a",null,"Menu ",-1)]))):(0,n.createCommentVNode)("",!0),c.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",ra,t[12]||(t[12]=[(0,n.createElementVNode)("h3",null,"Le QRCode a été envoyé par e-mail, Merci",-1)]))):(0,n.createCommentVNode)("",!0)])])])])])}}};const sa=(0,C.A)(ca,[["__scopeId","data-v-d40b8906"]]);var ia=sa;const ua=()=>{const e=(0,s.rd)(),t=(t,a)=>{e.push(`/${a}/${t}`)};return{goToRoute:t}};function da(){const e=(0,n.ref)(null),t=(0,n.ref)(""),a=(0,n.ref)(!1),o=(0,n.ref)(null),{baseUrl_:r}=d(),c=(0,s.rd)(),i=async(n,s)=>{if(""==n||null==n||"undefined"==typeof n)return m.oR.info("Veuillez renseigner le UIDN champ svp"),!1;a.value=!0;try{let a=r;const o=await l.A.get(`${a}/get-qr-data/${n}`,{params:{type:s}});e.value=o.data.status,t.value=o.data.message,"success"===e.value?(console.log("Succès:",t.value),m.oR.success(t.value),console.log(c)):(e.value,m.oR.error(t.value))}catch(i){o.value="Erreur lors de la vérification du QR code",console.error("API Error:",i),m.oR.error(i.response.data.message)}finally{a.value=!1}};return{status:e,message:t,loading:a,error:o,getQrData:i}}const ma={class:"background-gradi request-meeting"},pa={class:"container"},va={class:"row align-items-center"},fa={class:"col col-12 col-md-12 col-sm-12"},Ea={key:0,class:"popup-logo"},ga=["src","alt"],ha={key:1,class:"popup-logo"},Va={key:2};var Na={__name:"ManalCheckView",setup(e){const{publicDir:t}=d(),{showCompany:a,company:o}=i(),l=(0,n.ref)(localStorage.getItem("currentCompany")),r=(0,s.lq)(),c=(0,s.rd)(),u=(0,n.ref)(!1),{goToRoute:m}=ua(),{getQrData:p,status:f}=da(),E=(0,n.ref)(),g=async()=>{try{await p(E.value,1),u.value=200==f.value,console.log(r)}catch(e){console.error("Failed to update request:",e)}},h=(0,n.ref)(r.params.domain||"scb"),V=()=>{c.push({name:"Menu",params:{domain:h.value}})};return(0,n.onMounted)((()=>{h.value&&c.push({name:"ManalCheck",params:{domain:h.value}})})),(0,n.onBeforeMount)((async()=>{console.log("Host:",window.location.host),console.log("Path:",window.location.pathname),"/sign-in"!=window.location.pathname&&(l.value?await a(l.value):l.value="")})),(0,n.watch)((()=>v["company_slug"]),(async e=>{await a(localStorage.getItem("currentCompany")??e)})),(e,a)=>{const l=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",ma,[(0,n.createElementVNode)("div",pa,[(0,n.createElementVNode)("div",va,[(0,n.createElementVNode)("div",fa,[u.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",Ea,[(0,n.createVNode)(l,{to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{class:"logo logo12333",src:`${(0,n.unref)(t)}/logo/${(0,n.unref)(o)?.logo}`,alt:(0,n.unref)(o)?.logo},null,8,ga)])),_:1})])),u.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",ha,[a[5]||(a[5]=(0,n.createElementVNode)("div",{class:"text-center py-2"},[(0,n.createElementVNode)("h3",null,"Bien éffectué")],-1)),(0,n.createElementVNode)("div",{class:"request-btn",onClick:a[0]||(a[0]=e=>(0,n.unref)(m)("/"))},a[4]||(a[4]=[(0,n.createElementVNode)("a",null,"Accueil ",-1)]))])):(0,n.createCommentVNode)("",!0),u.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",Va,[(0,n.createElementVNode)("div",{class:"d-flex justify-content-center align-items-center"},[(0,n.createElementVNode)("div",{class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},[(0,n.createElementVNode)("button",{class:"back",onClick:V}," Retour "),a[6]||(a[6]=(0,n.createElementVNode)("h3",{class:"text-center py-3"},"Validation Manuelle UIDN",-1))])]),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",name:"uidn",id:"uidn",class:"uidn","onUpdate:modelValue":a[1]||(a[1]=e=>E.value=e),placeholder:"ENTREZ UUID",required:""},null,512),[[n.vModelText,E.value]]),e.isLoading?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"request-btn",onClick:a[2]||(a[2]=(0,n.withModifiers)((e=>g()),["prevent"]))},a[7]||(a[7]=[(0,n.createElementVNode)("a",{role:"button"},"Valider ",-1)]))),(0,n.createElementVNode)("div",{class:"request-btn",onClick:a[3]||(a[3]=e=>V())},a[8]||(a[8]=[(0,n.createElementVNode)("a",{role:"button"},"Menu ",-1)]))]))])])])])}}};const ya=(0,C.A)(Na,[["__scopeId","data-v-51edbbe3"]]);var ka=ya;function ba(){const e=(0,n.ref)([]),t=(0,n.ref)(!1),a=(0,n.ref)(null),o=async()=>{t.value=!0,a.value=null;try{const t=await c.get("/user/list");e.value=t.data,console.log()}catch(n){a.value="Erreur lors de la récupération des utilisateurs."}finally{t.value=!1}},l=async n=>{t.value=!0,a.value=null;try{const t=await c.get("/user/list/"+n);e.value=t.data,console.log()}catch(o){a.value="Erreur lors de la récupération des utilisateurs."}finally{t.value=!1}};return{users:e,loading:t,error:a,fetchUsers:o,fetchUsersComp:l}}const wa={class:"container"},Ca={class:"d-flex justify-content-center py-3"},_a={key:0},Ba={key:1};var Ra={__name:"ListUserView",setup(e){const{fetchUsers:t,fetchUsersComp:a,users:o,loading:l,error:r}=ba(),c=(0,s.rd)(),i=e=>{const t=new Date(e);return t.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})},u=(0,n.ref)(["ID","Nom","Email"]),d=(0,n.ref)(["id","name","email"]),m=(0,s.lq)(),v=(0,n.ref)(m.params.domain||"scb"),f=()=>{c.push({name:"Menu",params:{domain:v.value}})},E=(0,n.ref)(JSON.parse(localStorage.getItem("userInfo"))||{}),g=p(),h=(0,n.ref)(E?.value?.roles?E.value.roles[0]:"");return(0,n.onMounted)((async()=>{g.isAdmin(h.value)?await t():await a(v.value)})),(e,t)=>{const a=(0,n.resolveComponent)("ui-table");return(0,n.openBlock)(),(0,n.createElementBlock)("div",wa,[(0,n.createElementVNode)("div",{class:"d-flex justify-content-center align-items-center"},[(0,n.createElementVNode)("div",{class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},[(0,n.createElementVNode)("button",{class:"back",onClick:f},"Retour"),t[0]||(t[0]=(0,n.createElementVNode)("h3",{class:"text-center"},"Liste des Utilisateurs",-1))])]),(0,n.createElementVNode)("div",Ca,[(0,n.createVNode)(a,{data:(0,n.unref)(o),thead:u.value,tbody:d.value},{create_at:(0,n.withCtx)((({row:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(i(e?.create_at)),1)])),_:1},8,["data","thead","tbody"])]),(0,n.unref)(l)?((0,n.openBlock)(),(0,n.createElementBlock)("div",_a,"Chargement des utilisateurs...")):(0,n.createCommentVNode)("",!0),(0,n.unref)(r)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ba,(0,n.toDisplayString)((0,n.unref)(r)),1)):(0,n.createCommentVNode)("",!0)])}}};const Sa=(0,C.A)(Ra,[["__scopeId","data-v-50082166"]]);var xa=Sa;const Ma={class:"request-meeting"},Da={class:"background-gradi"},qa={class:"request-meeting meeting-form"},La={class:"row align-items-center"},Ia={class:"col col-12 col-md-12 col-sm-12"},Ta={key:0,class:"d-flex justify-content-center"},Aa=["src"],Ua=["value"],$a={class:"submit-button"},Oa=["disabled"],Pa={key:0,class:"error"};var ja={__name:"EventView",setup(e){const{company:t}=d(),{showCompany:a,companies:o,fetchCompanies:l}=i(),r=(0,n.ref)(""),c=(0,n.ref)(),u=JSON.parse(localStorage.getItem("userInfo")),v=(0,n.ref)();v.value=u,c.value=v.value?.roles[0];const f=u.company??"",{createEvent:E,statusCode:g}=Ve(),{publicDir:h}=d(),V=p(),N=V.isAuthenticated(),y=(0,s.rd)(),k=(0,s.lq)(),b=(0,n.ref)(!1),w=(0,n.ref)(k.params.domain||"scb"),C=()=>{y.push({name:"Menu",params:{domain:w.value}})};(0,n.onMounted)((async()=>{await l()}));const _=(0,n.ref)({company_id:"",name:"",location:"",date_event:"",time_event:"14:30",departement_id:1}),B=async()=>{b.value=!0;try{await E(_.value)}catch(e){r.value=`Erreur: ${e.message}`}finally{b.value=!1}};return(0,n.onBeforeMount)((async()=>{try{let e=localStorage.getItem("currentCompany")??w?.value;console.log("Retrieved company_slug:",e),e?(console.log("Calling showCompany with:",e),await a(e)):(console.log("No company_slug found, setting company_slug to empty string."),e=""),N||(m.oR.info("L'utilisateur doit être connecté"),setTimeout((()=>{y.push({name:"RequestMeeting",params:{domain:w?.value}})}),1500))}catch(e){console.error("Error occurred during onBeforeMount:",e),m.oR.error("Erreur lors du chargement des données.")}})),(0,n.watch)(g,(e=>{switch(e){case 201:case 200:m.oR.success("Evénements ajouté"),setTimeout((()=>y.push({name:"Menu",params:{domain:w.value}})),1500);break;case 400:m.oR.info("La requête est mal formée.");break;case 401:m.oR.info("Vous devez être authentifié.");break;case 403:m.oR.info("Vous n'avez pas la permission.");break;case 404:m.oR.info("La ressource demandée n'existe pas.");break;case 500:m.oR.info("Une erreur interne est survenue.");break;default:m.oR.info(`Code : ${e}`)}})),(e,a)=>((0,n.openBlock)(),(0,n.createElementBlock)("section",Ma,[(0,n.createElementVNode)("div",Da,[(0,n.createElementVNode)("section",qa,[(0,n.createElementVNode)("div",La,[(0,n.createElementVNode)("div",Ia,[(0,n.createElementVNode)("div",{class:"d-flex justify-content-center align-items-center"},[(0,n.createElementVNode)("div",{class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},[(0,n.createElementVNode)("button",{class:"back",onClick:C},"Retour"),a[7]||(a[7]=(0,n.createElementVNode)("h3",{class:"mt-3"},"Création Évènement",-1))])]),(0,n.unref)(t)?.logo?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ta,[(0,n.createElementVNode)("img",{src:`${(0,n.unref)(h)}/logo/${(0,n.unref)(t)?.logo}`,height:"100",width:"100"},null,8,Aa)])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("form",{onSubmit:(0,n.withModifiers)(B,["prevent"])},[(0,n.createElementVNode)("div",null,[a[8]||(a[8]=(0,n.createElementVNode)("label",{for:"company_id"},"Entreprise",-1)),a[9]||(a[9]=(0,n.createElementVNode)("br",null,null,-1)),"ROLE_SUPERVISOR"===c.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("input",{key:0,disabled:"",type:"text",id:"name","onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.isRef)(f)?f.value=e:null),required:""},null,512)),[[n.vModelText,(0,n.unref)(f)]]):(0,n.createCommentVNode)("",!0),a[10]||(a[10]=(0,n.createElementVNode)("br",null,null,-1)),"ROLE_SUPERVISOR"!==c.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("select",{key:1,id:"company_id","onUpdate:modelValue":a[1]||(a[1]=e=>_.value.company_id=e),class:"form-control"},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(o),(e=>((0,n.openBlock)(),(0,n.createElementBlock)("option",{key:e.id,value:e.id},(0,n.toDisplayString)(e.name),9,Ua)))),128))],512)),[[n.vModelSelect,_.value.company_id]]):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",null,[a[11]||(a[11]=(0,n.createElementVNode)("label",{for:"name"},"Nom de l'événement",-1)),a[12]||(a[12]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"name","onUpdate:modelValue":a[2]||(a[2]=e=>_.value.name=e),placeholder:"Diner Gala SIKIHHK",required:""},null,512),[[n.vModelText,_.value.name]]),a[13]||(a[13]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[a[14]||(a[14]=(0,n.createElementVNode)("label",{for:"location"},"Lieu de l'événement",-1)),a[15]||(a[15]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"location","onUpdate:modelValue":a[3]||(a[3]=e=>_.value.location=e),placeholder:"SOCOCE",required:""},null,512),[[n.vModelText,_.value.location]]),a[16]||(a[16]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[a[17]||(a[17]=(0,n.createElementVNode)("label",{for:"address_name"},"Adresse",-1)),a[18]||(a[18]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"address_name","onUpdate:modelValue":a[4]||(a[4]=e=>_.value.address_name=e),placeholder:"Marcory",required:""},null,512),[[n.vModelText,_.value.address_name]]),a[19]||(a[19]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[a[20]||(a[20]=(0,n.createElementVNode)("label",{for:"date_event"},"Date de l'événement",-1)),a[21]||(a[21]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"date",id:"date_event","onUpdate:modelValue":a[5]||(a[5]=e=>_.value.date_event=e),placeholder:"2024-10-08",required:""},null,512),[[n.vModelText,_.value.date_event]]),a[22]||(a[22]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[a[23]||(a[23]=(0,n.createElementVNode)("label",{for:"time_event"},"Heure de l'événement",-1)),a[24]||(a[24]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"time",id:"time_event","onUpdate:modelValue":a[6]||(a[6]=e=>_.value.time_event=e),required:""},null,512),[[n.vModelText,_.value.time_event]]),a[25]||(a[25]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",$a,[(0,n.createElementVNode)("input",{type:"submit",value:"Soumettre",disabled:b.value},null,8,Oa)]),r.value?((0,n.openBlock)(),(0,n.createElementBlock)("p",Pa,(0,n.toDisplayString)(r.value),1)):(0,n.createCommentVNode)("",!0)],32)])])])])]))}};const Qa=ja;var Fa=Qa;const za=()=>{const e=e=>{const t=new Date(e);return t.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},t=e=>{const t=new Date(e);return t.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})},a=e=>{const t=new Date(e),a=t.getHours().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");return`${a}:${n}`};return{formatDate:t,formatDateHour:e,formatTime:a}};function Ja(){const e=(0,n.ref)([]),t=(0,n.ref)(!1),a=(0,n.ref)(null),o=async()=>{t.value=!0,a.value=null;try{const t=await c.get("/evenement/list");e.value=t.data,console.log()}catch(n){a.value="Erreur lors de la récupération des events."}finally{t.value=!1}},l=async n=>{t.value=!0,a.value=null;try{const t=await c.get("/evenement/list/"+n);e.value=t.data,console.log()}catch(o){a.value="Erreur lors de la récupération des utilisateurs."}finally{t.value=!1}};return{events:e,loading:t,error:a,fetchEvents:o,fetchEventsByComp:l}}const Ha={class:"container"},Wa={class:"d-flex justify-content-center align-items-center"},Ya={class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},Ga={key:0},Ka={class:"d-flex justify-content-center"},Za={class:"d-flex justify-content-center"},Xa={key:1,class:"d-flex justify-content-center py-3"},en=["onClick","src","alt"],tn={key:1},an={key:2,class:"d-flex justify-content-center"},nn={key:3,class:"d-flex justify-content-center"};var on={__name:"EventListView",setup(e){const{events:t,loading:a,error:o,fetchEventsByComp:l,fetchEvents:r}=Ja(),{formatDate:c,formatTime:i}=za(),{publicDir:u}=d(),v=(0,n.ref)(["ID","Entreprise","Nom","Lieu","Date","Heure","Département","Date de Création","Lien","Participants","QRCode"]),f=(0,n.ref)(["id",{slot:"company"},"name","location",{slot:"date_event"},{slot:"time_event"},{slot:"departement"},{slot:"created_at"},{slot:"link"},{slot:"participants"},{slot:"QRCode"}]),E=(0,n.ref)([]),g=(0,n.ref)(!1),h=(0,s.rd)(),V=(0,s.lq)(),N=(0,n.ref)(V.params.domain||"scb"),y=e=>{h.push({name:"ListQrcodeEvents",params:{domain:N.value,slug:e}})},k=e=>{console.log({domain:N.value,slug:e}),h.push({name:"ShowEventQRcode",params:{domain:N.value,slug:e}})},b=e=>{const t=(0,n.ref)(!1);let a={NODE_ENV:"production",VUE_APP_API_URL:"https://www.securecheck.info/api/public/index.php/api",BASE_URL:"/"}.FRONT_URL??window.location.host,o=`${a}/company/${e.company.slug}/event/${e.slug}`;navigator.clipboard.writeText(o).then((()=>{t.value=!0,m.oR.info("Texte Copié"),setTimeout((()=>{t.value=!1}),2e3)})).catch((e=>{console.error("Échec de la copie : ",e)}))},w=()=>{h.push({name:"Menu",params:{domain:N.value}})},C=(0,n.ref)(JSON.parse(localStorage.getItem("userInfo"))||{}),_=p(),B=(0,n.ref)(C?.value?.roles?C.value.roles[0]:"");return(0,n.onMounted)((()=>{_.isAdmin(B.value)||_.isSecureCheck(B.value)?r():l(N.value),N.value&&h.push({name:"EventList",params:{domain:N.value}})})),(e,l)=>{const r=(0,n.resolveComponent)("ui-item-text-content"),s=(0,n.resolveComponent)("ui-item"),d=(0,n.resolveComponent)("ui-list"),m=(0,n.resolveComponent)("ui-icon"),p=(0,n.resolveComponent)("ui-table");return(0,n.openBlock)(),(0,n.createElementBlock)("div",Ha,[(0,n.createElementVNode)("div",Wa,[(0,n.createElementVNode)("div",Ya,[(0,n.createElementVNode)("button",{class:"back",onClick:l[0]||(l[0]=e=>w())},"Retour"),l[2]||(l[2]=(0,n.createElementVNode)("h3",{class:"text-center"},"Liste des Evenements",-1))])]),g.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ga,[(0,n.createElementVNode)("div",Ka,[(0,n.createVNode)(d,null,{default:(0,n.withCtx)((()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(E.value,(e=>((0,n.openBlock)(),(0,n.createBlock)(s,{key:e},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(r,null,{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.email),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})]),(0,n.createElementVNode)("div",Za,[(0,n.createElementVNode)("a",{class:"request-btn",onClick:l[1]||(l[1]=(...t)=>e.retour&&e.retour(...t)),role:"button"}," Retour ")])])):(0,n.createCommentVNode)("",!0),g.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",Xa,[(0,n.createVNode)(p,{data:(0,n.unref)(t),thead:v.value,tbody:f.value},{departement:(0,n.withCtx)((({data:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.departement.name),1)])),date_event:(0,n.withCtx)((({data:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(c)(e.date_event)),1)])),time_event:(0,n.withCtx)((({data:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(i)(e.time_event)),1)])),company:(0,n.withCtx)((({data:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.company.name),1)])),created_at:(0,n.withCtx)((({data:e})=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(c)(e.created_at)),1)])),link:(0,n.withCtx)((({data:e})=>[(0,n.createVNode)(m,{role:"button",onClick:t=>b(e)},{default:(0,n.withCtx)((()=>l[3]||(l[3]=[(0,n.createTextVNode)(" content_copy ")]))),_:2},1032,["onClick"])])),participants:(0,n.withCtx)((({data:e})=>[(0,n.createVNode)(m,{role:"button",onClick:t=>y(e.slug)},{default:(0,n.withCtx)((()=>l[4]||(l[4]=[(0,n.createTextVNode)(" groups ")]))),_:2},1032,["onClick"])])),QRCode:(0,n.withCtx)((({data:e})=>[e?.slug?((0,n.openBlock)(),(0,n.createElementBlock)("img",{key:0,role:"button",onClick:t=>k(e?.slug),src:`${(0,n.unref)(u)}/qrcode-link/qrcode-${e?.slug}.png`,class:"",height:"50",width:"50",style:{"margin-top":"20px","margin-bottom":"20px"},alt:e.slug},null,8,en)):((0,n.openBlock)(),(0,n.createElementBlock)("p",tn,"Pas de QRcode"))])),_:1},8,["data","thead","tbody"])])),(0,n.unref)(a)?((0,n.openBlock)(),(0,n.createElementBlock)("div",an," Chargement des évènements... ")):(0,n.createCommentVNode)("",!0),(0,n.unref)(o)?((0,n.openBlock)(),(0,n.createElementBlock)("div",nn,(0,n.toDisplayString)((0,n.unref)(o)),1)):(0,n.createCommentVNode)("",!0)])}}};const ln=(0,C.A)(on,[["__scopeId","data-v-200b8593"]]);var rn=ln,cn=a.p+"img/success-svgrepo-com.e963a910.svg";const sn={class:"background-gradi request-meeting"},un={class:"container"},dn={class:"row align-items-center"},mn={class:"col col-12 col-md-12 col-sm-12"},pn={class:"popup-logo"},vn=["alt"];var fn={__name:"SuccessCheckoutView",setup(e){const{publicDir:t}=d(),a=(0,s.lq)(),o=(0,s.rd)();return(0,n.onMounted)((()=>{a.params.uidn?m.oR.info("Bien joué"):o.push("/")})),(e,a)=>{const o=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",sn,[(0,n.createElementVNode)("div",un,[(0,n.createElementVNode)("div",dn,[(0,n.createElementVNode)("div",mn,[(0,n.createElementVNode)("div",pn,[(0,n.createVNode)(o,{to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{src:cn,class:"",alt:`${(0,n.unref)(t)}/qrcode/qrcode-${e.uidn}.png`},null,8,vn)])),_:1}),a[0]||(a[0]=(0,n.createElementVNode)("div",{class:"text-center py-2"},[(0,n.createElementVNode)("h3",null,"CheckOut éffectué")],-1))])])])])])}}};const En=(0,C.A)(fn,[["__scopeId","data-v-036fb276"]]);var gn=En;const hn={class:"background-gradi request-meeting"},Vn={class:"container"},Nn={class:"row align-items-center"},yn={class:"col col-12 col-md-12 col-sm-12"},kn={class:"popup-logo"},bn=["alt"];var wn={__name:"SuccessCheckinView",setup(e){const{publicDir:t}=d(),a=(0,s.lq)(),o=(0,s.rd)();return(0,n.onMounted)((()=>{a.params.uidn?m.oR.info("Bien joué"):o.push("/")})),(e,a)=>{const o=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",hn,[(0,n.createElementVNode)("div",Vn,[(0,n.createElementVNode)("div",Nn,[(0,n.createElementVNode)("div",yn,[(0,n.createElementVNode)("div",kn,[(0,n.createVNode)(o,{to:"/"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{src:cn,class:"",alt:`${(0,n.unref)(t)}/qrcode/qrcode-${e.uidn}.png`},null,8,bn)])),_:1}),a[0]||(a[0]=(0,n.createElementVNode)("div",{class:"text-center py-2"},[(0,n.createElementVNode)("h3",null,"CheckIn éffectué")],-1))])])])])])}}};const Cn=(0,C.A)(wn,[["__scopeId","data-v-24684a47"]]);var _n=Cn;const Bn={class:"request-meeting"},Rn={class:"background-gradi"},Sn={class:"request-meeting meeting-form"},xn={class:"row align-items-center"},Mn={class:"col col-12 col-md-12 col-sm-12"},Dn={key:0,class:"submit-button"},qn=["disabled"],Ln={key:1,class:"error"};var In={__name:"CreateCompanyView",setup(e){const t=(0,n.ref)(),a=(0,n.ref)();a.value=JSON.parse(localStorage.getItem("userInfo")),t.value=a.value?.roles[0];const{userInfo:o,fetchUserInfo:l}=ge(),{postCompany:r,showCompany:c,company:u,statusCode:d}=i(),v=p(),f=v.isAuthenticated(),E=(0,s.rd)(),g=(0,n.ref)(),h=(0,n.ref)(""),V=(0,n.ref)({name:"",description:""}),N=e=>{const t=e.target.files[0];t?(V.value.logo=t,g.value=t.name):h.value="Veuillez selectionnez un fichier valide"},y=(0,n.ref)(!1),k=async()=>{try{await r(V.value),console.log(u)}catch(e){h.value=`Erreur: ${e.message}`}finally{y.value=!1}};(0,n.watch)(d,(e=>{switch(e){case 201:m.oR.success("Entreprise créé avec succès."),setTimeout((()=>{E.push("/menu")}),1500);break;case 200:m.oR.success("Entreprise créé avec succès."),setTimeout((()=>{E.push("/menu")}),1500);break;case 400:m.oR.info("La requête est mal formée.");break;case 401:m.oR.info("Vous devez être authentifié."),setTimeout((()=>{E.push("/")}),1500);break;case 403:m.oR.info("Vous n'avez pas la permission.");break;case 404:m.oR.info("La ressource demandée n'existe pas.");break;case 500:m.oR.info("Une erreur interne est survenue.");break;default:m.oR.info(`Code : ${e}`)}}));const b=(0,s.lq)(),w=(0,n.ref)(b.params.domain||"scb"),C=()=>{E.push({name:"Menu",params:{domain:w.value}})};return(0,n.onBeforeMount)((async()=>{b?.params?.company_edit&&c(b.params.slug),await l(),console.log({userInfo:o})})),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("section",Bn,[(0,n.createElementVNode)("div",Rn,[(0,n.createElementVNode)("section",Sn,[(0,n.createElementVNode)("div",xn,[(0,n.createElementVNode)("div",Mn,[(0,n.createElementVNode)("div",{class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},[(0,n.createElementVNode)("button",{class:"back",onClick:C},"Retour"),t[2]||(t[2]=(0,n.createElementVNode)("h3",null,"Création Entreprise",-1))]),(0,n.createElementVNode)("form",{onSubmit:(0,n.withModifiers)(k,["prevent"]),enctype:"multipart/form-data"},[(0,n.createElementVNode)("div",null,[t[3]||(t[3]=(0,n.createElementVNode)("label",{for:"logo"},"Logo",-1)),t[4]||(t[4]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.createElementVNode)("input",{type:"file",id:"logo",onChange:N,required:"",class:(0,n.normalizeClass)({error:h.value})},null,34),t[5]||(t[5]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[6]||(t[6]=(0,n.createElementVNode)("label",{for:"name"},"Nom",-1)),t[7]||(t[7]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>V.value.name=e),required:""},null,512),[[n.vModelText,V.value.name]]),t[8]||(t[8]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[9]||(t[9]=(0,n.createElementVNode)("label",{for:"description"},"Description ",-1)),t[10]||(t[10]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"description",id:"description","onUpdate:modelValue":t[1]||(t[1]=e=>V.value.description=e),required:""},null,512),[[n.vModelText,V.value.description]]),t[11]||(t[11]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.unref)(f)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Dn,[(0,n.createElementVNode)("input",{type:"submit",value:"Soumettre",disabled:y.value},null,8,qn)])):(0,n.createCommentVNode)("",!0),h.value?((0,n.openBlock)(),(0,n.createElementBlock)("p",Ln,(0,n.toDisplayString)(h.value),1)):(0,n.createCommentVNode)("",!0)],32)])])])])]))}};const Tn=(0,C.A)(In,[["__scopeId","data-v-5bf10c9a"]]);var An=Tn;const Un={class:"request-meeting"},$n={class:"background-gradi"},On={class:"request-meeting meeting-form"},Pn={class:"row align-items-center"},jn={class:"col col-12 col-md-12 col-sm-12"},Qn={key:0,class:"submit-button"},Fn=["disabled"],zn={key:1,class:"error"};var Jn={__name:"EditCompanyView",setup(e){const t=(0,n.ref)(),a=(0,n.ref)();a.value=JSON.parse(localStorage.getItem("userInfo")),t.value=a.value?.roles[0];const{userInfo:o,fetchUserInfo:l}=ge(),{showCompany:r,updateCompany:c,company:u,statusCode:d}=i(),v=p(),f=v.isAuthenticated(),E=(0,s.rd)(),g=(0,n.ref)(),h=(0,n.ref)(""),V=(0,n.ref)({id:"",name:"",description:""}),N=e=>{const t=e.target.files[0];t?(V.value.logo=t,g.value=t.name):h.value="Veuillez selectionnez un fichier valide"},y=(0,n.ref)(!1),k=async()=>{try{await c(V.value,V.value.id)}catch(e){h.value=`Erreur: ${e.message}`}finally{y.value=!1}};(0,n.watch)(d,(e=>{switch(e){case 201:m.oR.success("Mise à jour éffectué."),setTimeout((()=>{E.push("/menu")}),1500);break;case 200:m.oR.success("Mise à jour éffectué."),setTimeout((()=>{E.push("/menu")}),1500);break;case 400:m.oR.info("La requête est mal formée.");break;case 401:m.oR.info("Vous devez être authentifié."),setTimeout((()=>{E.push("/")}),1500);break;case 403:m.oR.info("Vous n'avez pas la permission.");break;case 404:m.oR.info("La ressource demandée n'existe pas.");break;case 500:m.oR.info("Une erreur interne est survenue.");break;default:m.oR.info(`Code : ${e}`)}}));const b=(0,s.lq)(),w=(0,n.ref)(b.params.domain||"scb"),C=()=>{E.push({name:"Menu",params:{domain:w.value}})};return(0,n.onBeforeMount)((async()=>{b?.params?.company_edit&&(await r(w.value),V.value=u.value),await l(),console.log({userInfo:o})})),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("section",Un,[(0,n.createElementVNode)("div",$n,[(0,n.createElementVNode)("section",On,[(0,n.createElementVNode)("div",Pn,[(0,n.createElementVNode)("div",jn,[(0,n.createElementVNode)("div",{class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},[(0,n.createElementVNode)("button",{class:"back",onClick:C},"Retour"),t[2]||(t[2]=(0,n.createElementVNode)("h3",null,"Editer Entreprise",-1))]),(0,n.createElementVNode)("form",{onSubmit:(0,n.withModifiers)(k,["prevent"]),enctype:"multipart/form-data"},[(0,n.createElementVNode)("div",null,[t[3]||(t[3]=(0,n.createElementVNode)("label",{for:"logo"},"Logo",-1)),t[4]||(t[4]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.createElementVNode)("input",{type:"file",id:"logo",onChange:N,class:(0,n.normalizeClass)({error:h.value})},null,34),t[5]||(t[5]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[6]||(t[6]=(0,n.createElementVNode)("label",{for:"name"},"Nom",-1)),t[7]||(t[7]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>V.value.name=e),required:""},null,512),[[n.vModelText,V.value.name]]),t[8]||(t[8]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.createElementVNode)("div",null,[t[9]||(t[9]=(0,n.createElementVNode)("label",{for:"description"},"Description ",-1)),t[10]||(t[10]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"description",id:"description","onUpdate:modelValue":t[1]||(t[1]=e=>V.value.description=e),required:""},null,512),[[n.vModelText,V.value.description]]),t[11]||(t[11]=(0,n.createElementVNode)("br",null,null,-1))]),(0,n.unref)(f)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Qn,[(0,n.createElementVNode)("input",{type:"submit",value:"Soumettre",disabled:y.value},null,8,Fn)])):(0,n.createCommentVNode)("",!0),h.value?((0,n.openBlock)(),(0,n.createElementBlock)("p",zn,(0,n.toDisplayString)(h.value),1)):(0,n.createCommentVNode)("",!0)],32)])])])])]))}};const Hn=(0,C.A)(Jn,[["__scopeId","data-v-dc5a3754"]]);var Wn=Hn,Yn=a(7687),Gn=a.n(Yn);const Kn={class:"background-gradi request-meeting"},Zn={class:"container"},Xn={class:"row align-items-center"},eo={class:"popup-logo"},to={class:"event_datetime"},ao={class:"event-title"},no={class:"event-title"},oo={class:"event-details"},lo={style:{display:"none"}},ro={class:"event-title"},co={class:"event-title"},so={class:"event-title"},io={class:"event-title"},uo=["src","alt"],mo=["src"];var po={__name:"ShowEventQRcodeView",setup(e){const t=p(),a=(0,s.lq)(),{showEvent:o,event:l}=Ve(),{company:r,showCompany:c}=i(),{publicDir:u}=d(),m=(0,s.rd)(),v=()=>{m.push({name:"Menu",params:{domain:y.value,id:a.params.id}})},f=(0,n.ref)(null),E=(0,n.ref)(null),g=()=>{if(f.value){const e=f.value.querySelectorAll("img"),t=Array.from(e).map((e=>new Promise((t=>{e.complete?t():(e.onload=t,e.onerror=t)}))));Promise.all(t).then((()=>{Gn()(f.value,{useCORS:!0}).then((e=>{const t=e.toDataURL("image/png");E.value=t;const a=document.createElement("a");a.href=t,a.download=`event-${y.value}.png`,document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}))}},{formatDate:h,formatTime:V}=za(),N=t.isAuthenticated(),y=(0,n.ref)(a.params.domain||"scb");return(0,n.onMounted)((()=>{o(a.params.slug),c(y.value),y.value&&m.push({name:"ShowEventQRcode",params:{domain:y.value,slug:a.params.slug}})})),(e,t)=>{const o=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("section",Kn,[(0,n.createElementVNode)("div",Zn,[(0,n.createElementVNode)("div",Xn,[(0,n.createElementVNode)("div",{class:"col col-12 col-md-12 col-sm-12 event-details event_details_main",ref_key:"capture",ref:f},[(0,n.createElementVNode)("div",eo,[t[12]||(t[12]=(0,n.createElementVNode)("div",null,null,-1)),(0,n.createElementVNode)("div",to,[(0,n.createElementVNode)("h3",ao,(0,n.toDisplayString)((0,n.unref)(V)((0,n.unref)(l)?.time_event)),1),(0,n.createElementVNode)("h3",no,(0,n.toDisplayString)((0,n.unref)(h)((0,n.unref)(l)?.date_event)),1)]),(0,n.createElementVNode)("div",oo,[(0,n.createElementVNode)("div",lo,[t[1]||(t[1]=(0,n.createElementVNode)("b",null," Entreprise",-1)),t[2]||(t[2]=(0,n.createTextVNode)()),(0,n.createElementVNode)("h3",ro,(0,n.toDisplayString)((0,n.unref)(r)?.name),1)]),(0,n.createElementVNode)("div",null,[t[3]||(t[3]=(0,n.createElementVNode)("b",null," Entreprise",-1)),t[4]||(t[4]=(0,n.createTextVNode)()),(0,n.createElementVNode)("h3",co,(0,n.toDisplayString)((0,n.unref)(l)?.company?.name),1)]),(0,n.createElementVNode)("div",null,[t[5]||(t[5]=(0,n.createElementVNode)("b",null," Event Name",-1)),t[6]||(t[6]=(0,n.createTextVNode)()),(0,n.createElementVNode)("h3",so,(0,n.toDisplayString)((0,n.unref)(l)?.name),1)]),(0,n.createElementVNode)("div",null,[t[7]||(t[7]=(0,n.createElementVNode)("b",null," Where ",-1)),t[8]||(t[8]=(0,n.createTextVNode)()),(0,n.createElementVNode)("h3",io,(0,n.toDisplayString)((0,n.unref)(l)?.location),1)]),t[9]||(t[9]=(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("b",null," Ticket "),(0,n.createTextVNode)(),(0,n.createElementVNode)("h3",{class:"event-title"},"Summit Registartion")],-1))]),(0,n.createElementVNode)("div",null,[(0,n.createVNode)(o,{to:`/${(0,n.unref)(a).params.slug}`},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("img",{src:`${(0,n.unref)(u)}/qrcode-link/qrcode-${(0,n.unref)(a).params.slug}.png`,class:(0,n.normalizeClass)((0,n.unref)(a).params.slug),alt:(0,n.unref)(a).params.slug},null,10,uo)])),_:1},8,["to"])]),E.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("img",{key:0,src:E.value,alt:"Captured Image"},null,8,mo)),[[n.vShow,!1]]):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",{class:"request-btn",onClick:g,role:"button"},t[10]||(t[10]=[(0,n.createElementVNode)("a",null,"Capture ",-1)])),(0,n.unref)(N)?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:1,class:"request-btn",onClick:t[0]||(t[0]=e=>v()),role:"button"},t[11]||(t[11]=[(0,n.createElementVNode)("a",null,"Menu ",-1)]))):(0,n.createCommentVNode)("",!0)])],512)])])])}}};const vo=(0,C.A)(po,[["__scopeId","data-v-70df9e12"]]);var fo=vo;const Eo={ref:"video",width:"640",height:"480",autoplay:""},go={ref:"canvas",width:"640",height:"480",style:{display:"none"}};function ho(e,t,a,o,l,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[t[0]||(t[0]=(0,n.createElementVNode)("h1",null,"Login with QR Code",-1)),(0,n.createElementVNode)("video",Eo,null,512),(0,n.createElementVNode)("canvas",go,null,512),(0,n.createElementVNode)("p",null,(0,n.toDisplayString)(l.qrResult),1),(0,n.createElementVNode)("p",null,(0,n.toDisplayString)(l.status),1)])}var Vo=a(4025),No=a.n(Vo),yo={data(){return{qrResult:"Waiting for QR code...",status:"Status: Logged Out",stream:null,loggedIn:!1,currentUser:"",scanInProgress:!1}},mounted(){this.startCamera()},methods:{startCamera(){const e=this.$refs.video;navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then((t=>{this.stream=t,e.srcObject=t,e.play(),this.scanQRCode()})).catch((e=>{console.error("Error accessing camera: ",e)}))},scanQRCode(){const e=this.$refs.video,t=this.$refs.canvas,a=t.getContext("2d"),n=()=>{if(!this.scanInProgress){this.scanInProgress=!0,a.drawImage(e,0,0,t.width,t.height);const n=a.getImageData(0,0,t.width,t.height),o=No()(n.data,t.width,t.height);if(console.log(o),o){const e=o.data;console.log(e),this.isValidEmail(e)?this.handleLoginLogout(e):this.qrResult=`QR Code detected but is not a valid email: ${e}`}else this.qrResult="No QR code detected.";setTimeout((()=>{this.scanInProgress=!1}),1e3)}setTimeout((()=>requestAnimationFrame(n)),500)};requestAnimationFrame(n)},handleLoginLogout(e){this.loggedIn?this.loggedIn&&this.currentUser===e?(this.loggedIn=!1,this.currentUser="",this.status="Status: Logged Out",this.qrResult="Logout successful!"):this.qrResult=`Already logged in as ${this.currentUser}. Please log out first.`:(this.loggedIn=!0,this.currentUser=e,this.status=`Status: Logged In as ${e}`,this.qrResult=`Login successful for ${e}`),this.scanInProgress=!0,setTimeout((()=>{this.scanInProgress=!1}),2e3)},isValidEmail(e){const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)}},beforeUnmount(){if(this.stream){const e=this.stream.getTracks();e.forEach((e=>e.stop()))}}};const ko=(0,C.A)(yo,[["render",ho],["__scopeId","data-v-16e46c4a"]]);var bo=ko;const wo={class:"container"},Co={class:"d-flex justify-content-center align-items-center"},_o={class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},Bo={key:0,class:"mt-3"},Ro={key:1,class:"mt-3"},So={class:"text-center"},xo={key:0},Mo={class:"d-flex justify-content-center py-3"},Do={key:0,class:"table table-striped"};function qo(e,t,a,o,l,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",wo,[(0,n.createElementVNode)("div",Co,[(0,n.createElementVNode)("div",_o,[(0,n.createElementVNode)("button",{class:"back",onClick:t[0]||(t[0]=e=>o.goToMenu())},"Retour"),e.route?.params?.slug?((0,n.openBlock)(),(0,n.createElementBlock)("h3",Bo,"Liste Participants")):((0,n.openBlock)(),(0,n.createElementBlock)("h3",Ro,"Lista de Check in"))])]),(0,n.createElementVNode)("div",So,[e.route?.params?.slug?((0,n.openBlock)(),(0,n.createElementBlock)("h4",xo,"Evenements : "+(0,n.toDisplayString)(e.event?.name),1)):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",Mo,[o.visitorLogs.length?((0,n.openBlock)(),(0,n.createElementBlock)("table",Do,[t[1]||(t[1]=(0,n.createElementVNode)("thead",null,[(0,n.createElementVNode)("tr",null,[(0,n.createElementVNode)("th",null,"Visitor Id"),(0,n.createElementVNode)("th",null,"Visitor Email"),(0,n.createElementVNode)("th",null,"Created At"),(0,n.createElementVNode)("th",null,"Check In"),(0,n.createElementVNode)("th",null,"Check Out")])],-1)),(0,n.createElementVNode)("tbody",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(o.visitorLogs,(e=>((0,n.openBlock)(),(0,n.createElementBlock)("tr",{key:e.id},[(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.visitor_id),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.visitor_email),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.created_at),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.check_in_time),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.check_out_time),1)])))),128))])])):(0,n.createCommentVNode)("",!0)])])}var Lo={async fetchData(){try{const e=await c.get("/visitorlog");return e.data}catch(e){throw console.error("Error fetching visitor code data:",e),new Error("Failed to fetch visitor code data.")}},anotherServiceMethod(e){return`Processed ${e}`}},Io={name:"DisplayCodeView",setup(){const e=(0,s.rd)(),t=(0,s.lq)(),a=(0,n.ref)(t?.params?.domain||"scb"),o=(0,n.ref)([]),l=(0,n.ref)(""),r=(0,n.ref)(null),c=async()=>{try{const e=await Lo.fetchData();console.log("Fetched Response:",e),o.value=e,l.value="Data fetched successfully!"}catch(e){r.value="Failed to fetch data.",console.error(e)}},i=()=>{e.push({name:"Menu",params:{domain:a.value}})};return(0,n.onMounted)((()=>{c()})),{domain:a,visitorLogs:o,message:l,error:r,goToMenu:i}}};const To=(0,C.A)(Io,[["render",qo],["__scopeId","data-v-6df14b8a"]]);var Ao=To;const Uo={class:"container"},$o={class:"d-flex justify-content-center align-items-center"},Oo={class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},Po={key:0,class:"mt-3"},jo={key:1,class:"mt-3"},Qo={class:"text-center"},Fo={key:0},zo={class:"d-flex justify-content-center py-3"},Jo={key:0,class:"mdc-data-table__table"},Ho={class:"mdc-data-table__cell"},Wo={class:"mdc-data-table__cell"},Yo={class:"mdc-data-table__cell"},Go={class:"mdc-data-table__cell"},Ko={class:"mdc-data-table__cell"},Zo=["onClick"],Xo={class:"mdc-data-table__cell"},el=["onClick","src"],tl=["src","alt"];function al(e,t,a,o,l,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",Uo,[(0,n.createElementVNode)("div",$o,[(0,n.createElementVNode)("div",Oo,[(0,n.createElementVNode)("button",{class:"back",onClick:t[0]||(t[0]=e=>o.goToMenu())},"Retour"),e.route?.params?.slug?((0,n.openBlock)(),(0,n.createElementBlock)("h3",Po,"Liste Participants")):((0,n.openBlock)(),(0,n.createElementBlock)("h3",jo,"Lista de Entreprise "))])]),(0,n.createElementVNode)("div",Qo,[e.route?.params?.slug?((0,n.openBlock)(),(0,n.createElementBlock)("h4",Fo,"Evenements : "+(0,n.toDisplayString)(e.event?.name),1)):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",zo,[o.companyList.length?((0,n.openBlock)(),(0,n.createElementBlock)("table",Jo,[t[1]||(t[1]=(0,n.createElementVNode)("thead",null,[(0,n.createElementVNode)("tr",{class:"mdc-data-table__header-row"},[(0,n.createElementVNode)("th",{class:"mdc-data-table__header-cell",role:"columnheader","aria-sort":"none"},[(0,n.createElementVNode)("div",{class:"mdc-data-table__header-cell-wrapper"},"ID")]),(0,n.createElementVNode)("th",{class:"mdc-data-table__header-cell",role:"columnheader","aria-sort":"none"},[(0,n.createElementVNode)("div",{class:"mdc-data-table__header-cell-wrapper"},"Nom de l'entreprise")]),(0,n.createElementVNode)("th",{class:"mdc-data-table__header-cell",role:"columnheader","aria-sort":"none"},[(0,n.createElementVNode)("div",{class:"mdc-data-table__header-cell-wrapper"},"Description")]),(0,n.createElementVNode)("th",{class:"mdc-data-table__header-cell",role:"columnheader","aria-sort":"none"},[(0,n.createElementVNode)("div",{class:"mdc-data-table__header-cell-wrapper"}," Limace")]),(0,n.createElementVNode)("th",{class:"mdc-data-table__header-cell",role:"columnheader","aria-sort":"none"},[(0,n.createElementVNode)("div",{class:"mdc-data-table__header-cell-wrapper"},"Lien")]),(0,n.createElementVNode)("th",{class:"mdc-data-table__header-cell",role:"columnheader","aria-sort":"none"},[(0,n.createElementVNode)("div",{class:"mdc-data-table__header-cell-wrapper"},"QRCode")]),(0,n.createElementVNode)("th",{class:"mdc-data-table__header-cell",role:"columnheader","aria-sort":"none"},[(0,n.createElementVNode)("div",{class:"mdc-data-table__header-cell-wrapper"},"Logo")])])],-1)),(0,n.createElementVNode)("tbody",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(o.companyList,(e=>((0,n.openBlock)(),(0,n.createElementBlock)("tr",{key:e.id,class:"mdc-data-table__row"},[(0,n.createElementVNode)("td",Ho,(0,n.toDisplayString)(e.id),1),(0,n.createElementVNode)("td",Wo,(0,n.toDisplayString)(e.name),1),(0,n.createElementVNode)("td",Yo,(0,n.toDisplayString)(e.description),1),(0,n.createElementVNode)("td",Go,(0,n.toDisplayString)(e.slug),1),(0,n.createElementVNode)("td",Ko,[(0,n.createElementVNode)("i",{"data-v-74f17804":"",class:"material-icons","aria-hidden":"true",role:"button",onClick:t=>o.copyContent(e.slug)}," content_copy",8,Zo)]),(0,n.createElementVNode)("td",Xo,[(0,n.createElementVNode)("img",{role:"button",onClick:t=>o.showCompanyQR(e?.slug),width:"100px",height:"100px",class:"logo_qr",src:`${o.publicDir}/qrcode-company/qrcode-${e.slug}.png`,alt:"No img"},null,8,el)]),(0,n.createElementVNode)("td",null,[(0,n.createElementVNode)("img",{src:`${o.publicDir}/logo/${e?.logo}`,class:"",height:"75",width:"75",style:{"margin-top":"20px","margin-bottom":"20px"},alt:e.logo},null,8,tl)])])))),128))])])):(0,n.createCommentVNode)("",!0)])])}var nl={async fetchData(){try{const e=await c.get("/companylist");return console.log("i am here",e.data),e.data}catch(e){throw console.error("Error fetching visitor code data:",e),new Error("Failed to fetch visitor code data.")}},anotherServiceMethod(e){return`Processed ${e}`}},ol={name:"CompanyListView",setup(){const e=(0,s.rd)(),t=(0,s.lq)(),a=(0,n.ref)(t?.params?.domain||"scb"),o=(0,n.ref)([]),l=(0,n.ref)(""),r=(0,n.ref)(null),{publicDir:c}=d(),i=async()=>{try{const e=await nl.fetchData();console.log("Fetched Response:",e),o.value=e.data,l.value="Data fetched successfully!"}catch(e){r.value="Failed to fetch data.",console.error(e)}},u=t=>{console.log({domain:a.value,slug:t}),e.push({name:"ShowCompanyQRcode",params:{domain:a.value,slug:t}})},p=e=>{const t=(0,n.ref)(!1),a={NODE_ENV:"production",VUE_APP_API_URL:"https://www.securecheck.info/api/public/index.php/api",BASE_URL:"/"}.FRONT_URL??window.location.host,o=`${a}/${e}`;navigator.clipboard.writeText(o).then((()=>{t.value=!0,m.oR.info("Texte Copié"),setTimeout((()=>{t.value=!1}),2e3)})).catch((e=>{console.error("Échec de la copie : ",e)}))},v=()=>{e.push({name:"Menu",params:{domain:a.value}})};return(0,n.onMounted)((()=>{i()})),{domain:a,companyList:o,message:l,error:r,goToMenu:v,publicDir:c,copyContent:p,showCompanyQR:u}}};const ll=(0,C.A)(ol,[["render",al]]);var rl=ll;const cl={class:"container"},sl={class:"d-flex justify-content-center align-items-center"},il={class:"d-flex justify-content-start mb-4 gap-3 align-items-center"},ul={key:0,class:"mt-3"},dl={key:1,class:"mt-3"},ml={class:"text-center"},pl={key:0},vl={class:"d-flex justify-content-center py-3"},fl={key:0,class:"table table-striped"},El={key:1};function gl(e,t,a,o,l,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",cl,[(0,n.createElementVNode)("div",sl,[(0,n.createElementVNode)("div",il,[(0,n.createElementVNode)("button",{class:"back",onClick:t[0]||(t[0]=e=>o.goToMenu())},"Retour"),e.route?.params?.slug?((0,n.openBlock)(),(0,n.createElementBlock)("h3",ul,"Liste Participants")):((0,n.openBlock)(),(0,n.createElementBlock)("h3",dl,"Lista de event attendence"))])]),(0,n.createElementVNode)("div",ml,[e.route?.params?.slug?((0,n.openBlock)(),(0,n.createElementBlock)("h4",pl,"Evenements : "+(0,n.toDisplayString)(e.event?.name),1)):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",vl,[o.eventAttendence.length?((0,n.openBlock)(),(0,n.createElementBlock)("table",fl,[t[1]||(t[1]=(0,n.createElementVNode)("thead",null,[(0,n.createElementVNode)("tr",null,[(0,n.createElementVNode)("th",null,"Visitor Id"),(0,n.createElementVNode)("th",null,"Visitor Name"),(0,n.createElementVNode)("th",null,"Email"),(0,n.createElementVNode)("th",null,"Visitor Address"),(0,n.createElementVNode)("th",null,"Event Name"),(0,n.createElementVNode)("th",null,"Event Location"),(0,n.createElementVNode)("th",null,"Event Created At")])],-1)),(0,n.createElementVNode)("tbody",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(o.eventAttendence,(e=>((0,n.openBlock)(),(0,n.createElementBlock)("tr",{key:e.id},[(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.id),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.firstname),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.email),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.address),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.eventName),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.eventLocation),1),(0,n.createElementVNode)("td",null,(0,n.toDisplayString)(e.eventCreatedAt),1)])))),128))])])):((0,n.openBlock)(),(0,n.createElementBlock)("p",El,"No data available."))])])}var hl={async fetchData(){try{const e=await c.get("/eventattendencelist");return e.data}catch(e){throw console.error("Error fetching visitor code data:",e),new Error("Failed to fetch visitor code data.")}},anotherServiceMethod(e){return`Processed ${e}`}},Vl={name:"DisplayEventAttendence",setup(){const e=(0,s.rd)(),t=(0,s.lq)(),a=(0,n.ref)(t?.params?.domain||"scb"),o=(0,n.ref)([]),l=(0,n.ref)(""),r=(0,n.ref)(null),c=async()=>{try{const e=await hl.fetchData();console.log("Fetched Response:",e);const t=e.flatMap((e=>e.visitors.map((t=>({...t,eventName:e.event.name,eventLocation:e.event.location,eventCreatedAt:e.event.created_at})))));o.value=t,l.value="Data fetched successfully!"}catch(e){r.value="Failed to fetch data.",console.error(e)}},i=()=>{e.push({name:"Menu",params:{domain:a.value}})};return(0,n.onMounted)((()=>{c()})),{domain:a,eventAttendence:o,message:l,error:r,goToMenu:i}}};const Nl=(0,C.A)(Vl,[["render",gl]]);var yl=Nl;const kl={class:"container"},bl={"data-v-3f0f1f51":"",class:"row align-items-center"},wl={"data-v-3f0f1f51":"",class:"col col-12 col-md-12 col-sm-12 event-details event_details_main"},Cl={"data-v-3f0f1f51":"",class:"popup-logo"},_l={"data-v-3f0f1f51":""},Bl={"data-v-3f0f1f51":"",class:"event-title"},Rl={"data-v-3f0f1f51":""},Sl={"data-v-3f0f1f51":"",class:"event-title"},xl={"data-v-3f0f1f51":""},Ml={"data-v-3f0f1f51":"",class:"event-title"},Dl={"data-v-3f0f1f51":""},ql={"data-v-3f0f1f51":"",class:"event-title"},Ll={"data-v-3f0f1f51":""},Il={"data-v-3f0f1f51":"",class:"event-title"},Tl={"data-v-3f0f1f51":"",href:"/diner-aka",class:""},Al=["src"];function Ul(e,t,a,o,l,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",kl,[(0,n.createElementVNode)("div",bl,[(0,n.createElementVNode)("div",wl,[(0,n.createElementVNode)("div",Cl,[t[11]||(t[11]=(0,n.createElementVNode)("div",{"data-v-3f0f1f51":""},null,-1)),((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(o.companyList,((e,a)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"event-details",key:a},[(0,n.createElementVNode)("div",_l,[t[1]||(t[1]=(0,n.createElementVNode)("b",{"data-v-3f0f1f51":""}," Id",-1)),t[2]||(t[2]=(0,n.createTextVNode)()),(0,n.createElementVNode)("h3",Bl,(0,n.toDisplayString)(e.id),1)]),(0,n.createElementVNode)("div",Rl,[t[3]||(t[3]=(0,n.createElementVNode)("b",{"data-v-3f0f1f51":""}," Nom de l'entreprise",-1)),t[4]||(t[4]=(0,n.createTextVNode)()),(0,n.createElementVNode)("h3",Sl,(0,n.toDisplayString)(e.name),1)]),(0,n.createElementVNode)("div",xl,[t[5]||(t[5]=(0,n.createElementVNode)("b",{"data-v-3f0f1f51":""}," Description",-1)),t[6]||(t[6]=(0,n.createTextVNode)()),(0,n.createElementVNode)("h3",Ml,(0,n.toDisplayString)(e.description),1)]),(0,n.createElementVNode)("div",Dl,[t[7]||(t[7]=(0,n.createElementVNode)("b",{"data-v-3f0f1f51":""}," Limace ",-1)),t[8]||(t[8]=(0,n.createTextVNode)()),(0,n.createElementVNode)("h3",ql,(0,n.toDisplayString)(e.slug),1)]),(0,n.createElementVNode)("div",Ll,[t[9]||(t[9]=(0,n.createElementVNode)("b",{"data-v-3f0f1f51":""}," Lien ",-1)),t[10]||(t[10]=(0,n.createTextVNode)()),(0,n.createElementVNode)("h3",Il,"https://www.securecheck.info/"+(0,n.toDisplayString)(e.slug),1)])])))),128)),((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(o.companyList,((a,l)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"event-detailssss",key:l},[(0,n.createElementVNode)("a",Tl,[(0,n.createElementVNode)("img",{role:"button",onClick:t[0]||(t[0]=t=>o.showCompanyQR(e.log?.slug)),width:"100px",height:"100px",class:"logo_qr",src:`${o.publicDir}/qrcode-company/qrcode-${a.slug}.png`,alt:"No img"},null,8,Al)])])))),128))])])])])}var $l={async fetchData(){try{const e=window.location.href,t=e.split("/").pop(),a=await c.get("/singlecompanylist?url="+t);return console.log("i am here",a.data),a.data}catch(e){throw console.error("Error fetching visitor code data:",e),new Error("Failed to fetch visitor code data.")}},anotherServiceMethod(e){return`Processed ${e}`}},Ol={name:"ShowCompanyQRcode",setup(){const e=(0,s.rd)(),t=(0,s.lq)(),a=(0,n.ref)(t?.params?.domain||"scb"),o=(0,n.ref)([]),l=(0,n.ref)(""),r=(0,n.ref)(null),{publicDir:c}=d(),i=async()=>{try{const e=await $l.fetchData();if(console.log("Fetched Response:",e.data),!e.data||!e.data.id)throw new Error("Expected data not found");o.value=[e.data],console.log("companyList:",o.value),l.value="Data fetched successfully!"}catch(e){r.value="Failed to fetch data.",console.error(e)}},u=t=>{console.log({domain:a.value,slug:t}),e.push({name:"ShowCompanyQRcode",params:{domain:a.value,slug:t}})},p=e=>{const t=(0,n.ref)(!1),a={NODE_ENV:"production",VUE_APP_API_URL:"https://www.securecheck.info/api/public/index.php/api",BASE_URL:"/"}.FRONT_URL??window.location.host,o=`${a}/${e}`;navigator.clipboard.writeText(o).then((()=>{t.value=!0,m.oR.info("Texte Copié"),setTimeout((()=>{t.value=!1}),2e3)})).catch((e=>{console.error("Échec de la copie : ",e)}))},v=()=>{e.push({name:"Menu",params:{domain:a.value}})};return(0,n.onMounted)((()=>{i()})),{domain:a,companyList:o,message:l,error:r,goToMenu:v,publicDir:c,copyContent:p,showCompanyQR:u}}};const Pl=(0,C.A)(Ol,[["render",Ul]]);var jl=Pl;const Ql=[{path:"/sign-in",name:"Login",component:F},{path:"/:domain/meeting",name:"CreateVisitor",component:Le},{path:"/:domain/create-user",name:"CreateUser",component:fe},{path:"/:domain/list-users",name:"ListUser",component:xa},{path:"/:domain/request-meeting",name:"RequestMeeting",component:lt,alias:["/","/:domain"]},{path:"/:domain/waiting-validation/:id",name:"WaitingValidation",component:yt},{path:"/:domain/show-event-qrcode/:slug",name:"ShowEventQRcode",component:fo},{path:"/:domain/qr-code/:id",name:"QrCode",component:Ht},{path:"/:domain/list-qrcode",name:"ListQrcode",component:Lt},{path:"/:domain/list-qrcode-events/:slug",name:"ListQrcodeEvents",component:Lt},{path:"/:domain/manual-check",name:"ManalCheck",component:ka},{path:"/:domain/menu",name:"Menu",component:ze},{path:"/:domain/create-event",name:"CreateEvent",component:Fa},{path:"/company/:company_slug/event/:slug",name:"JoinEvent",component:Le},{path:"/:domain/list-events",name:"EventList",component:rn},{path:"/:domain/success-checkout/:uidn",name:"SuccessCheckout",component:gn},{path:"/:domain/success-checkin/:uidn",name:"SuccessCheckin",component:_n},{path:"/:domain/create-company",name:"CreateCompany",component:An},{path:"/:domain/edit-company/:company_edit",name:"EditCreateCompany",component:Wn},{path:"/:domain/company-list",name:"CompanyList",component:rl},{path:"/:domain/show-company-qrcode/:slug",name:"ShowCompanyQRcode",component:jl},{path:"/:domain/create-qr",name:"CreateQRCode",component:ia},{path:"/:domain/camera",name:"Camera",component:bo},{path:"/:domain/display-logs",name:"DisplayVisitorCode",component:Ao},{path:"/:domain/event-attendences",name:"DisplayEventAttendence",component:yl}],Fl=(0,s.aE)({history:(0,s.LA)(),routes:Ql});var zl=Fl,Jl=a(6958),Hl=a(1911),Wl=a(5073),Yl=a(9449),Gl=a.n(Yl),Kl=a(828);Hl.A.use(Wl.A);const Zl=(0,n.createApp)(L);Zl.use(zl),Zl.use(Kl.Ay),Zl.use(Gl(),{});const Xl=(0,u.Ey)();Xl.use(Jl.A),Zl.use(Xl),Zl.mount("#app")}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,l){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],l=e[u][2];for(var c=!0,s=0;s<n.length;s++)(!1&l||r>=l)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(c=!1,l<r&&(r=l));if(c){e.splice(u--,1);var i=o();void 0!==i&&(t=i)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[n,o,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,l,r=n[0],c=n[1],s=n[2],i=0;if(r.some((function(t){return 0!==e[t]}))){for(o in c)a.o(c,o)&&(a.m[o]=c[o]);if(s)var u=s(a)}for(t&&t(n);i<r.length;i++)l=r[i],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(u)},n=self["webpackChunksecure_check"]=self["webpackChunksecure_check"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(8177)}));n=a.O(n)})();
//# sourceMappingURL=app.c20a49e7.js.map